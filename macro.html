<html lang="pt-BR">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="style.css" />
        <link rel="icon" href="img/favicon.ico" type="image/x-icon" />
        <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1"></script>
        <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script> 
<script async src="https://www.googletagmanager.com/gtag/js?id=G-4WT805FFHQ"></script>    
        <title>BetStat</title>
            <!-- Meta tags SEO principais -->
            <meta name="description" content="Transforme suas apostas com BetStat - a única plataforma especializada em futebol virtual Betano. Análises precisas, estatísticas confiáveis e resultados comprovados para investimentos inteligentes.">
            <meta name="keywords" content="BetStat, apostas esportivas, futebol virtual, Betano, estatísticas apostas, análise apostas, investimentos esportivos">
            
            <!-- Open Graph meta tags para redes sociais -->
            <meta property="og:title" content="BetStat | Plataforma de Análise para Apostas Esportivas">
            <meta property="og:description" content="Transforme suas apostas com análises precisas e estatísticas confiáveis. A única plataforma especializada em futebol virtual Betano.">
            <meta property="og:type" content="website">
            <meta property="og:url" content="https://www.betstat.site/payment.html">
            <meta property="og:site_name" content="BetStat">
            
            <!-- Meta tags adicionais -->
            <meta name="robots" content="index, follow">
            <meta name="author" content="BetStat">
            <meta name="canonical" href="https://www.betstat.site/payment.html">
        <script type="module">
            import { initializeApp } from "https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js";
            import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.0.0/firebase-auth.js";
    

            const firebaseConfig = {
                apiKey: "AIzaSyDmLGMBnUa2YOdP0b-zlZepXjm-zlV477A",
                authDomain: "linoautenticador.firebaseapp.com",
                projectId: "linoautenticador",
                storageBucket: "linoautenticador.firebasestorage.app",
                messagingSenderId: "946057648829",
                appId: "1:946057648829:web:ac5c2b1ba66e651f9d75d4",
                measurementId: "G-4WT805FFHQ"
            };
    

            const app = initializeApp(firebaseConfig);
            const auth = getAuth(app);
    

            onAuthStateChanged(auth, (user) => {
                if (!user) {

                    window.location.href = "auth.html"; 
                } 
            });
    

            window.logout = function() {
                signOut(auth).then(() => {
                    alert("Você saiu com sucesso!");
                    window.location.href = "auth.html"; 
                }).catch((error) => {
                    alert("Erro ao sair: " + error.message);
                });
            };
        </script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
    
            gtag('config', 'G-4WT805FFHQ');
        </script>
        <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet" />
        
    </head>
    
<body>
    <header>
        <div class="header-container">
            <img src="img/logo.png" alt="Logo" class="logo" />
            <div class="selectors-container">
                <div class="nav-seletor">
                    <label for="ligas"></label>
                    <select id="ligas" onchange="redirecionar(this)">
                        <option value="">Selecione uma liga</option> 
                        <option value="index.html">Taça Glória Eterna</option>
                        <option value="copa_america.html">Copa América</option>
                        <option value="euro.html">Euro</option>
                        <option value="campeonato_italiano.html">Campeonato Italiano</option>
                        <option value="copa_das_estrelas.html">Copa das Estrelas</option>
                        <option value="british_derbies.html">British Derbies</option>
                        <option value="scudetto_italiano.html">Scudetto Italiano</option>
                        <option value="liga_espanhola.html">Liga Espanhola</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="nav-seletor">
            <label for="redes"></label>
            <select id="redes" onchange="redirecionar(this)">
                <option value="">Suporte</option>
                <option value="https://api.whatsapp.com/send?phone=5575991103046">WhatsApp</option>

            </select>
        </div>

        <div class="nav-seletor">
            <label for="redes"></label>
            <select id="redes" onchange="redirecionar(this)">
                <option value="">Extras</option>
                <option value="https://www.betstat.site/tv/">Ao vivo</option>
                <option value="https://www.betstat.site/central/">Cental Tipster</option>
                <option value="https://youtu.be/oRqi3RvH8zE">Tutorial</option>
                <option value="blog.html">Blog</option>

            </select>
        </div>

        <button onclick="logout()">Sair</button>

        <img src="img/betano (2).png" alt="Logo" class="logo" />

    </header>

    <div class="MACRO-container">
        <div class="MACRO-header">
            <select id="leagueSelector" onchange="MACROUpdateChart()">
                <option value="Taça%20Glória%20eterna">Taça Glória Eterna</option>
                <option value="Copa%20America">Copa América</option>
                <option value="Euro">Euro</option>
                <option value="Campeonato%20Italiano">Campeonato Italiano</option>
                <option value="Copa%20das%20estrelas">Copa das Estrelas</option>
                <option value="British%20Derbies">British Derbies</option>
                <option value="Liga%20Espanhola">Liga Espanhola</option>
                <option value="Scudetto%20Italiano">Scudetto Italiano</option>
            </select>
            <select id="MACROSelector" onchange="MACROUpdateChart()">
                <option value="ambos-sim">Ambas Sim</option>
                <option value="ambos-nao">Ambas Não</option>
                <option value="casaVence">Casa Vence</option>
                <option value="foraVence">Fora Vence</option>
                <option value="empates">Empates</option>
                <option value="over1_5">Over 1.5</option>
                <option value="under1_5">Under 1.5</option>
                <option value="over2_5">Over 2.5</option>
                <option value="under2_5">Under 2.5</option>
                <option value="over3_5">Over 3.5</option>
                <option value="under3_5">Under 3.5</option>
                <option value="cincoMaisGols">5 ou mais Gols</option>
            </select>
        </div>

        <div class="MACRO-chart-container">
            <canvas id="MACROChart"></canvas>
        </div>

        <div class="best-times-box">
            <h3>Melhores Horas para Cada Mercado</h3>
            <ul id="bestTimesList">
                <!-- A lista das melhores horas será gerada aqui -->
            </ul>
        </div>
    </div>

    <script>
let MACROChart = null;
let chartDataCache = [];
let averageDataCache = [];

function MACROGenerate24Hours() {
    const hours = [];
    const now = new Date();
    const currentHour = now.getHours();

    // Generate all 24 hours in chronological order starting from 24 hours ago
    for (let i = 0; i < 24; i++) {
        let hour = (currentHour - 23 + i + 24) % 24;  // Ensure positive hour values
        hours.push(hour);
    }

    return hours;
}

async function MACROFetchData() {
    const league = document.getElementById('leagueSelector').value;
    try {
        const response = await fetch(`https://betstat.site/resultados/${league}`);
        const data = await response.json();
        return MACROProcessData(data);
    } catch (error) {
        console.error('Erro ao buscar dados:', error);
        return { hours: [], data: [] };
    }
}

function MACROProcessData(rawData) {
    const hours = MACROGenerate24Hours();
    const hourlyData = new Map();

    // Initialize data for all hours
    hours.forEach(hour => {
        hourlyData.set(hour, {
            'ambos-sim': 0,
            'ambos-nao': 0,
            'casaVence': 0,
            'foraVence': 0,
            'empates': 0,
            'over1_5': 0,
            'under1_5': 0,
            'over2_5': 0,
            'under2_5': 0,
            'over3_5': 0,
            'under3_5': 0,
            'cincoMaisGols': 0
        });
    });

    const now = new Date();
    const twentyFourHoursAgo = new Date(now - 24 * 60 * 60 * 1000);

    rawData.forEach(entry => {
        const entryDate = new Date(entry.data);
        if (entryDate >= twentyFourHoursAgo) {
            const hour = parseInt(entry.hora);
            if (hourlyData.has(hour)) {
                const [goalsA, goalsB] = entry.ft.split('x').map(n => parseInt(n.trim()));
                const hourStats = hourlyData.get(hour);

                if (goalsA > 0 && goalsB > 0) hourStats['ambos-sim']++;
                if (goalsA === 0 || goalsB === 0) hourStats['ambos-nao']++;
                if (goalsA > goalsB) hourStats['casaVence']++;
                if (goalsA < goalsB) hourStats['foraVence']++;
                if (goalsA === goalsB) hourStats['empates']++;

                const totalGoals = goalsA + goalsB;
                if (totalGoals > 1.5) hourStats['over1_5']++;
                if (totalGoals <= 1.5) hourStats['under1_5']++;
                if (totalGoals > 2.5) hourStats['over2_5']++;
                if (totalGoals <= 2.5) hourStats['under2_5']++;
                if (totalGoals > 3.5) hourStats['over3_5']++;
                if (totalGoals <= 3.5) hourStats['under3_5']++;
                if (totalGoals >= 5) hourStats['cincoMaisGols']++;
            }
        }
    });

    return {
        hours: hours.map(h => `${h}:00`),
        hourlyData
    };
}

function updateBestTimes(hourlyData) {
    const bestTimesList = document.getElementById('bestTimesList');
    bestTimesList.innerHTML = '';

    const bestTimes = {};

    // Para cada mercado, encontramos a hora com mais ocorrências
    for (let market in hourlyData.get(0)) {
        let bestHour = '';
        let maxCount = 0;

        hourlyData.forEach((stats, hour) => {
            if (stats[market] > maxCount) {
                maxCount = stats[market];
                bestHour = `${hour}:00`;
            }
        });

        let friendlyName = market
            .replace(/([a-z])([A-Z])/g, '$1 $2')
            .replace('Over 1_5', 'Over 1.5')
            .replace('Under 1_5', 'Under 1.5')
            .replace('Over 2_5', 'Over 2.5')
            .replace('Under 2_5', 'Under 2.5')
            .replace('Over 3_5', 'Over 3.5')
            .replace('Under 3_5', 'Under 3.5')
            .replace('CincoMaisGols', 'Cinco Mais Gols');
        
        const listItem = document.createElement('li');
        listItem.innerHTML = `<strong>"${friendlyName}"</strong>: Melhor hora: <span>${bestHour}</span> (Total: <span>${maxCount}</span>)`;
        bestTimesList.appendChild(listItem);
    }
}

async function MACROUpdateChart() {
    const selectedMarket = document.getElementById('MACROSelector').value;
    const { hours, hourlyData } = await MACROFetchData();

    const data = hours.map(hour => {
        const h = parseInt(hour);
        return hourlyData.get(h)[selectedMarket];
    });

    const average = data.reduce((acc, val) => acc + val, 0) / data.length;
    const averageData = new Array(hours.length).fill(average);

    if (!chartDataCache.length || JSON.stringify(data) !== JSON.stringify(chartDataCache)) {
        chartDataCache = data;
        averageDataCache = averageData;

        if (MACROChart) {
            MACROChart.data.labels = hours;
            MACROChart.data.datasets[0].label = selectedMarket;
            MACROChart.data.datasets[0].data = data;
            MACROChart.data.datasets[1].data = averageData;
            MACROChart.update();
        } else {
            const ctx = document.getElementById('MACROChart').getContext('2d');
            MACROChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: hours,
                    datasets: [
                        {
                            label: selectedMarket,
                            data: data,
                            borderColor: '#4CAF50',
                            backgroundColor: 'rgba(76, 175, 80, 0.1)',
                            tension: 0.4,
                            fill: true,
                            pointBackgroundColor: '#4CAF50',
                            pointRadius: 6,
                            pointHoverRadius: 8
                        },
                        {
                            label: 'Média',
                            data: averageData,
                            borderColor: '#FF9800',
                            borderWidth: 2,
                            borderDash: [5, 5],
                            fill: false,
                            tension: 0,
                            pointBackgroundColor: '#FF9800',
                            pointRadius: 4,
                            pointHoverRadius: 6
                        }
                    ]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#e0e0e0'
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: '#444'
                            },
                            ticks: {
                                color: '#e0e0e0'
                            }
                        },
                        x: {
                            grid: {
                                color: '#444'
                            },
                            ticks: {
                                color: '#e0e0e0'
                            }
                        }
                    }
                }
            });
        }
        updateBestTimes(hourlyData);
    }
}

setInterval(MACROUpdateChart, 3000);
    </script>

    <script>
                    document.addEventListener("contextmenu", function(e) {
                e.preventDefault();
            });
    

            document.addEventListener("keydown", function(e) {

                if (e.key === "F12" || 
                    (e.ctrlKey && e.shiftKey && e.key === "I")) {
                    e.preventDefault();
                }
    

                if (e.ctrlKey && e.key === "u") {
                    e.preventDefault();
                }
    

                if (e.ctrlKey && e.shiftKey && e.key === "J") {
                    e.preventDefault();
                }
    

                if (e.ctrlKey && e.shiftKey && e.key === "C") {
                    e.preventDefault();
                }
            });
    

            const devtools = { open: false };
            const element = new Image();
            Object.defineProperty(element, 'id', {
                get: function () {
                    devtools.open = true;
                }
            });
    
            console.log('%c', element); 
            setInterval(function() {
                if (devtools.open) {
                    alert('Desculpe, as ferramentas de desenvolvedor estão abertas!');
                    devtools.open = false; 
                }
            }, 1000);
    
            function toggleVideo() {

                const videoDiv = document.getElementById("liveVideo");
                const overlayDiv = videoDiv.querySelector(".iframe-overlay"); 
                const button = document.querySelector(".toggle-button");
            

                const isVisible = window.getComputedStyle(videoDiv).display !== "none";
            

                if (isVisible) {
                    videoDiv.style.display = "none";  
                    overlayDiv.style.display = "none"; 
                    button.textContent = "Expandir Vídeo";  
                } else {
                    videoDiv.style.display = "block";  
                    overlayDiv.style.display = "block"; 
                    button.textContent = "Contrair Vídeo";  
                }
            }
    </script>

 <script>
    function redirecionar(select) {
    const url = select.value;
    
    if (url === "https://t.me/betstatsite" || 
        url === "https://api.whatsapp.com/send?phone=5575991103046" || 
        url === "https://www.betstat.site/tv/" || 
        url === "https://www.betstat.site/macro.html/" || 
        url === "https://youtu.be/oRqi3RvH8zE" || 
        url === "https://www.betstat.site/central/") {
        window.open(url, '_blank');
    } else if (url) {
        window.location.href = url;
    }
}
 </script>

</body>
</html>
