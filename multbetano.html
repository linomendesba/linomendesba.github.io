<html lang="pt-BR">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="icon" href="img/favicon.ico" type="image/x-icon" />
        <link rel="stylesheet" href="style.css" />
        <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1"></script>
        <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
        <script
          async
          src="https://www.googletagmanager.com/gtag/js?id=G-4WT805FFHQ"
        ></script>
        <title>BetStat</title>
        <!-- Meta tags SEO principais -->
        <meta
          name="description"
          content="Transforme suas apostas com BetStat - a única plataforma especializada em futebol virtual Betano. Análises precisas, estatísticas confiáveis e resultados comprovados para investimentos inteligentes."
        />
        <meta
          name="keywords"
          content="BetStat, apostas esportivas, futebol virtual, Betano, estatísticas apostas, análise apostas, investimentos esportivos"
        />
    
        <!-- Open Graph meta tags para redes sociais -->
        <meta
          property="og:title"
          content="BetStat | Plataforma de Análise para Apostas Esportivas"
        />
        <meta
          property="og:description"
          content="Transforme suas apostas com análises precisas e estatísticas confiáveis. A única plataforma especializada em futebol virtual Betano."
        />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://www.betstat.site/payment.html" />
        <meta property="og:site_name" content="BetStat" />
    
        <!-- Meta tags adicionais -->
        <meta name="robots" content="index, follow" />
        <meta name="author" content="BetStat" />
        <meta name="canonical" href="https://www.betstat.site/payment.html" />
        <script type="module" src="js/firebase-auth.js"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag() {
            dataLayer.push(arguments);
          }
          gtag("js", new Date());
    
          gtag("config", "G-4WT805FFHQ");
        </script>
        <link
          href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap"
          rel="stylesheet"
        />
      </head>

  <body>
    <body>


        <div id="header"></div>

    <br><br>

<!-- ══════════════════════════════════════════════════════════════
     COPA AMÉRICA
     ══════════════════════════════════════════════════════════════ -->
<div class="liga-box">
<h4>Copa América</h4>
<div class="seletor-container">
  <div class="seletor-horas"><label>Horas:</label>
    <select id="seletorHoras-copaAmerica">
      <option value="3">3h</option><option value="6" selected>6h</option>
      <option value="12">12h</option><option value="24">24h</option>
    </select>
  </div>
  <div class="seletor-resultado"><label>Mercado:</label>
    <select id="seletorResultado-copaAmerica">
      <option value="ambasMarcam" selected>Ambas Sim</option>
      <option value="ambasNaoMarcam">Ambas Não</option>
      <option value="casaVence">Casa Vence</option>
      <option value="foraVence">Fora Vence</option>
      <option value="empate">Empate</option>
      <option value="over1.5">Over 1.5</option>
      <option value="under1.5">Under 1.5</option>
      <option value="over2.5">Over 2.5</option>
      <option value="under2.5">Under 2.5</option>
      <option value="over3.5">Over 3.5</option>
      <option value="under3.5">Under 3.5</option>
      <option value="over5">Over 5+</option>
      <option value="exato0">Exatos 0 Gols</option>
      <option value="exato1">Exatos 1 Gol</option>
      <option value="exato2">Exatos 2 Gols</option>
      <option value="exato3">Exatos 3 Gols</option>
      <option value="exato4">Exatos 4 Gols</option>
    </select>
  </div>
  <div class="seletor-tipo-placar"><label>Resultado:</label>
    <select id="seletorTipoPlacar-copaAmerica">
      <option value="ft" selected>FT</option>
      <option value="ht">HT</option>
    </select>
  </div>
  <div class="seletor-times"><label>Times:</label>
    <select id="mostrarTimes-copaAmerica">
      <option value="nao" selected>Não</option>
      <option value="sim">Sim</option>
    </select>
  </div>
  <div class="seletor-ht"><label>HT:</label>
    <select id="mostrarHT-copaAmerica">
      <option value="nao" selected>Não</option>
      <option value="sim">Sim</option>
    </select>
  </div>
  <div class="seletor-odds"><label>Odds:</label>
    <select id="mostrarOdds-copaAmerica">
      <option value="nao">Não</option>
      <option value="sim" selected>Sim</option>
    </select>
  </div>
</div>
<table id="tabelaResultadosCopaAmerica" class="tabela-liga">
  <thead></thead>
  <tbody></tbody>
</table>
</div>

<!-- ══════════════════════════════════════════════════════════════
     TAÇA GLÓRIA ETERNA
     ══════════════════════════════════════════════════════════════ -->
<div class="liga-box">
<h4>Clássicos da América</h4>
<div class="seletor-container">
  <div class="seletor-horas"><label>Horas:</label>
    <select id="seletorHoras-tacaGloria">
      <option value="3">3h</option><option value="6" selected>6h</option>
      <option value="12">12h</option><option value="24">24h</option>
    </select>
  </div>
  <div class="seletor-resultado"><label>Mercado:</label>
    <select id="seletorResultado-tacaGloria">
      <option value="ambasMarcam" selected>Ambas Sim</option>
      <option value="ambasNaoMarcam">Ambas Não</option>
      <option value="casaVence">Casa Vence</option>
      <option value="foraVence">Fora Vence</option>
      <option value="empate">Empate</option>
      <option value="over1.5">Over 1.5</option>
      <option value="under1.5">Under 1.5</option>
      <option value="over2.5">Over 2.5</option>
      <option value="under2.5">Under 2.5</option>
      <option value="over3.5">Over 3.5</option>
      <option value="under3.5">Under 3.5</option>
      <option value="over5">Over 5+</option>
      <option value="exato0">Exatos 0 Gols</option>
      <option value="exato1">Exatos 1 Gol</option>
      <option value="exato2">Exatos 2 Gols</option>
      <option value="exato3">Exatos 3 Gols</option>
      <option value="exato4">Exatos 4 Gols</option>
    </select>
  </div>
  <div class="seletor-tipo-placar"><label>Resultado:</label>
    <select id="seletorTipoPlacar-tacaGloria">
      <option value="ft" selected>FT</option>
      <option value="ht">HT</option>
    </select>
  </div>
  <div class="seletor-times"><label>Times:</label>
    <select id="mostrarTimes-tacaGloria">
      <option value="nao" selected>Não</option>
      <option value="sim">Sim</option>
    </select>
  </div>
  <div class="seletor-ht"><label>HT:</label>
    <select id="mostrarHT-tacaGloria">
      <option value="nao" selected>Não</option>
      <option value="sim">Sim</option>
    </select>
  </div>
  <div class="seletor-odds"><label>Odds:</label>
    <select id="mostrarOdds-tacaGloria">
      <option value="nao">Não</option>
      <option value="sim" selected>Sim</option>
    </select>
  </div>
</div>
<table id="tabelaResultadosTacaGloria" class="tabela-liga">
  <thead></thead>
  <tbody></tbody>
</table>
</div>

<!-- ══════════════════════════════════════════════════════════════
     EURO
     ══════════════════════════════════════════════════════════════ -->
<div class="liga-box">
<h4>Euro</h4>
<div class="seletor-container">
  <div class="seletor-horas"><label>Horas:</label>
    <select id="seletorHoras-euro">
      <option value="3">3h</option><option value="6" selected>6h</option>
      <option value="12">12h</option><option value="24">24h</option>
    </select>
  </div>
  <div class="seletor-resultado"><label>Mercado:</label>
    <select id="seletorResultado-euro">
      <option value="ambasMarcam" selected>Ambas Sim</option>
      <option value="ambasNaoMarcam">Ambas Não</option>
      <option value="casaVence">Casa Vence</option>
      <option value="foraVence">Fora Vence</option>
      <option value="empate">Empate</option>
      <option value="over1.5">Over 1.5</option>
      <option value="under1.5">Under 1.5</option>
      <option value="over2.5">Over 2.5</option>
      <option value="under2.5">Under 2.5</option>
      <option value="over3.5">Over 3.5</option>
      <option value="under3.5">Under 3.5</option>
      <option value="over5">Over 5+</option>
      <option value="exato0">Exatos 0 Gols</option>
      <option value="exato1">Exatos 1 Gol</option>
      <option value="exato2">Exatos 2 Gols</option>
      <option value="exato3">Exatos 3 Gols</option>
      <option value="exato4">Exatos 4 Gols</option>
    </select>
  </div>
  <div class="seletor-tipo-placar"><label>Resultado:</label>
    <select id="seletorTipoPlacar-euro">
      <option value="ft" selected>FT</option>
      <option value="ht">HT</option>
    </select>
  </div>
  <div class="seletor-times"><label>Times:</label>
    <select id="mostrarTimes-euro">
      <option value="nao" selected>Não</option>
      <option value="sim">Sim</option>
    </select>
  </div>
  <div class="seletor-ht"><label>HT:</label>
    <select id="mostrarHT-euro">
      <option value="nao" selected>Não</option>
      <option value="sim">Sim</option>
    </select>
  </div>
  <div class="seletor-odds"><label>Odds:</label>
    <select id="mostrarOdds-euro">
      <option value="nao">Não</option>
      <option value="sim" selected>Sim</option>
    </select>
  </div>
</div>
<table id="tabelaResultadosEuro" class="tabela-liga">
  <thead></thead>
  <tbody></tbody>
</table>
</div>

<!-- ══════════════════════════════════════════════════════════════
     CAMPEONATO ITALIANO
     ══════════════════════════════════════════════════════════════ -->
<div class="liga-box">
<h4>Campeonato Italiano</h4>
<div class="seletor-container">
  <div class="seletor-horas"><label>Horas:</label>
    <select id="seletorHoras-campeonatoItaliano">
      <option value="3">3h</option><option value="6" selected>6h</option>
      <option value="12">12h</option><option value="24">24h</option>
    </select>
  </div>
  <div class="seletor-resultado"><label>Mercado:</label>
    <select id="seletorResultado-campeonatoItaliano">
      <option value="ambasMarcam" selected>Ambas Sim</option>
      <option value="ambasNaoMarcam">Ambas Não</option>
      <option value="casaVence">Casa Vence</option>
      <option value="foraVence">Fora Vence</option>
      <option value="empate">Empate</option>
      <option value="over1.5">Over 1.5</option>
      <option value="under1.5">Under 1.5</option>
      <option value="over2.5">Over 2.5</option>
      <option value="under2.5">Under 2.5</option>
      <option value="over3.5">Over 3.5</option>
      <option value="under3.5">Under 3.5</option>
      <option value="over5">Over 5+</option>
      <option value="exato0">Exatos 0 Gols</option>
      <option value="exato1">Exatos 1 Gol</option>
      <option value="exato2">Exatos 2 Gols</option>
      <option value="exato3">Exatos 3 Gols</option>
      <option value="exato4">Exatos 4 Gols</option>
    </select>
  </div>
  <div class="seletor-tipo-placar"><label>Resultado:</label>
    <select id="seletorTipoPlacar-campeonatoItaliano">
      <option value="ft" selected>FT</option>
      <option value="ht">HT</option>
    </select>
  </div>
  <div class="seletor-times"><label>Times:</label>
    <select id="mostrarTimes-campeonatoItaliano">
      <option value="nao" selected>Não</option>
      <option value="sim">Sim</option>
    </select>
  </div>
  <div class="seletor-ht"><label>HT:</label>
    <select id="mostrarHT-campeonatoItaliano">
      <option value="nao" selected>Não</option>
      <option value="sim">Sim</option>
    </select>
  </div>
  <div class="seletor-odds"><label>Odds:</label>
    <select id="mostrarOdds-campeonatoItaliano">
      <option value="nao">Não</option>
      <option value="sim" selected>Sim</option>
    </select>
  </div>
</div>
<table id="tabelaResultadosCampeonatoItaliano" class="tabela-liga">
  <thead></thead>
  <tbody></tbody>
</table>
</div>

<!-- ══════════════════════════════════════════════════════════════
     COPA DAS ESTRELAS
     ══════════════════════════════════════════════════════════════ -->
<div class="liga-box">
<h4>Copa das Estrelas</h4>
<div class="seletor-container">
  <div class="seletor-horas"><label>Horas:</label>
    <select id="seletorHoras-copaEstrelas">
      <option value="3">3h</option><option value="6" selected>6h</option>
      <option value="12">12h</option><option value="24">24h</option>
    </select>
  </div>
  <div class="seletor-resultado"><label>Mercado:</label>
    <select id="seletorResultado-copaEstrelas">
      <option value="ambasMarcam" selected>Ambas Sim</option>
      <option value="ambasNaoMarcam">Ambas Não</option>
      <option value="casaVence">Casa Vence</option>
      <option value="foraVence">Fora Vence</option>
      <option value="empate">Empate</option>
      <option value="over1.5">Over 1.5</option>
      <option value="under1.5">Under 1.5</option>
      <option value="over2.5">Over 2.5</option>
      <option value="under2.5">Under 2.5</option>
      <option value="over3.5">Over 3.5</option>
      <option value="under3.5">Under 3.5</option>
      <option value="over5">Over 5+</option>
      <option value="exato0">Exatos 0 Gols</option>
      <option value="exato1">Exatos 1 Gol</option>
      <option value="exato2">Exatos 2 Gols</option>
      <option value="exato3">Exatos 3 Gols</option>
      <option value="exato4">Exatos 4 Gols</option>
    </select>
  </div>
  <div class="seletor-tipo-placar"><label>Resultado:</label>
    <select id="seletorTipoPlacar-copaEstrelas">
      <option value="ft" selected>FT</option>
      <option value="ht">HT</option>
    </select>
  </div>
  <div class="seletor-times"><label>Times:</label>
    <select id="mostrarTimes-copaEstrelas">
      <option value="nao" selected>Não</option>
      <option value="sim">Sim</option>
    </select>
  </div>
  <div class="seletor-ht"><label>HT:</label>
    <select id="mostrarHT-copaEstrelas">
      <option value="nao" selected>Não</option>
      <option value="sim">Sim</option>
    </select>
  </div>
  <div class="seletor-odds"><label>Odds:</label>
    <select id="mostrarOdds-copaEstrelas">
      <option value="nao">Não</option>
      <option value="sim" selected>Sim</option>
    </select>
  </div>
</div>
<table id="tabelaResultadosCopaEstrelas" class="tabela-liga">
  <thead></thead>
  <tbody></tbody>
</table>
</div>

<!-- ══════════════════════════════════════════════════════════════
     BRASILEIRÃO BETANO
     ══════════════════════════════════════════════════════════════ -->
<div class="liga-box">
<h4>Brasileirão Betano</h4>
<div class="seletor-container">
  <div class="seletor-horas"><label>Horas:</label>
    <select id="seletorHoras-brasileirao">
      <option value="3">3h</option><option value="6" selected>6h</option>
      <option value="12">12h</option><option value="24">24h</option>
    </select>
  </div>
  <div class="seletor-resultado"><label>Mercado:</label>
    <select id="seletorResultado-brasileirao">
      <option value="ambasMarcam" selected>Ambas Sim</option>
      <option value="ambasNaoMarcam">Ambas Não</option>
      <option value="casaVence">Casa Vence</option>
      <option value="foraVence">Fora Vence</option>
      <option value="empate">Empate</option>
      <option value="over1.5">Over 1.5</option>
      <option value="under1.5">Under 1.5</option>
      <option value="over2.5">Over 2.5</option>
      <option value="under2.5">Under 2.5</option>
      <option value="over3.5">Over 3.5</option>
      <option value="under3.5">Under 3.5</option>
      <option value="over5">Over 5+</option>
      <option value="exato0">Exatos 0 Gols</option>
      <option value="exato1">Exatos 1 Gol</option>
      <option value="exato2">Exatos 2 Gols</option>
      <option value="exato3">Exatos 3 Gols</option>
      <option value="exato4">Exatos 4 Gols</option>
    </select>
  </div>
  <div class="seletor-tipo-placar"><label>Resultado:</label>
    <select id="seletorTipoPlacar-brasileirao">
      <option value="ft" selected>FT</option>
      <option value="ht">HT</option>
    </select>
  </div>
  <div class="seletor-times"><label>Times:</label>
    <select id="mostrarTimes-brasileirao">
      <option value="nao" selected>Não</option>
      <option value="sim">Sim</option>
    </select>
  </div>
  <div class="seletor-ht"><label>HT:</label>
    <select id="mostrarHT-brasileirao">
      <option value="nao" selected>Não</option>
      <option value="sim">Sim</option>
    </select>
  </div>
  <div class="seletor-odds"><label>Odds:</label>
    <select id="mostrarOdds-brasileirao">
      <option value="nao">Não</option>
      <option value="sim" selected>Sim</option>
    </select>
  </div>
</div>
<table id="tabelaResultadosBrasileirão" class="tabela-liga">
  <thead></thead>
  <tbody></tbody>
</table>
</div>


    <script>
// ═══════════════════════════════════════════════════════════════════════════
// CONFIGURAÇÃO DAS LIGAS
// ═══════════════════════════════════════════════════════════════════════════
const LIGAS_CONFIG = {
  copaAmerica: {
    nome:           "Copa América",
    rotaResultados: "https://betstat.site/resultados/Copa%20Am%C3%A9rica",
    rotaOdds:       "https://betstat.site/odds/Copa%20Am%C3%A9rica",
    rotaProximos:   "https://betstat.site/proximos/Copa%20Am%C3%A9rica",
    tabelaId:       "tabelaResultadosCopaAmerica",
    minutosFixos:   [2,5,8,11,14,17,20,23,26,29,32,35,38,41,44,47,50,53,56,59],
    quadrantSize:   5,
    jogosPorHora:   20,
  },
  tacaGloria: {
    nome:           "Taça Glória Eterna",
    rotaResultados: "https://betstat.site/resultados/Ta%C3%A7a%20Gl%C3%B3ria%20eterna",
    rotaOdds:       "https://betstat.site/odds/Ta%C3%A7a%20Gl%C3%B3ria%20Eterna",
    rotaProximos:   "https://betstat.site/proximos/Ta%C3%A7a%20Gl%C3%B3ria%20Eterna",
    tabelaId:       "tabelaResultadosTacaGloria",
    minutosFixos:   [1,4,7,10,13,16,19,22,25,28,31,34,37,40,43,46,49,52,55,58],
    quadrantSize:   5,
    jogosPorHora:   20,
  },
  euro: {
    nome:           "Euro",
    rotaResultados: "https://betstat.site/resultados/Euro",
    rotaOdds:       "https://betstat.site/odds/Euro",
    rotaProximos:   "https://betstat.site/proximos/Euro",
    tabelaId:       "tabelaResultadosEuro",
    minutosFixos:   [1,4,7,10,13,16,19,22,25,28,31,34,37,40,43,46,49,52,55,58],
    quadrantSize:   5,
    jogosPorHora:   20,
  },
  campeonatoItaliano: {
    nome:           "Campeonato Italiano",
    rotaResultados: "https://betstat.site/resultados/Campeonato%20Italiano",
    rotaOdds:       "https://betstat.site/odds/Campeonato%20Italiano",
    rotaProximos:   "https://betstat.site/proximos/Campeonato%20Italiano",
    tabelaId:       "tabelaResultadosCampeonatoItaliano",
    minutosFixos:   [2,5,8,11,14,17,20,23,26,29,32,35,38,41,44,47,50,53,56,59],
    quadrantSize:   5,
    jogosPorHora:   20,
  },
  copaEstrelas: {
    nome:           "Copa das Estrelas",
    rotaResultados: "https://betstat.site/resultados/Copa%20das%20estrelas",
    rotaOdds:       "https://betstat.site/odds/Copa%20das%20Estrelas",
    rotaProximos:   "https://betstat.site/proximos/Copa%20das%20Estrelas",
    tabelaId:       "tabelaResultadosCopaEstrelas",
    minutosFixos:   [0,3,6,9,12,15,18,21,24,27,30,33,36,39,42,45,48,51,54,57],
    quadrantSize:   5,
    jogosPorHora:   20,
  },
  brasileirao: {
    nome:           "Brasileirão Betano",
    rotaResultados: "https://betstat.site/resultados/Brasileir%C3%A3o%20Betano",
    rotaOdds:       "https://betstat.site/odds/Brasileir%C3%A3o%20Betano",
    rotaProximos:   "https://betstat.site/proximos/Brasileir%C3%A3o%20Betano",
    tabelaId:       "tabelaResultadosBrasileirão",
    minutosFixos:   [0,3,6,9,12,15,18,21,24,27,30,33,36,39,42,45,48,51,54,57],
    quadrantSize:   5,
    jogosPorHora:   20,
  },
};

// ═══════════════════════════════════════════════════════════════════════════
// PALETAS
// ═══════════════════════════════════════════════════════════════════════════
const CORES_PLACAR = ["#A855F7","#F59E0B","#3B82F6","#EC4899","#06B6D4","#F97316"];
const CORES_TIME   = ["#FACC15","#818CF8","#34D399","#FB7185","#A78BFA","#22D3EE"];
const CORES_ODD    = ["#F472B6","#FDE68A","#93C5FD","#6EE7B7","#FCA5A1","#C4B5FD"];

// ═══════════════════════════════════════════════════════════════════════════
// THRESHOLDS DE MERCADO
// ═══════════════════════════════════════════════════════════════════════════
const MERCADO_MEDIA_BASE = {
  ambasMarcam:9, ambasNaoMarcam:11, casaVence:8, foraVence:7, empate:5,
  "over1.5":14,"under1.5":6,"over2.5":8,"under2.5":12,
  "over3.5":4,"under3.5":16,over5:2,
  exato0:2,exato1:4,exato2:4,exato3:3,exato4:2,
};
function getThreshold(mercado, jogosPorHora) {
  const jph = jogosPorHora || 20;
  const media = MERCADO_MEDIA_BASE[mercado];
  if (media == null) return 50;
  return Math.round((media * (jph / 20) / jph) * 100);
}

// ═══════════════════════════════════════════════════════════════════════════
// ODD MAP (campos da API)
// ═══════════════════════════════════════════════════════════════════════════
const ODD_FIELD_MAP = {
  ambasMarcam:    "odds_ambas_marcam_sim",
  ambasNaoMarcam: "odds_ambas_marcam_nao",
  casaVence:      "odds_casa_vence",
  foraVence:      "odds_visitante_vence",
  empate:         "odds_empate",
  "over1.5":      "odds_mais_1_5",
  "under1.5":     "odds_menos_1_5",
  "over2.5":      "odds_mais_2_5",
  "under2.5":     "odds_menos_2_5",
  "over3.5":      "odds_mais_3_5",
  "under3.5":     "odds_menos_3_5",
  over5:          "odds_mais_5_gols",
  exato0:         "odds_exato_0_gols",
  exato1:         "odds_exato_1_gol",
  exato2:         "odds_exato_2_gols",
  exato3:         "odds_exato_3_gols",
  exato4:         "odds_exato_4_gols",
};
function getOddValue(odds, resultado) {
  return odds ? (odds[ODD_FIELD_MAP[resultado]] || "N/A") : "N/A";
}

// ═══════════════════════════════════════════════════════════════════════════
// ESTADO POR LIGA
// ═══════════════════════════════════════════════════════════════════════════
class EstadoLiga {
  constructor(key) {
    this.key                 = key;
    this.placarSelecionados  = [];
    this.timesSelecionados   = [];
    this.oddsSelecionadas    = [];
    this.selectedChaves      = [];
    this.colunasSelecionadas = [];
    this._hashDados    = null;
    this._hashOdds     = null;
    this._hashProximos = null;
  }
  _k(t) { return `${t}_${this.key}`; }
  carregar() {
    const g = k => { try { return JSON.parse(localStorage.getItem(this._k(k))) || []; } catch(e) { return []; } };
    this.placarSelecionados  = g("placarSelecionados");
    this.timesSelecionados   = g("timesSelecionados");
    this.oddsSelecionadas    = g("oddsSelecionadas");
    this.selectedChaves      = g("selectedChaves");
    this.colunasSelecionadas = g("colunasSelecionadas");
  }
  salvar() {
    const s = (k,v) => localStorage.setItem(this._k(k), JSON.stringify(v));
    s("placarSelecionados",  this.placarSelecionados);
    s("timesSelecionados",   this.timesSelecionados);
    s("oddsSelecionadas",    this.oddsSelecionadas);
    s("selectedChaves",      this.selectedChaves);
    s("colunasSelecionadas", this.colunasSelecionadas);
  }
  toggleSelecao(chave, valor) {
    const lista = this[chave];
    const idx = lista.indexOf(valor);
    if (idx !== -1) lista.splice(idx, 1);
    else { if (lista.length >= 6) lista.shift(); lista.push(valor); }
    this.salvar();
  }
  limparTipo(chave) { this[chave].length = 0; this.salvar(); }
  getCorSelecao(lista, valor, tipo) {
    const idx = lista.indexOf(valor); if (idx === -1) return null;
    const p = tipo === "time" ? CORES_TIME : tipo === "odd" ? CORES_ODD : CORES_PLACAR;
    return { bg: p[idx % p.length] };
  }
  _hash(dados) {
    if (!dados?.length) return "vazio";
    const k = d => d?.id || d?.ft || JSON.stringify(d).length;
    return `${dados.length}_${k(dados[0])}_${k(dados[dados.length-1])}`;
  }
  dadosMudaram(dados, odds, proximos) {
    const hD = this._hash(dados), hO = this._hash(odds), hP = this._hash(proximos);
    if (hD===this._hashDados && hO===this._hashOdds && hP===this._hashProximos) return false;
    this._hashDados=hD; this._hashOdds=hO; this._hashProximos=hP; return true;
  }
  forcarRerender() { this._hashDados=null; this._hashOdds=null; this._hashProximos=null; }
}

const estados = {};
Object.keys(LIGAS_CONFIG).forEach(k => { estados[k] = new EstadoLiga(k); estados[k].carregar(); });

// ═══════════════════════════════════════════════════════════════════════════
// ESTILOS GLOBAIS
// ═══════════════════════════════════════════════════════════════════════════
(function injectStyles() {
  if (document.getElementById("ml-styles")) return;
  const s = document.createElement("style");
  s.id = "ml-styles";
  s.textContent = `
    .time-nome-selecionado {
      background-color:var(--sel-color,#A855F7)!important;
      color:#000!important;border-radius:3px;padding:0 2px;font-weight:bold;
    }
    .placar-score-selecionado {
      background-color:var(--sel-color,#A855F7)!important;
      color:#000!important;border-radius:3px;padding:0 3px;font-weight:bold;
    }
    .odd-selecionada {
      border:3px solid var(--sel-color,#A855F7)!important;
      color:var(--sel-color,#A855F7)!important;
    }
    .placar-futuro-odd { font-size:0.7em;opacity:0.85;margin-top:2px;color:#f0c040;font-weight:bold; }
    .odd-tooltip { color:#f0c040;font-weight:bold;margin-top:3px;display:block; }

    /* Painel por liga */
    .painel-liga {
      display:flex;align-items:flex-start;justify-content:space-between;
      gap:12px;margin-bottom:4px;flex-wrap:wrap;
    }
    .indicator-liga { display:flex;flex-wrap:wrap;gap:6px;flex:1;min-width:0; }
    .indicator-liga:empty { display:none; }
    .sel-tag {
      display:inline-flex;align-items:center;gap:4px;padding:2px 8px;
      border-radius:12px;font-size:0.75em;font-weight:bold;color:#fff;
      border:2px solid rgba(255,255,255,0.25);white-space:nowrap;
    }
    .sel-tag .sel-x { cursor:pointer;opacity:0.8; }
    .sel-tag .sel-x:hover { opacity:1; }

    /* Stats */
    .stats-liga {
      display:flex;flex-direction:row;flex-wrap:wrap;
      gap:4px;flex-shrink:0;justify-content:flex-end;
    }
    .stat-row {
      display:flex;align-items:center;gap:5px;
      background:rgba(255,255,255,0.06);border-radius:8px;
      padding:3px 10px;font-size:0.76em;white-space:nowrap;
    }
    .stat-dot   { width:9px;height:9px;border-radius:50%;flex-shrink:0; }
    .stat-lbl   { font-weight:bold;color:#fff;max-width:140px;overflow:hidden;text-overflow:ellipsis; }
    .stat-sep   { color:rgba(255,255,255,0.25);margin:0 1px; }
    .stat-total { color:#ccc;font-weight:bold; }
    .stat-count-green { color:#4cff55;font-weight:bold; }
    .stat-count-red   { color:#ff5555;font-weight:bold; }
    .stat-pct   { margin-left:3px;padding:1px 7px;border-radius:10px;font-weight:bold;color:#fff; }
    .stat-pct-verde { background:#018b06; }
    .stat-pct-branca { background:#555; }

    /* Linhas selecionadas */
    .selected-rows-liga { margin-bottom:8px;width:100%; }

    /* Colunas */
    .minute-header { cursor:pointer;user-select:none; }
    .minute-header:hover { filter:brightness(1.3); }
    .tabela-liga.tem-col-sel td:not(.col-sel) { filter:brightness(0.45); }
    .tabela-liga.tem-col-sel th.minute-header:not(.col-sel) { filter:brightness(0.45); }
    .tabela-liga.tem-col-sel td.col-sel,
    .tabela-liga.tem-col-sel th.col-sel { filter:none; }
    .tabela-liga.tem-col-sel th.col-sel { background:rgba(255,255,255,0.15)!important; }
    .tabela-liga.tem-col-sel td:first-child,
    .tabela-liga.tem-col-sel td:nth-child(2),
    .tabela-liga.tem-col-sel td:nth-last-child(1),
    .tabela-liga.tem-col-sel td:nth-last-child(2),
    .tabela-liga.tem-col-sel td:nth-last-child(3) { filter:none; }
    td.quadrant-border, th.quadrant-border { border-left:2px solid rgba(255,255,255,0.35)!important; }

    /* Stats colunas */
    .coluna-stats-liga {
      display:flex;flex-wrap:wrap;gap:5px;padding:4px 8px;margin-bottom:4px;
    }
    .coluna-stats-liga:empty { display:none; }
    .col-stat-tag {
      display:inline-flex;align-items:center;gap:4px;
      background:rgba(255,255,255,0.08);border-radius:8px;
      padding:3px 10px;font-size:0.76em;white-space:nowrap;color:#fff;
    }
    .col-min { font-weight:bold;color:#ccc; }
    .col-g   { color:#4cff55;font-weight:bold; }
    .col-r   { color:#ff5555;font-weight:bold; }
    .col-pct { padding:1px 6px;border-radius:8px;font-weight:bold;color:#fff;margin-left:2px; }
    .col-stat-verde  { background:#018b06; }
    .col-stat-branca { background:#555; }
    .col-remove { cursor:pointer;opacity:0.6;margin-left:2px; }
    .col-remove:hover { opacity:1; }

    /* Toast */
    #ml-toast {
      position:fixed;bottom:20px;left:50%;transform:translateX(-50%);
      z-index:9999;pointer-events:none;display:flex;flex-direction:column;align-items:center;gap:6px;
    }
    .ml-t {
      background:#333;color:#fff;padding:8px 18px;border-radius:20px;font-size:0.82em;opacity:0;
      animation:tIn .25s ease forwards, tOut .3s ease 1.8s forwards;
    }
    @keyframes tIn  { from{opacity:0;transform:translateY(10px)} to{opacity:1;transform:translateY(0)} }
    @keyframes tOut { from{opacity:1} to{opacity:0} }

    .porcentagem-verde  { color:#00e676!important;font-weight:bold; }
    .porcentagem-branca { color:#ffffff!important; }

    /* Box por liga */
    .liga-box {
      background: rgba(255,255,255,0.04);
      border: 1px solid rgba(255,255,255,0.10);
      border-radius: 10px;
      padding: 14px 14px 10px;
      margin-bottom: 24px;
    }
    .liga-box h4 { margin-top: 0; }
  `;
  document.head.appendChild(s);
  const tc = document.createElement("div"); tc.id="ml-toast"; document.body.appendChild(tc);
})();

function toast(msg) {
  const c = document.getElementById("ml-toast"); if(!c) return;
  const t = document.createElement("div"); t.className="ml-t"; t.textContent=msg;
  c.appendChild(t); setTimeout(()=>t.remove(), 2300);
}

// ═══════════════════════════════════════════════════════════════════════════
// HELPERS
// ═══════════════════════════════════════════════════════════════════════════
function normalizeStr(str) {
  if (!str) return "";
  return str.trim().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");
}

function getDateStr(data) {
  if (!data) return "";
  if (/^\d{4}-\d{2}-\d{2}$/.test(data)) return data;
  if (data.includes("T")) return new Date(data).toISOString().split("T")[0];
  if (data.includes("/")) { const [d,m,y]=data.split("/"); return `${y}-${m.padStart(2,"0")}-${d.padStart(2,"0")}`; }
  return data;
}

function formatDateDDMMYYYY(data) {
  if (data.includes("T")) {
    const d = new Date(data);
    return `${d.getUTCDate().toString().padStart(2,"0")}/${(d.getUTCMonth()+1).toString().padStart(2,"0")}/${d.getUTCFullYear()}`;
  }
  if (data.includes("-")) { const [y,m,d]=data.split("-"); return `${d}/${m}/${y}`; }
  return data;
}

function normalizarMinuto(minuto, minutosFixos) {
  return minutosFixos.reduce((p,c) => Math.abs(c-minuto) < Math.abs(p-minuto) ? c : p);
}

function normalizarHorario(hora, minuto, minutosFixos) {
  const m = normalizarMinuto(minuto, minutosFixos);
  return `${hora.toString().padStart(2,"0")}:${m.toString().padStart(2,"0")}`;
}

function normalizarHorarioStr(horStr, minutosFixos) {
  if (!horStr) return horStr;
  const [h,m] = horStr.split(":").map(Number);
  return normalizarHorario(h, m, minutosFixos);
}

function abbreviateTeamName(name) {
  if (!name) return "";
  const words = name.trim().split(" ");
  if (words.length > 1) return words.map(w=>w.charAt(0).toUpperCase()).join("")+words[words.length-1].slice(0,3).toLowerCase();
  return name.length > 5 ? name.slice(0,5).toUpperCase() : name.toUpperCase();
}

function extrairPlacarFromEl(placarEl) {
  const textoEl = placarEl.querySelector(".placar-texto");
  if (!textoEl) return placarEl.textContent.trim();
  return Array.from(textoEl.querySelectorAll("span"))
    .filter(s=>!s.classList.contains("time-casa")&&!s.classList.contains("time-fora"))
    .map(s=>s.textContent.trim()).filter(t=>t.length>0).join(" ").trim();
}

function calcAcerto(rA, rB, mercado) {
  const tg = rA+rB;
  if (mercado==="ambasMarcam")    return rA>0&&rB>0;
  if (mercado==="ambasNaoMarcam") return rA===0||rB===0;
  if (mercado==="casaVence")      return rA>rB;
  if (mercado==="foraVence")      return rB>rA;
  if (mercado==="empate")         return rA===rB;
  if (mercado==="over1.5")        return tg>1.5;
  if (mercado==="under1.5")       return tg<=1.5;
  if (mercado==="over2.5")        return tg>2.5;
  if (mercado==="under2.5")       return tg<=2.5;
  if (mercado==="over3.5")        return tg>3.5;
  if (mercado==="under3.5")       return tg<=3.5;
  if (mercado==="over5")          return tg>=5;
  if (mercado==="exato0")         return tg===0;
  if (mercado==="exato1")         return tg===1;
  if (mercado==="exato2")         return tg===2;
  if (mercado==="exato3")         return tg===3;
  if (mercado==="exato4")         return tg===4;
  return false;
}

// ═══════════════════════════════════════════════════════════════════════════
// INDEX DE ODDS
// ═══════════════════════════════════════════════════════════════════════════
function indexarOdds(oddsData, minutosFixos) {
  const map = new Map();
  oddsData.forEach(odd => {
    const casa      = normalizeStr(odd.time_casa);
    const visitante = normalizeStr(odd.time_visitante);
    const horNorm   = normalizarHorarioStr(odd.horario, minutosFixos);
    const set = k => { if (!map.has(k)) map.set(k, odd); };
    set(`${odd.data_captura}|${horNorm}|${casa}|${visitante}`);
    set(`${horNorm}|${casa}|${visitante}`);
    set(`${horNorm}|${casa}`);
    set(`${horNorm}|${visitante}`);
  });
  return map;
}

function findOddsNoIndex(oddsIndex, dado, minutosFixos) {
  const tA  = normalizeStr(dado.time_a);
  const tB  = normalizeStr(dado.time_b);
  const dt  = formatDateDDMMYYYY(dado.data);
  const hor = normalizarHorario(dado.hora, dado.minuto, minutosFixos);
  return oddsIndex.get(`${dt}|${hor}|${tA}|${tB}`)
      || oddsIndex.get(`${hor}|${tA}|${tB}`)
      || oddsIndex.get(`${hor}|${tA}`)
      || oddsIndex.get(`${hor}|${tB}`)
      || null;
}

function findOddsProximo(oddsIndex, jogo, minutosFixos) {
  const tA  = normalizeStr(jogo.team_home);
  const tB  = normalizeStr(jogo.team_visit);
  const hor = normalizarHorarioStr(jogo.time, minutosFixos);
  return oddsIndex.get(`${hor}|${tA}|${tB}`)
      || oddsIndex.get(`${hor}|${tA}`)
      || oddsIndex.get(`${hor}|${tB}`)
      || null;
}

// ═══════════════════════════════════════════════════════════════════════════
// GARANTIR PAINÉIS NO DOM
// ═══════════════════════════════════════════════════════════════════════════
function ensurePaineis(key) {
  const tabela = document.getElementById(LIGAS_CONFIG[key].tabelaId); if(!tabela) return;

  if (!document.getElementById(`painel-${key}`)) {
    const p   = document.createElement("div"); p.id=`painel-${key}`; p.className="painel-liga";
    const ind = document.createElement("div"); ind.id=`indicator-${key}`; ind.className="indicator-liga";
    const st  = document.createElement("div"); st.id=`stats-${key}`; st.className="stats-liga";
    p.appendChild(ind); p.appendChild(st);
    tabela.parentNode.insertBefore(p, tabela);
  }
  if (!document.getElementById(`colstats-${key}`)) {
    const el = document.createElement("div"); el.id=`colstats-${key}`; el.className="coluna-stats-liga";
    document.getElementById(`painel-${key}`).insertAdjacentElement("afterend", el);
  }
  if (!document.getElementById(`selrows-${key}`)) {
    const el = document.createElement("table");
    el.id=`selrows-${key}`; el.className="tabela-liga selected-rows-liga";
    el.style.display="none";
    document.getElementById(`colstats-${key}`).insertAdjacentElement("afterend", el);
  }
}

// ═══════════════════════════════════════════════════════════════════════════
// INDICATOR
// ═══════════════════════════════════════════════════════════════════════════
function atualizarIndicador(key) {
  const estado = estados[key];
  const el = document.getElementById(`indicator-${key}`); if(!el) return;
  el.innerHTML = "";

  const grupos = [
    {lista:estado.placarSelecionados, chave:"placarSelecionados", prefixo:"Placar", paleta:CORES_PLACAR},
    {lista:estado.timesSelecionados,  chave:"timesSelecionados",  prefixo:"Time",   paleta:CORES_TIME},
    {lista:estado.oddsSelecionadas,   chave:"oddsSelecionadas",   prefixo:"Odd",    paleta:CORES_ODD},
  ];
  grupos.forEach(({lista,chave,prefixo,paleta}) => {
    lista.forEach((valor,idx) => {
      const tag = document.createElement("span"); tag.className="sel-tag";
      tag.style.background = paleta[idx%paleta.length];
      tag.innerHTML = `${prefixo}: ${valor} <span class="sel-x">✕</span>`;
      tag.querySelector(".sel-x").addEventListener("click", () => {
        estado.toggleSelecao(chave, valor);
        atualizarIndicador(key);
        aplicarHighlights(key);
      });
      el.appendChild(tag);
    });
  });
}

// ═══════════════════════════════════════════════════════════════════════════
// STATS
// ═══════════════════════════════════════════════════════════════════════════
function renderStats(key, statsMap, mercado) {
  const el = document.getElementById(`stats-${key}`); if(!el) return;
  el.innerHTML = "";
  const jph = LIGAS_CONFIG[key].jogosPorHora;
  const temItems = statsMap && [...statsMap.values()].some(v=>(v.green+v.red)>0);
  el.style.display = temItems ? "flex" : "none";
  if(!temItems) return;

  statsMap.forEach(({green,red,cor,label,tipo},valor) => {
    const total=green+red; if(total===0) return;
    const row = document.createElement("div"); row.className="stat-row";
    const dot = document.createElement("span"); dot.className="stat-dot"; dot.style.background=cor;
    const lbl = document.createElement("span"); lbl.className="stat-lbl"; lbl.title=valor;
    lbl.textContent = label ? `${label}: ${valor}` : valor;
    const sep = document.createElement("span"); sep.className="stat-sep"; sep.textContent="·";

    if (tipo==="placar") {
      const tot = document.createElement("span"); tot.className="stat-total"; tot.textContent=`${total}×`;
      const inf = document.createElement("span"); inf.style.cssText="color:#aaa;font-size:0.85em"; inf.textContent="ocorrências";
      row.append(dot,lbl,sep,tot,inf);
    } else {
      const pct = Math.round((green/total)*100);
      const thresh = getThreshold(mercado,jph);
      const tot = document.createElement("span"); tot.className="stat-total"; tot.textContent=`${total}×`;
      const s1  = document.createElement("span"); s1.className="stat-sep"; s1.textContent="/";
      const gsp = document.createElement("span"); gsp.className="stat-count-green"; gsp.textContent=`${green}✔`;
      const s2  = document.createElement("span"); s2.className="stat-sep"; s2.textContent="/";
      const rsp = document.createElement("span"); rsp.className="stat-count-red"; rsp.textContent=`${red}✘`;
      const psp = document.createElement("span"); psp.className=`stat-pct ${pct>=thresh?"stat-pct-verde":"stat-pct-branca"}`; psp.textContent=`${pct}%`;
      row.append(dot,lbl,sep,tot,s1,gsp,s2,rsp,psp);
    }
    el.appendChild(row);
  });
}

function computeStatsFromDOM(key) {
  const estado = estados[key];
  const tabela = document.getElementById(LIGAS_CONFIG[key].tabelaId); if(!tabela) return;
  const mercado     = document.querySelector(`#seletorResultado-${key}`)?.value || "ambasMarcam";
  const mostrarOdds = document.querySelector(`#mostrarOdds-${key}`)?.value === "sim";

  const mP=new Map(), mT=new Map(), mO=new Map();
  estado.placarSelecionados.forEach((v,i)=>mP.set(v,{green:0,red:0,cor:CORES_PLACAR[i%CORES_PLACAR.length],label:"Placar",tipo:"placar"}));
  estado.timesSelecionados.forEach((v,i) =>mT.set(v,{green:0,red:0,cor:CORES_TIME[i%CORES_TIME.length],label:"Time",tipo:"time"}));
  estado.oddsSelecionadas.forEach((v,i)  =>mO.set(v,{green:0,red:0,cor:CORES_ODD[i%CORES_ODD.length],label:"Odd",tipo:"odd"}));

  tabela.querySelectorAll("tbody td").forEach(cel => {
    const pl = cel.querySelector(".placar:not(.placar-futuro)"); if(!pl) return;
    const bg = cel.style.backgroundColor;
    const isG=bg==="rgb(1, 139, 6)", isR=bg==="rgb(190, 14, 2)"; if(!isG&&!isR) return;
    const texto = extrairPlacarFromEl(pl);
    const timeA = pl.getAttribute("data-time-a");
    const timeB = pl.getAttribute("data-time-b");

    for(const val of estado.placarSelecionados){ if(texto.includes(val)){ const s=mP.get(val);if(s){isG?s.green++:s.red++;} break; } }
    const names=[timeA,timeB,...Array.from(pl.querySelectorAll("[data-full-time]")).map(s=>s.getAttribute("data-full-time"))].filter(Boolean);
    for(const val of estado.timesSelecionados){ if(names.includes(val)){ const s=mT.get(val);if(s){isG?s.green++:s.red++;} break; } }
    if(mostrarOdds){ const ot=pl.querySelector(".odds")?.textContent.trim(); if(ot) for(const val of estado.oddsSelecionadas){ if(ot===val){ const s=mO.get(val);if(s){isG?s.green++:s.red++;} break; } } }
  });

  const unif=new Map();
  mP.forEach((v,k)=>unif.set(k,v)); mT.forEach((v,k)=>unif.set(k,v)); mO.forEach((v,k)=>unif.set(k,v));
  renderStats(key,unif,mercado);
}

// ═══════════════════════════════════════════════════════════════════════════
// HIGHLIGHTS
// ═══════════════════════════════════════════════════════════════════════════
function aplicarHighlights(key) {
  const estado = estados[key];
  const tabela = document.getElementById(LIGAS_CONFIG[key].tabelaId); if(!tabela) return;
  const mostrarOdds = document.querySelector(`#mostrarOdds-${key}`)?.value==="sim";

  tabela.querySelectorAll(".placar").forEach(placar => {
    const texto = extrairPlacarFromEl(placar);
    // Reset
    placar.querySelectorAll(".placar-score-selecionado").forEach(s=>{s.classList.remove("placar-score-selecionado");s.style.removeProperty("--sel-color");});
    placar.querySelectorAll(".time-casa,.time-fora").forEach(s=>{s.classList.remove("time-nome-selecionado");s.style.removeProperty("--sel-color");});
    const oddEl=placar.querySelector(".odds");
    if(oddEl){oddEl.classList.remove("odd-selecionada");oddEl.style.removeProperty("--sel-color");}

    for(const val of estado.placarSelecionados){
      if(texto.includes(val)){
        const cor=estado.getCorSelecao(estado.placarSelecionados,val,"placar");
        placar.querySelector(".placar-texto")?.querySelectorAll("span").forEach(s=>{
          if(!s.classList.contains("time-casa")&&!s.classList.contains("time-fora")){s.style.setProperty("--sel-color",cor.bg);s.classList.add("placar-score-selecionado");}
        }); break;
      }
    }
    [".time-casa",".time-fora"].forEach(sel=>{
      const span=placar.querySelector(sel); if(!span) return;
      const ft=span.getAttribute("data-full-time");
      for(const val of estado.timesSelecionados){ if(ft===val){ const cor=estado.getCorSelecao(estado.timesSelecionados,val,"time"); span.style.setProperty("--sel-color",cor.bg); span.classList.add("time-nome-selecionado"); break; } }
    });
    if(mostrarOdds&&oddEl){ for(const val of estado.oddsSelecionadas){ if(oddEl.textContent.trim()===val){ const cor=estado.getCorSelecao(estado.oddsSelecionadas,val,"odd"); oddEl.style.setProperty("--sel-color",cor.bg); oddEl.classList.add("odd-selecionada"); break; } } }
  });

  atualizarIndicador(key);
  computeStatsFromDOM(key);
}

// ═══════════════════════════════════════════════════════════════════════════
// COLUNAS
// ═══════════════════════════════════════════════════════════════════════════
function toggleColuna(key, min) {
  const lista=estados[key].colunasSelecionadas;
  const idx=lista.indexOf(min);
  if(idx!==-1) lista.splice(idx,1); else lista.push(min);
  estados[key].salvar(); aplicarColunas(key); atualizarColunaStats(key);
}

function aplicarColunas(key) {
  const config=LIGAS_CONFIG[key], estado=estados[key];
  const tabela=document.getElementById(config.tabelaId); if(!tabela) return;
  const mF=config.minutosFixos, qS=config.quadrantSize;
  tabela.classList.toggle("tem-col-sel", estado.colunasSelecionadas.length>0);

  tabela.querySelectorAll(".minute-header").forEach((th,i)=>{
    const m=parseInt(th.textContent.trim());
    th.classList.toggle("col-sel",  estado.colunasSelecionadas.includes(m));
    th.classList.toggle("quadrant-border", i>0&&i%qS===0);
  });
  tabela.querySelectorAll("tbody tr").forEach(row=>{
    Array.from(row.cells).forEach((cell,i)=>{
      if(i<2||i>=2+mF.length) return;
      const ci=i-2, m=mF[ci];
      cell.classList.toggle("col-sel",  estado.colunasSelecionadas.includes(m));
      cell.classList.toggle("quadrant-border", ci>0&&ci%qS===0);
    });
  });
}

function atualizarColunaStats(key) {
  const config=LIGAS_CONFIG[key], estado=estados[key];
  const tabela=document.getElementById(config.tabelaId);
  const el=document.getElementById(`colstats-${key}`); if(!el) return;
  el.innerHTML="";
  if(!estado.colunasSelecionadas.length||!tabela) return;

  let gT=0, rT=0;
  const cols=[...estado.colunasSelecionadas].sort((a,b)=>config.minutosFixos.indexOf(a)-config.minutosFixos.indexOf(b));
  cols.forEach(min=>{
    const idx=config.minutosFixos.indexOf(min); if(idx===-1) return;
    tabela.querySelectorAll("tbody tr").forEach(row=>{
      const cell=row.cells[2+idx]; if(!cell) return;
      const bg=cell.style.backgroundColor;
      if(bg==="rgb(1, 139, 6)") gT++;
      else if(bg==="rgb(190, 14, 2)") rT++;
    });
  });

  const total=gT+rT; if(total===0) return;
  const pct=Math.round((gT/total)*100);
  const mercado=document.querySelector(`#seletorResultado-${key}`)?.value||"ambasMarcam";
  const thresh=getThreshold(mercado,config.jogosPorHora);

  const tag=document.createElement("div"); tag.className="col-stat-tag";
  tag.innerHTML=`<span class="col-min">min ${cols.join(", ")}</span> <span style="color:#aaa;font-size:0.85em">${total}×</span> <span class="col-g">${gT}✔</span> <span class="col-r">${rT}✘</span> <span class="col-pct ${pct>=thresh?"col-stat-verde":"col-stat-branca"}">${pct}%</span> <span class="col-remove">✕</span>`;
  tag.querySelector(".col-remove").addEventListener("click",()=>{ estado.colunasSelecionadas.length=0; estado.salvar(); aplicarColunas(key); atualizarColunaStats(key); });
  el.appendChild(tag);
}

// ═══════════════════════════════════════════════════════════════════════════
// LINHAS SELECIONADAS
// ═══════════════════════════════════════════════════════════════════════════
function updateSelectedRows(key) {
  const config=LIGAS_CONFIG[key], estado=estados[key];
  const mainTable=document.getElementById(config.tabelaId);
  let sel=document.getElementById(`selrows-${key}`);

  if(sel&&!sel.querySelector("thead")&&mainTable) {
    const thead=mainTable.querySelector("thead")?.cloneNode(true);
    if(thead) sel.insertBefore(thead,sel.querySelector("tbody")||null);
  }

  if(!sel) return;
  if(estado.selectedChaves.length===0){sel.style.display="none"; return;}
  sel.style.display="";

  let tbody=sel.querySelector("tbody");
  if(!tbody){tbody=document.createElement("tbody");sel.appendChild(tbody);}
  tbody.innerHTML="";

  const chavesOrdenadas=[...estado.selectedChaves].sort((a,b)=>{
    const ts=c=>{const p=c.split("-");return new Date(`${p.slice(0,-1).join("-")}T${parseInt(p[p.length-1]).toString().padStart(2,"0")}:00:00`).getTime();};
    return ts(b)-ts(a);
  });
  chavesOrdenadas.forEach(chave=>{
    const row=mainTable?.querySelector(`tbody tr[data-chave="${chave}"]`); if(!row) return;
    const clone=row.cloneNode(true);
    const cb=clone.querySelector("input[type=checkbox]"); if(cb) cb.disabled=true;
    tbody.appendChild(clone);
  });
}

// ═══════════════════════════════════════════════════════════════════════════
// CRIAR TABELA
// ═══════════════════════════════════════════════════════════════════════════
function criarTabela(dados, oddsData, proximosJogos, key) {
  const config=LIGAS_CONFIG[key], estado=estados[key];
  const tabela=document.getElementById(config.tabelaId); if(!tabela) return;

  const mF=config.minutosFixos, qS=config.quadrantSize, jph=config.jogosPorHora;
  const sel=id=>document.querySelector(`#${id}-${key}`)?.value;
  const horasSel   = parseInt(sel("seletorHoras")||"12");
  const mercado    = sel("seletorResultado")||"ambasMarcam";
  const tipoPlacar = sel("seletorTipoPlacar")||"ft";
  const mostTimes  = sel("mostrarTimes")==="sim";
  const mostHT     = sel("mostrarHT")==="sim";
  const mostOdds   = sel("mostrarOdds")==="sim";
  const thresh     = getThreshold(mercado, jph);

  ensurePaineis(key);

  // ── thead ──────────────────────────────────────────────────────────────
  const thead=tabela.querySelector("thead");
  thead.innerHTML="";

  // Linha % por coluna
  const trPercentual = Object.assign(document.createElement("tr"), {id:`linhaPercentual-${key}`});
  trPercentual.innerHTML = "<th></th><th>📊</th>";

  // Linha gols por coluna
  const trTotalGols = Object.assign(document.createElement("tr"), {id:`linhaTotalGols-${key}`});
  trTotalGols.innerHTML = "<th></th><th>⚽</th>";

  // Linha acertos por coluna
  const trAcertosMercado = Object.assign(document.createElement("tr"), {id:`linhaAcertosMercado-${key}`});
  trAcertosMercado.innerHTML = "<th></th><th>✅</th>";

  thead.append(trPercentual, trTotalGols, trAcertosMercado);

  // Linha de minutos
  const trMin=document.createElement("tr");
  const thSel=document.createElement("th"); thSel.className="selector-header"; thSel.style.width="30px";
  trMin.appendChild(thSel);
  trMin.appendChild(Object.assign(document.createElement("th"),{textContent:"🕐"}));
  mF.forEach((m,i)=>{
    const th=document.createElement("th"); th.className="minute-header"; th.textContent=m;
    if(i>0&&i%qS===0) th.classList.add("quadrant-border");
    if(estado.colunasSelecionadas.includes(m)) th.classList.add("col-sel");
    th.addEventListener("click",()=>toggleColuna(key,m));
    trMin.appendChild(th);
  });
  ["⚽","✅","📈"].forEach(t=>trMin.appendChild(Object.assign(document.createElement("th"),{textContent:t})));
  thead.appendChild(trMin);

  // ── tbody ──────────────────────────────────────────────────────────────
  const tbody=tabela.querySelector("tbody");
  tbody.innerHTML="";

  // Ordena dados por timestamp desc
  dados.sort((a,b)=>{
    const dA=new Date(`${getDateStr(a.data)}T${a.hora.toString().padStart(2,"0")}:${a.minuto.toString().padStart(2,"0")}:00`).getTime();
    const dB=new Date(`${getDateStr(b.data)}T${b.hora.toString().padStart(2,"0")}:${b.minuto.toString().padStart(2,"0")}:00`).getTime();
    return dB-dA;
  });

  // Próximos jogos: normaliza minuto
  const proximosComHoras = proximosJogos.map(jogo=>{
    const parts=(jogo.time||"00:00").split(":");
    const h=parseInt(parts[0])||0, m=parseInt(parts[1])||0;
    const minNorm=normalizarMinuto(m, mF);
    const dataStr=jogo.captured_date ? jogo.captured_date.split("/").reverse().join("-") : new Date(jogo.start_time).toISOString().split("T")[0];
    return {...jogo, hora:h, minuto:minNorm, dataStr};
  }).sort((a,b)=>new Date(b.start_time)-new Date(a.start_time));

  // Coleta horas únicas (dados passados + próximos)
  const horasSet=new Set();
  proximosComHoras.forEach(j=>{
    const ts=new Date(`${j.dataStr}T${j.hora.toString().padStart(2,"0")}:00:00`).getTime();
    horasSet.add(JSON.stringify({hora:j.hora, timestamp:ts, data:j.dataStr}));
  });
  dados.forEach(dado=>{
    const ds=getDateStr(dado.data);
    const ts=new Date(`${ds}T${dado.hora.toString().padStart(2,"0")}:00:00`).getTime();
    horasSet.add(JSON.stringify({hora:dado.hora, timestamp:ts, data:ds}));
  });

  const horasUnicas=Array.from(horasSet)
    .map(s=>JSON.parse(s))
    .sort((a,b)=>b.timestamp-a.timestamp)
    .slice(0, horasSel);

  const mapeamento={};
  horasUnicas.forEach(item=>{
    const chave=`${item.data}-${item.hora}`;
    const tr=document.createElement("tr"); tr.setAttribute("data-chave",chave);

    // Checkbox
    const tdSel=document.createElement("td");
    const cb=document.createElement("input"); cb.type="checkbox"; cb.className="row-selector";
    cb.checked=estado.selectedChaves.includes(chave);
    cb.addEventListener("change",function(){
      if(this.checked){if(!estado.selectedChaves.includes(chave)) estado.selectedChaves.push(chave);}
      else{estado.selectedChaves=estado.selectedChaves.filter(c=>c!==chave);}
      estado.salvar(); updateSelectedRows(key);
    });
    tdSel.appendChild(cb); tr.appendChild(tdSel);
    tr.appendChild(Object.assign(document.createElement("td"),{textContent:item.hora.toString().padStart(2,"0")}));

    mF.forEach((m,i)=>{
      const td=document.createElement("td");
      if(i>0&&i%qS===0) td.classList.add("quadrant-border");
      if(estado.colunasSelecionadas.includes(m)) td.classList.add("col-sel");
      tr.appendChild(td);
    });
    // Gols | Acertos | %
    tr.appendChild(Object.assign(document.createElement("td"),{textContent:"0"}));
    tr.appendChild(Object.assign(document.createElement("td"),{textContent:"0"}));
    tr.appendChild(Object.assign(document.createElement("td"),{textContent:"0%"}));

    tbody.appendChild(tr); mapeamento[chave]=tr;
  });

  // ── Preenche dados ─────────────────────────────────────────────────────
  const oddsIndex=indexarOdds(oddsData||[], mF);
  const totalGolsPorColuna=Array(mF.length).fill(0);
  const totalAcertosPorColuna=Array(mF.length).fill(0);
  const processedMatches=new Set();

  // Stats seleção
  const mSP=new Map(), mST=new Map(), mSO=new Map();
  estado.placarSelecionados.forEach((v,i)=>mSP.set(v,{green:0,red:0,cor:CORES_PLACAR[i%CORES_PLACAR.length],label:"Placar",tipo:"placar"}));
  estado.timesSelecionados.forEach((v,i) =>mST.set(v,{green:0,red:0,cor:CORES_TIME[i%CORES_TIME.length],label:"Time",tipo:"time"}));
  estado.oddsSelecionadas.forEach((v,i)  =>mSO.set(v,{green:0,red:0,cor:CORES_ODD[i%CORES_ODD.length],label:"Odd",tipo:"odd"}));

  function onPlacarClick(e){
    if(e.target.classList.contains("time-casa")||e.target.classList.contains("time-fora")) return;
    estado.toggleSelecao("placarSelecionados", extrairPlacarFromEl(e.currentTarget));
    aplicarHighlights(key);
  }
  function onTimeClick(e){
    const val=e.target.getAttribute("data-full-time"); if(!val) return;
    estado.toggleSelecao("timesSelecionados",val); aplicarHighlights(key);
  }
  function onOddClick(e){
    e.stopPropagation();
    estado.toggleSelecao("oddsSelecionadas",e.currentTarget.textContent.trim()); aplicarHighlights(key);
  }

  // Dados passados
  dados.forEach(dado=>{
    const ds=getDateStr(dado.data), chave=`${ds}-${dado.hora}`, linha=mapeamento[chave];
    const minNorm=normalizarMinuto(dado.minuto, mF);
    const mk=`${dado.time_a}|${dado.time_b}|${chave}|${minNorm}`;
    if(!linha||processedMatches.has(mk)) return;
    const idx=mF.indexOf(minNorm); if(idx===-1) return;
    const cel=linha.children[2+idx]; if(cel.querySelector(".placar")) return;

    const placar=document.createElement("div"); placar.className="placar";
    placar.setAttribute("data-time-a",dado.time_a); placar.setAttribute("data-time-b",dado.time_b);

    const ft=dado.ft, ht=dado.ht;
    const primary=tipoPlacar==="ft"?ft:ht, secondary=tipoPlacar==="ft"?ht:ft;

    const pt=document.createElement("div"); pt.className="placar-texto";
    if(mostTimes){
      const tA=abbreviateTeamName(dado.time_a), tB=abbreviateTeamName(dado.time_b);
      pt.innerHTML=`<span class="time-casa" style="cursor:pointer" data-full-time="${dado.time_a}">${tA}</span><span>${primary}</span>${mostHT?`<span>(${secondary})</span>`:""}<span class="time-fora" style="cursor:pointer" data-full-time="${dado.time_b}">${tB}</span>`;
    } else {
      pt.innerHTML=`<span>${primary}</span>${mostHT?`<span>(${secondary})</span>`:""}`;
    }
    placar.appendChild(pt);

    const oddsMatch=findOddsNoIndex(oddsIndex,dado,mF);
    if(mostOdds){
      const ov=getOddValue(oddsMatch,mercado);
      const oel=document.createElement("div"); oel.className="odds"; oel.textContent=`@${ov}`;
      oel.addEventListener("click",onOddClick); placar.appendChild(oel);
    }

    placar.addEventListener("click",onPlacarClick);
    if(mostTimes){ pt.querySelector(".time-casa")?.addEventListener("click",onTimeClick); pt.querySelector(".time-fora")?.addEventListener("click",onTimeClick); }

    const oddTip=getOddValue(oddsMatch,mercado);
    const tooltip=document.createElement("span"); tooltip.className="tooltip";
    tooltip.innerHTML=`<span class="times">${dado.time_a} vs ${dado.time_b}</span><span class="placares">${ft} <span class="placarHT">(${ht})</span></span>${oddTip&&oddTip!=="N/A"?`<span class="odd-tooltip">@${oddTip}</span>`:""}`;
    placar.appendChild(tooltip);
    cel.appendChild(placar); processedMatches.add(mk);

    // Highlights iniciais
    const scoreText=extrairPlacarFromEl(placar);
    for(const val of estado.placarSelecionados){ if(scoreText.includes(val)){ const cor=estado.getCorSelecao(estado.placarSelecionados,val,"placar"); pt.querySelectorAll("span").forEach(s=>{ if(!s.classList.contains("time-casa")&&!s.classList.contains("time-fora")){s.style.setProperty("--sel-color",cor.bg);s.classList.add("placar-score-selecionado");} }); break; } }
    [".time-casa",".time-fora"].forEach(sel=>{ const sp=placar.querySelector(sel); if(!sp) return; const ft=sp.getAttribute("data-full-time"); for(const val of estado.timesSelecionados){ if(ft===val){ const cor=estado.getCorSelecao(estado.timesSelecionados,val,"time"); sp.style.setProperty("--sel-color",cor.bg); sp.classList.add("time-nome-selecionado"); break; } } });
    if(mostOdds){ const oel=placar.querySelector(".odds"); if(oel){ for(const val of estado.oddsSelecionadas){ if(oel.textContent.trim()===val){ const cor=estado.getCorSelecao(estado.oddsSelecionadas,val,"odd"); oel.style.setProperty("--sel-color",cor.bg); oel.classList.add("odd-selecionada"); break; } } } }

    // Acerto
    const [rA,rB]=primary.split(" x ").map(n=>parseInt(n)||0);
    const acerto=calcAcerto(rA,rB,mercado);
    cel.style.backgroundColor=acerto?"#018b06":"#be0e02";
    if(acerto){ totalAcertosPorColuna[idx]++; linha.children[linha.children.length-2].textContent=parseInt(linha.children[linha.children.length-2].textContent)+1; }
    const tgCel=linha.children[linha.children.length-3]; tgCel.textContent=parseInt(tgCel.textContent)+(rA+rB);
    totalGolsPorColuna[idx]+=(rA+rB);

    // Acumula stats
    for(const val of estado.placarSelecionados){ if(scoreText.includes(val)){ const s=mSP.get(val);if(s){acerto?s.green++:s.red++;} break; } }
    for(const val of estado.timesSelecionados){ if([dado.time_a,dado.time_b].includes(val)){ const s=mST.get(val);if(s){acerto?s.green++:s.red++;} break; } }
    if(mostOdds){ const oel=placar.querySelector(".odds"); if(oel){ const ot=oel.textContent.trim(); for(const val of estado.oddsSelecionadas){ if(ot===val){ const s=mSO.get(val);if(s){acerto?s.green++:s.red++;} break; } } } }
  });

  // Próximos jogos NA TABELA
  proximosComHoras.forEach(jogo=>{
    const chave=`${jogo.dataStr}-${jogo.hora}`, linha=mapeamento[chave];
    const mk=`${jogo.team_home}|${jogo.team_visit}|${chave}|${jogo.minuto}`;
    if(!linha||jogo.minuto===null||processedMatches.has(mk)) return;

    const jaTemResultado=dados.some(d=>{
      const dd=getDateStr(d.data);
      return normalizeStr(d.time_a)===normalizeStr(jogo.team_home)&&
             normalizeStr(d.time_b)===normalizeStr(jogo.team_visit)&&
             dd===jogo.dataStr&&d.hora===jogo.hora&&d.minuto===jogo.minuto;
    });
    if(jaTemResultado) return;

    const idx=mF.indexOf(jogo.minuto); if(idx===-1) return;
    const cel=linha.children[2+idx]; if(cel.querySelector(".placar")) return;

    const placar=document.createElement("div"); placar.className="placar placar-futuro";
    placar.setAttribute("data-time-a",jogo.team_home); placar.setAttribute("data-time-b",jogo.team_visit);

    const tA=abbreviateTeamName(jogo.team_home), tB=abbreviateTeamName(jogo.team_visit);
    const pt=document.createElement("div"); pt.className="placar-texto";
    if(mostTimes){
      pt.innerHTML=`<span class="time-casa" style="cursor:pointer" data-full-time="${jogo.team_home}">${tA}</span><br><span class="time-fora" style="cursor:pointer" data-full-time="${jogo.team_visit}">${tB}</span>`;
    } else {
      pt.innerHTML=`${tA}<br>${tB}`;
    }
    placar.appendChild(pt);

    const oddsProx=findOddsProximo(oddsIndex,jogo,mF);
    const oddValProx=getOddValue(oddsProx,mercado);
    if(oddValProx&&oddValProx!=="N/A"){
      placar.appendChild(Object.assign(document.createElement("div"),{className:"placar-futuro-odd",textContent:`@${oddValProx}`}));
    }

    placar.addEventListener("click",onPlacarClick);
    if(mostTimes){ pt.querySelector(".time-casa")?.addEventListener("click",onTimeClick); pt.querySelector(".time-fora")?.addEventListener("click",onTimeClick); }

    const tooltip=document.createElement("span"); tooltip.className="tooltip";
    tooltip.innerHTML=`<span class="times">${jogo.team_home} vs ${jogo.team_visit}</span>${oddValProx&&oddValProx!=="N/A"?`<span class="odd-tooltip">@${oddValProx}</span>`:""}`;
    placar.appendChild(tooltip);
    cel.appendChild(placar); processedMatches.add(mk);

    // Time highlight para futuros
    [".time-casa",".time-fora"].forEach(sel=>{ const sp=placar.querySelector(sel); if(!sp) return; const ft=sp.getAttribute("data-full-time"); for(const val of estado.timesSelecionados){ if(ft===val){ const cor=estado.getCorSelecao(estado.timesSelecionados,val,"time"); sp.style.setProperty("--sel-color",cor.bg); sp.classList.add("time-nome-selecionado"); break; } } });
  });

  // ── Totais por coluna (gols e acertos nas linhas de thead) ─────────────
  totalGolsPorColuna.forEach(t=>trTotalGols.appendChild(Object.assign(document.createElement("td"),{className:"total-goals",textContent:t})));
  totalAcertosPorColuna.forEach(t=>trAcertosMercado.appendChild(Object.assign(document.createElement("td"),{className:"market-hits",textContent:t})));
  for(let i=0;i<3;i++){ trTotalGols.appendChild(document.createElement("td")); trAcertosMercado.appendChild(document.createElement("td")); }

  // ── % por linha ────────────────────────────────────────────────────────
  const todasLinhas=Array.from(tbody.querySelectorAll("tr"));
  todasLinhas.forEach(row=>{
    const total=Array.from(row.cells).slice(2,-3).filter(c=>c.querySelector(".placar")&&!c.querySelector(".placar-futuro")).length;
    const acertos=parseInt(row.children[row.children.length-2].textContent)||0;
    const pct=total>0?Math.floor((acertos/total)*100):0;
    const pctCell=row.children[row.children.length-1];
    pctCell.textContent=`${pct}%`;
    pctCell.classList.toggle("porcentagem-verde", pct>=thresh);
    pctCell.classList.toggle("porcentagem-branca", pct<thresh);
  });

  // ── % por coluna ────────────────────────────────────────────────────────
  const totMercadoCol=Array(mF.length).fill(0);
  todasLinhas.forEach(row=>{
    Array.from(row.cells).slice(2,-3).forEach((c,i)=>{ if(c.querySelector(".placar")&&!c.querySelector(".placar-futuro")) totMercadoCol[i]++; });
  });
  totMercadoCol.forEach((tot,i)=>{
    const pct=tot>0?Math.floor((totalAcertosPorColuna[i]/tot)*100):0;
    const cell=document.createElement("td"); cell.textContent=`${pct}%`;
    cell.classList.toggle("porcentagem-verde",pct>=thresh);
    cell.classList.toggle("porcentagem-branca",pct<thresh);
    if(i>0&&i%qS===0) cell.classList.add("quadrant-border");
    trPercentual.appendChild(cell);
  });
  for(let i=0;i<3;i++) trPercentual.appendChild(document.createElement("td"));



  // Finaliza
  const unif=new Map();
  mSP.forEach((v,k)=>unif.set(k,v)); mST.forEach((v,k)=>unif.set(k,v)); mSO.forEach((v,k)=>unif.set(k,v));
  aplicarHighlights(key);
  renderStats(key,unif,mercado);
  updateSelectedRows(key);
  aplicarColunas(key);
  atualizarColunaStats(key);
}

// ═══════════════════════════════════════════════════════════════════════════
// FETCH + POLLING
// ═══════════════════════════════════════════════════════════════════════════
const _busy={};
async function buscarLiga(key) {
  if(_busy[key]) return;
  _busy[key]=true;
  const config=LIGAS_CONFIG[key], estado=estados[key];
  try {
    let dados=[], oddsData=[], proximos=[];
    try{ const r=await fetch(config.rotaResultados); if(r.ok) dados=await r.json(); }catch(e){ console.error(`[${key}] resultados`,e); }
    try{ const r=await fetch(config.rotaOdds);       if(r.ok) oddsData=await r.json(); }catch(e){ console.error(`[${key}] odds`,e); }
    try{ const r=await fetch(config.rotaProximos);   if(r.ok){ const j=await r.json(); proximos=j.sort((a,b)=>new Date(a.start_time)-new Date(b.start_time)).slice(0,6); } }catch(e){ console.error(`[${key}] proximos`,e); }

    if(!estado.dadosMudaram(dados,oddsData,proximos)){
      computeStatsFromDOM(key); updateSelectedRows(key); aplicarColunas(key); atualizarColunaStats(key);
      return;
    }
    criarTabela(dados,oddsData,proximos,key);
  } finally { _busy[key]=false; }
}

// ═══════════════════════════════════════════════════════════════════════════
// INICIALIZAÇÃO
// ═══════════════════════════════════════════════════════════════════════════
Object.keys(LIGAS_CONFIG).forEach(key => {
  buscarLiga(key);
  setInterval(()=>buscarLiga(key), 5000);

  const forcar=()=>{ estados[key].forcarRerender(); buscarLiga(key); };

  document.querySelector(`#seletorHoras-${key}`)?.addEventListener("change",forcar);
  document.querySelector(`#seletorResultado-${key}`)?.addEventListener("change",forcar);
  document.querySelector(`#seletorTipoPlacar-${key}`)?.addEventListener("change",forcar);
  document.querySelector(`#mostrarHT-${key}`)?.addEventListener("change",forcar);

  document.querySelector(`#mostrarTimes-${key}`)?.addEventListener("change",()=>{
    if(document.querySelector(`#mostrarTimes-${key}`)?.value!=="sim"){ estados[key].limparTipo("timesSelecionados"); toast("Seleções de time limpas"); }
    forcar();
  });
  document.querySelector(`#mostrarOdds-${key}`)?.addEventListener("change",()=>{
    if(document.querySelector(`#mostrarOdds-${key}`)?.value!=="sim"){ estados[key].limparTipo("oddsSelecionadas"); toast("Seleções de odd limpas"); }
    forcar();
  });
});
  </script>

  <script>
      // Bloqueia o menu de contexto (clique direito)
document.addEventListener("contextmenu", function(e) {
    e.preventDefault();
});

// Bloqueia atalhos de teclado comuns para ferramentas de desenvolvimento
document.addEventListener("keydown", function(e) {
    // F12
    if (e.key === "F12") {
        e.preventDefault();
    }
    
    // Ctrl + Shift + I
    if (e.ctrlKey && e.shiftKey && e.key === "I") {
        e.preventDefault();
    }
    
    // Ctrl + U (ver código fonte)
    if (e.ctrlKey && e.key === "u") {
        e.preventDefault();
    }
    
    // Ctrl + Shift + J (console)
    if (e.ctrlKey && e.shiftKey && e.key === "J") {
        e.preventDefault();
    }
    
    // Ctrl + Shift + C (inspeção de elementos)
    if (e.ctrlKey && e.shiftKey && e.key === "C") {
        e.preventDefault();
    }
    
    // Ctrl + S (salvar página)
    if (e.ctrlKey && e.key === "s") {
        e.preventDefault();
    }
    
    // Ctrl + P (imprimir)
    if (e.ctrlKey && e.key === "p") {
        e.preventDefault();
    }
});

// Detecta abertura de ferramentas de desenvolvimento
const devtools = { open: false };
const element = new Image();
Object.defineProperty(element, 'id', {
    get: function () {
        devtools.open = true;
    }
});

// Adiciona detecção alternativa de devtools
(function() {
    const threshold = 160;
    const checkDevTools = function() {
        if ((window.outerWidth - window.innerWidth) > threshold || 
            (window.outerHeight - window.innerHeight) > threshold) {
            devtools.open = true;
        }
    };
    
    window.addEventListener('resize', checkDevTools);
    setInterval(checkDevTools, 500);
})();

// Monitoramento contínuo
console.log('%c', element);
setInterval(function() {
    if (devtools.open) {
        document.body.innerHTML = '<h1>Acesso não autorizado detectado</h1>';
        // Ou redirecionar:
        // window.location.href = 'about:blank';
        devtools.open = false;
    }
}, 1000);

// Impede seleção de texto
document.addEventListener('selectstart', function(e) {
    e.preventDefault();
});

// Impede arrastar e soltar
document.addEventListener('dragstart', function(e) {
    e.preventDefault();
});

// Ofusca console
console.log = function() {};
console.debug = function() {};
console.info = function() {};
  </script>

  <script>
  fetch('header.html')
    .then(response => response.text())
    .then(data => {
      document.getElementById('header').innerHTML = data;
    });
</script>
<script src="redirecionar.js"></script>
  </body>
</html>
