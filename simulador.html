<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="img/favicon.ico" type="image/x-icon" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-4WT805FFHQ"
    ></script>
    <title>BetStat</title>
    <!-- Meta tags SEO principais -->
    <meta
      name="description"
      content="Transforme suas apostas com BetStat - a única plataforma especializada em futebol virtual Betano. Análises precisas, estatísticas confiáveis e resultados comprovados para investimentos inteligentes."
    />
    <meta
      name="keywords"
      content="BetStat, apostas esportivas, futebol virtual, Betano, estatísticas apostas, análise apostas, investimentos esportivos"
    />

    <!-- Open Graph meta tags para redes sociais -->
    <meta
      property="og:title"
      content="BetStat | Plataforma de Análise para Apostas Esportivas"
    />
    <meta
      property="og:description"
      content="Transforme suas apostas com análises precisas e estatísticas confiáveis. A única plataforma especializada em futebol virtual Betano."
    />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://www.betstat.site/payment.html" />
    <meta property="og:site_name" content="BetStat" />

    <!-- Meta tags adicionais -->
    <meta name="robots" content="index, follow" />
    <meta name="author" content="BetStat" />
    <meta name="canonical" href="https://www.betstat.site/payment.html" />
    <script type="module" src="js/firebase-auth.js"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-4WT805FFHQ");
    </script>
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap"
      rel="stylesheet"
    />
  </head>

  <style>

      header {
    background: #005540;
    width: 100%;
    position: fixed;
    top: 0;
    left: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    height: 60px;
  }
  
  .header-container {
    display: flex;
    align-items: center;
    width: 100%;
    max-width: 1200px;
    padding: 0 20px;
    justify-content: space-between;
  }
  
  /* Adicionar um espaço apenas ao primeiro elemento accordion-item */
  .accordion-item:first-of-type {
    margin-top: 30px;  /* Espaço igual à altura do cabeçalho fixo */
  }
  
  
  .logo {
    height: 40px;
  }
  
  
  .selectors-container {
    display: flex;
    align-items: center;
    gap: 10px; 
  }
  
  .nav-seletor {
    display: flex;
    align-items: center;
    color: #ffffff;
    font-weight: 500;
  }

      .logout-btn {
      background-color: #1c1f26;; /* Fundo vermelho */
      color: white; /* Texto branco */
      padding: 8px 10px; /* Espaçamento interno */
      font-size: 14px; /* Tamanho da fonte */
      border-radius: 5px; /* Cantos arredondados */
      cursor: pointer; /* Cursor de botão */
      border: 1px solid #ffffff81;
    }

    .logout-btn:hover {
      background-color: #720000; /* Cor ao passar o mouse */
    }
  
  .nav-seletor select {
    padding: 0.5rem ;
    border-radius: 6px;
    background-color: #1c1f26;
    color: var(--text-color);
    border: 1px solid var(--border-color);
    cursor: pointer;
    transition: all 0.3s ease;
  }

    body { 
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background-color: #1c1f26;
      color: #ffffff;
      line-height: 1.4;
    }

    .container { 
      max-width: 2000px;
      margin: 0 auto;
      padding: 20px;
    }

    .header { 
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding: 20px;
      background: #252836;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.3);
    }

    select, input { 
      padding: 12px 16px;
      font-size: 14px;
      background: #2a2d3a;
      border: 1px solid #3a3d4a;
      color: #ffffff;
      border-radius: 6px;
      outline: none;
      transition: border-color 0.2s;
    }

    select:focus, input:focus {
      border-color: #4caf50;
    }

    .bankroll-controls {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .video-container {
      margin-bottom: 20px;
      background: #252836;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.3);
      padding: 15px;
    }

    .video {
      display: none;
      position: relative;
    }

    .video.active {
      display: block;
    }

    .video-title {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 10px;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .video-title::after {
      content: '▼';
      font-size: 12px;
      transition: transform 0.3s;
    }

    .video-title.expanded::after {
      transform: rotate(180deg);
    }

    .video iframe {
      width: 100%;
      height: 400px;
      border: none;
      border-radius: 6px;
      display: block;
    }

    .video.hidden iframe {
      display: none;
    }

    .upcoming-matches {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin-bottom: 20px;
      padding: 10px;
      background: #252836;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.3);
    }

    .upcoming-match {
      flex: 0 0 auto;
      background: #2a2d3a;
      padding: 10px 15px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 13px;
      text-align: center;
      transition: background-color 0.2s;
      width: 200px;
    }

    .upcoming-match:hover {
      background: #3a3d4a;
    }

    .upcoming-match .teams {
      font-weight: 600;
      margin-bottom: 5px;
    }

    .upcoming-match .time {
      font-size: 12px;
      color: #888;
    }

    .matches {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(400px, 1800px));
      gap: 20px;
      margin-bottom: 30px;
      justify-content: center;
    }

    .bets {
      max-width: 1800px;
      background: #252836;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.3);
      margin: 0 auto;
    }

    .match-card {
      background: #252836;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 10px rgba(0,0,0,0.3);
      transition: all 0.3s ease;
      max-width: 1800px;
      margin: 0 auto;
      width: 100%;
    }

    .match-header {
      background: #2a2d3a;
      padding: 15px 20px;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: background-color 0.2s;
    }

    .match-header:hover {
      background: #3a3d4a;
    }

    .match-info {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .teams {
      font-weight: 600;
      font-size: 14px;
    }

    .match-time {
      font-size: 12px;
      color: #888;
    }

    .expand-icon {
      font-size: 12px;
      transition: transform 0.3s;
    }

    .match-card.expanded .expand-icon {
      transform: rotate(180deg);
    }

    .markets-container {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease;
      width: 100%;
    }

    .match-card.expanded .markets-container {
      max-height: 1000px;
    }

    .market-section {
      border-bottom: 1px solid #3a3d4a;
    }

    .market-section:last-child {
      border-bottom: none;
    }

    .market-header {
      background: #2a2d3a;
      padding: 12px 20px;
      font-size: 13px;
      font-weight: 500;
      color: #ffffff;
      border-bottom: 1px solid #3a3d4a;
    }

    .market-content {
      padding: 0;
    }

    .market-row {
      display: flex;
      border-bottom: 1px solid #3a3d4a;
      width: 100%;
    }

    .market-row:last-child {
      border-bottom: none;
    }

    .market-button {
      flex: 1;
      background: none;
      border: none;
      padding: 12px 15px;
      color: #ffffff;
      cursor: pointer;
      font-size: 14px;
      transition: background-color 0.2s;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-right: 1px solid #3a3d4a;
      min-width: 0;
      text-align: left;
    }

    .market-button:last-child {
      border-right: none;
    }

    .market-button:hover {
      background: #2a2d3a;
    }

    .market-button:active {
      background: #1a1d29;
    }

    .odds {
      color: #4caf50;
      font-weight: 600;
      white-space: nowrap;
    }

    .bet-card {
      background: #2a2d3a;
      padding: 15px;
      border-radius: 6px;
      margin-bottom: 10px;
      border: 1px solid #3a3d4a;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .bet-card:last-child {
      margin-bottom: 0;
    }

    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.7);
      z-index: 1000;
    }

    .modal-content {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #252836;
      padding: 30px;
      border-radius: 8px;
      min-width: 300px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.5);
    }

    .modal h3 {
      margin-bottom: 20px;
      text-align: center;
    }

    .modal-buttons {
      display: flex;
      gap: 10px;
      margin-top: 20px;
    }

    .button {
      padding: 10px 20px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: background-color 0.2s;
      flex: 1;
    }

    .button-primary {
      background: #4caf50;
      color: white;
    }

    .button-primary:hover {
      background: #45a049;
    }

    .button-secondary {
      background: #6c757d;
      color: white;
    }

    .button-secondary:hover {
      background: #5a6268;
    }

    .button-delete {
      background: #f44336;
      color: white;
      padding: 8px 12px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 12px;
      transition: background-color 0.2s;
    }

    .button-delete:hover {
      background: #da190b;
    }

    .add-bankroll, .remove-bankroll {
      padding: 8px 12px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      transition: background-color 0.2s;
      min-width: 35px;
    }

    .add-bankroll {
      background: #4caf50;
      color: white;
    }

    .add-bankroll:hover {
      background: #45a049;
    }

    .remove-bankroll {
      background: #f44336;
      color: white;
    }

    .remove-bankroll:hover {
      background: #da190b;
    }

    .loading, .error {
      text-align: center;
      padding: 40px;
      font-size: 16px;
    }

    .loading {
      color: #4caf50;
    }

    .error {
      color: #4caf50;
    }

    .result {
      font-weight: bold;
      margin-top: 10px;
    }

    .green {
      color: #4caf50;
    }

    .red {
      color: #f44336;
    }

    .bet-info {
      margin-bottom: 10px;
    }

    .bet-match {
      font-weight: 600;
      margin-bottom: 5px;
    }

    .bet-details {
      color: #ccc;
      font-size: 13px;
    }

    @media (max-width: 768px) {
      .matches {
        grid-template-columns: 1fr;
      }
      
      .header {
        flex-direction: column;
        gap: 15px;
      }
      
      .bankroll-controls {
        width: 100%;
        justify-content: center;
      }

      .upcoming-matches {
        flex-direction: column;
        align-items: center;
      }

      .upcoming-match {
        width: 100%;
        max-width: 300px;
      }

      .video iframe {
        height: 200px;
      }

      .match-card {
        max-width: 100%;
      }

      .bets {
        max-width: 100%;
      }
    }
    
    

  </style>

  <body>
    <body>
      <div id="header"></div>

      <br>
      <br>
       <br>

  <div class="container">
    <div class="header">
      <select id="leagueSelector" onchange="updateMatches()">
        <option value="Copa América|https://betstat.site/resultados/Copa%20America|https://betstat.site/proximos/Copa%20América|Copa America">Copa América</option>
        <option value="Taça Glória Eterna|https://betstat.site/resultados/Taça%20Glória%20eterna|https://betstat.site/proximos/Taça%20Glória%20Eterna|Gloria Eterna" selected>Taça Glória Eterna</option>
        <option value="Euro|https://betstat.site/resultados/Euro|https://betstat.site/proximos/Euro|Euro">Euro</option>
        <option value="Campeonato Italiano|https://betstat.site/resultados/Campeonato%20Italiano|https://betstat.site/proximos/Campeonato%20Italiano|Campeonato Italiano">Campeonato Italiano</option>
        <option value="Copa das Estrelas|https://betstat.site/resultados/Copa%20das%20estrelas|https://betstat.site/proximos/Copa%20das%20Estrelas|Copa das Estrelas">Copa das Estrelas</option>
        <option value="Brasileirão Betano|https://betstat.site/resultados/Brasileir%C3%A3o%20Betano|https://betstat.site/proximos/Brasileir%C3%A3o%20Betano|Brasileirão Betano">Brasileirão Betano</option>
      </select>
<img src="img/betano (2).png" alt="" style="width: 180px; height: auto;">
      <div class="bankroll-controls">
        <input type="number" id="bankroll" placeholder="Banca" min="0" value="100" onchange="updateBankroll()">
        <button class="add-bankroll" onclick="addBankroll()">+</button>
        <button class="remove-bankroll" onclick="removeBankroll()">-</button>
      </div>
    </div>

    <div class="video-container">
      <div class="video" data-league="Gloria Eterna">
        <div class="video-title" onclick="toggleVideo(this)">Gloria Eterna</div>
        <iframe src="https://stoiximan-br.live.inspiredvss.co.uk/inggWebViewer/?cust=stoiximan-br&ch=soccercopabr"></iframe>
      </div>
      <div class="video" data-league="Copa America">
        <div class="video-title" onclick="toggleVideo(this)">Copa America</div>
        <iframe src="https://stoiximanintl.live.inspiredvss.co.uk/inggWebViewer/?cust=stoiximanintl&ch=soccer3copaamerica&type=mobile"></iframe>
      </div>
      <div class="video" data-league="Euro">
        <div class="video-title" onclick="toggleVideo(this)">Euro</div>
        <iframe src="https://stoiximanintl.live.inspiredvss.co.uk/inggWebViewer/?cust=stoiximanintl&ch=soccer3international&type=mobile"></iframe>
      </div>
      <div class="video" data-league="Copa das Estrelas">
        <div class="video-title" onclick="toggleVideo(this)">Copa das Estrelas</div>
        <iframe src="https://stoiximan-br.live.inspiredvss.co.uk/inggWebViewer/?cust=stoiximan-br&ch=soccerstarsbr"></iframe>
      </div>
      <div class="video" data-league="Campeonato Italiano">
        <div class="video-title" onclick="toggleVideo(this)">Campeonato Italiano</div>
        <iframe src="https://stoiximan-br.live.inspiredvss.co.uk/inggWebViewer/?cust=stoiximan-br&ch=soccerserieAbr"></iframe>
      </div>
      <div class="video" data-league="Brasileirão Betano">
        <div class="video-title" onclick="toggleVideo(this)">Brasileirão Betano</div>
        <iframe src="https://stoiximan-br.live.inspiredvss.co.uk/inggWebViewer/?cust=stoiximan-br&ch=soccer3brasilerio&type=mobile"></iframe>
      </div>
    </div>

    <div id="upcoming-matches" class="upcoming-matches"></div>
    
    <div id="matches" class="matches"></div>
    
    <div id="bets" class="bets">
      <h3>Apostas Ativas</h3>
    </div>
  </div>

  <div id="betModal" class="modal">
    <div class="modal-content">
      <h3>Fazer Aposta</h3>
      <div id="betDetails"></div>
      <input type="number" id="betAmount" placeholder="Valor da aposta" min="0" step="0.01">
      <div class="modal-buttons">
        <button class="button button-primary" onclick="placeBet()">Apostar</button>
        <button class="button button-secondary" onclick="closeModal()">Cancelar</button>
      </div>
    </div>
  </div>


    <script>
let bankroll = 100;
let activeBets = [];
let currentMatch = null;
let currentMarket = null;
let matchesData = [];
let resultsData = [];
let currentLeague = '';
let selectedMatchId = null;

function updateBankroll() {
  bankroll = parseFloat(document.getElementById('bankroll').value) || 0;
  localStorage.setItem('bankroll', bankroll.toFixed(2));
}

function addBankroll() {
  const amount = parseFloat(prompt('Digite o valor a adicionar:')) || 0;
  if (amount > 0) {
    bankroll += amount;
    document.getElementById('bankroll').value = bankroll.toFixed(2);
    localStorage.setItem('bankroll', bankroll.toFixed(2));
  }
}

function removeBankroll() {
  const amount = parseFloat(prompt('Digite o valor a remover:')) || 0;
  if (amount > 0) {
    if (amount <= bankroll) {
      bankroll -= amount;
      document.getElementById('bankroll').value = bankroll.toFixed(2);
      localStorage.setItem('bankroll', bankroll.toFixed(2));
    } else {
      alert('Valor excede a banca!');
    }
  }
}

function saveBets() {
  localStorage.setItem('activeBets', JSON.stringify(activeBets));
}

function loadBets() {
  const savedBets = localStorage.getItem('activeBets');
  if (savedBets) {
    activeBets = JSON.parse(savedBets);
  }
  const savedBankroll = localStorage.getItem('bankroll');
  if (savedBankroll) {
    bankroll = parseFloat(savedBankroll) || 100;
    document.getElementById('bankroll').value = bankroll.toFixed(2);
  }
}

function deleteBet(betId) {
  const bet = activeBets.find(b => b.id === betId);
  if (bet && !bet.result) {
    bankroll += bet.amount;
    document.getElementById('bankroll').value = bankroll.toFixed(2);
    localStorage.setItem('bankroll', bankroll.toFixed(2));
  }
  activeBets = activeBets.filter(b => b.id !== betId);
  saveBets();
  updateBets();
}

async function fetchMatches() {
  try {
    const selectedValue = document.getElementById('leagueSelector').value;
    const [leagueName, resultadosUrl, proximosUrl] = selectedValue.split('|');

    console.log('Fetching data for:', leagueName);
    console.log('Proximos URL:', proximosUrl);
    console.log('Resultados URL:', resultadosUrl);

    const [proximosResp, resultadosResp] = await Promise.all([
      fetch(proximosUrl).then(res => {
        if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);
        return res.json();
      }),
      fetch(resultadosUrl).then(res => {
        if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);
        return res.json();
      })
    ]);

    console.log('Proximos data:', proximosResp);
    console.log('Resultados data:', resultadosResp);

    resultsData = Array.isArray(resultadosResp) ? resultadosResp : [];
    currentLeague = leagueName;

    const upcomingMatches = Array.isArray(proximosResp) ? proximosResp : [proximosResp];
    matchesData = upcomingMatches.map(match => ({
      id: String(match.id || Date.now() + Math.random().toString(36).substr(2, 9)),
      event_id: String(match.event_id || match.id),
      time: match.time || match.start_time?.split('T')[1]?.slice(0, 5) || 'N/A',
      team_home: match.team_home || match.time_a || 'N/A',
      team_visit: match.team_visit || match.time_b || 'N/A',
      date: match.captured_date || match.start_time?.split('T')[0] || new Date().toISOString().split('T')[0],
      league: leagueName,
      start_time: match.start_time ? new Date(match.start_time) : new Date(),
      hora: match.hora || 0,
      minuto: match.minuto || 0,
      odds: generateRandomOdds()
    }));

    return matchesData;
  } catch (error) {
    console.error('Erro ao carregar dados:', error);
    return [];
  }
}

function generateRandomOdds() {
  return {
    Casa: (Math.random() * 2 + 1.5).toFixed(2), // 1.5 to 3.5
    Empate: (Math.random() * 1 + 3.0).toFixed(2), // 3.0 to 4.0
    Fora: (Math.random() * 2 + 2.0).toFixed(2), // 2.0 to 4.0
    Over0_5: (Math.random() * 0.3 + 1.05).toFixed(2), // 1.05 to 1.35
    Under0_5: (Math.random() * 4 + 6.0).toFixed(2), // 6.0 to 10.0
    Over1_5: (Math.random() * 0.5 + 1.4).toFixed(2), // 1.4 to 1.9
    Under1_5: (Math.random() * 1 + 2.0).toFixed(2), // 2.0 to 3.0
    Over2_5: (Math.random() * 1 + 2.0).toFixed(2), // 2.0 to 3.0
    Under2_5: (Math.random() * 0.5 + 1.3).toFixed(2), // 1.3 to 1.8
    Over3_5: (Math.random() * 2 + 4.0).toFixed(2), // 4.0 to 6.0
    Under3_5: (Math.random() * 0.3 + 1.1).toFixed(2), // 1.1 to 1.4
    AmbasSim: (Math.random() * 0.5 + 1.8).toFixed(2), // 1.8 to 2.3
    AmbasNao: (Math.random() * 0.5 + 1.5).toFixed(2), // 1.5 to 2.0
    '0Gols': (Math.random() * 2 + 7.0).toFixed(2), // 7.0 to 9.0
    '1Gols': (Math.random() * 1 + 3.5).toFixed(2), // 3.5 to 4.5
    '2Gols': (Math.random() * 1 + 3.0).toFixed(2), // 3.0 to 4.0
    '3Gols': (Math.random() * 1 + 4.0).toFixed(2), // 4.0 to 5.0
    '4Gols': (Math.random() * 2 + 8.0).toFixed(2), // 8.0 to 10.0
    '5Gols': (Math.random() * 5 + 12.0).toFixed(2) // 12.0 to 17.0
  };
}

function toggleMatch(matchId) {
  console.log('Toggling match:', matchId);
  const matchCard = document.querySelector(`[data-match-id="${matchId}"]`);
  if (matchCard) {
    matchCard.classList.toggle('expanded');
  } else {
    console.warn('Match card not found for ID:', matchId);
  }
}

function toggleVideo(element) {
  const videoDiv = element.parentElement;
  videoDiv.classList.toggle('hidden');
  element.classList.toggle('expanded');
}

function updateVideo() {
  const selectedValue = document.getElementById('leagueSelector').value;
  const [, , , videoLeague] = selectedValue.split('|');
  const videos = document.querySelectorAll('.video');
  videos.forEach(video => {
    video.classList.toggle('active', video.dataset.league === videoLeague);
  });
}

function createMatchCard(match) {
  console.log('Creating match card for:', match);
  return `
    <div class="match-card" data-match-id="${match.id}">
      <div class="match-header" onclick="toggleMatch('${match.id}')">
        <div class="match-info">
          <div class="teams">${match.team_home} vs ${match.team_visit}</div>
          <div class="match-time">${match.date} ${match.time}</div>
        </div>
        <div class="expand-icon">▼</div>
      </div>
      <div class="markets-container">
        <div class="market-section">
          <div class="market-header">Resultado Final</div>
          <div class="market-content">
            <div class="market-row">
              <button class="market-button" onclick="openModal('${match.id}', 'Casa', ${match.odds.Casa}, '${match.team_home}')">
                <span>1</span><span class="odds">${match.odds.Casa}</span>
              </button>
              <button class="market-button" onclick="openModal('${match.id}', 'Empate', ${match.odds.Empate}, 'Empate')">
                <span>X</span><span class="odds">${match.odds.Empate}</span>
              </button>
              <button class="market-button" onclick="openModal('${match.id}', 'Fora', ${match.odds.Fora}, '${match.team_visit}')">
                <span>2</span><span class="odds">${match.odds.Fora}</span>
              </button>
            </div>
          </div>
        </div>
        <div class="market-section">
          <div class="market-header">Total de Gols Mais/Menos</div>
          <div class="market-content">
            <div class="market-row">
              <button class="market-button" onclick="openModal('${match.id}', 'Over1.5', ${match.odds.Over1_5}, 'Mais de 1.5 gols')">
                <span>Mais de 1.5</span><span class="odds">${match.odds.Over1_5}</span>
              </button>
              <button class="market-button" onclick="openModal('${match.id}', 'Under1.5', ${match.odds.Under1_5}, 'Menos de 1.5 gols')">
                <span>Menos de 1.5</span><span class="odds">${match.odds.Under1_5}</span>
              </button>
            </div>
          </div>
        </div>
        <div class="market-section">
          <div class="market-header">Ambas equipes Marcam</div>
          <div class="market-content">
            <div class="market-row">
              <button class="market-button" onclick="openModal('${match.id}', 'AmbasSim', ${match.odds.AmbasSim}, 'Ambas marcam - Sim')">
                <span>Sim</span><span class="odds">${match.odds.AmbasSim}</span>
              </button>
              <button class="market-button" onclick="openModal('${match.id}', 'AmbasNao', ${match.odds.AmbasNao}, 'Ambas marcam - Não')">
                <span>Não</span><span class="odds">${match.odds.AmbasNao}</span>
              </button>
            </div>
          </div>
        </div>
        <div class="market-section">
          <div class="market-header">Total de Gols Mais/Menos (alternativas)</div>
          <div class="market-content">
            <div class="market-row">
              <button class="market-button" onclick="openModal('${match.id}', 'Over0.5', ${match.odds.Over0_5}, 'Mais de 0.5 gols')">
                <span>Mais de 0.5</span><span class="odds">${match.odds.Over0_5}</span>
              </button>
              <button class="market-button" onclick="openModal('${match.id}', 'Under0.5', ${match.odds.Under0_5}, 'Menos de 0.5 gols')">
                <span>Menos de 0.5</span><span class="odds">${match.odds.Under0_5}</span>
              </button>
            </div>
            <div class="market-row">
              <button class="market-button" onclick="openModal('${match.id}', 'Over2.5', ${match.odds.Over2_5}, 'Mais de 2.5 gols')">
                <span>Mais de 2.5</span><span class="odds">${match.odds.Over2_5}</span>
              </button>
              <button class="market-button" onclick="openModal('${match.id}', 'Under2.5', ${match.odds.Under2_5}, 'Menos de 2.5 gols')">
                <span>Menos de 2.5</span><span class="odds">${match.odds.Under2_5}</span>
              </button>
            </div>
            <div class="market-row">
              <button class="market-button" onclick="openModal('${match.id}', 'Over3.5', ${match.odds.Over3_5}, 'Mais de 3.5 gols')">
                <span>Mais de 3.5</span><span class="odds">${match.odds.Over3_5}</span>
              </button>
              <button class="market-button" onclick="openModal('${match.id}', 'Under3.5', ${match.odds.Under3_5}, 'Menos de 3.5 gols')">
                <span>Menos de 3.5</span><span class="odds">${match.odds.Under3_5}</span>
              </button>
            </div>
          </div>
        </div>
        <div class="market-section">
          <div class="market-header">Total de gols exatos</div>
          <div class="market-content">
            <div class="market-row">
              <button class="market-button" onclick="openModal('${match.id}', '0Gols', ${match.odds['0Gols']}, '0 gols no jogo')">
                <span>0</span><span class="odds">${match.odds['0Gols']}</span>
              </button>
              <button class="market-button" onclick="openModal('${match.id}', '1Gols', ${match.odds['1Gols']}, '1 gol no jogo')">
                <span>1</span><span class="odds">${match.odds['1Gols']}</span>
              </button>
            </div>
            <div class="market-row">
              <button class="market-button" onclick="openModal('${match.id}', '2Gols', ${match.odds['2Gols']}, '2 gols no jogo')">
                <span>2</span><span class="odds">${match.odds['2Gols']}</span>
              </button>
              <button class="market-button" onclick="openModal('${match.id}', '3Gols', ${match.odds['3Gols']}, '3 gols no jogo')">
                <span>3</span><span class="odds">${match.odds['3Gols']}</span>
              </button>
            </div>
            <div class="market-row">
              <button class="market-button" onclick="openModal('${match.id}', '4Gols', ${match.odds['4Gols']}, '4 gols no jogo')">
                <span>4</span><span class="odds">${match.odds['4Gols']}</span>
              </button>
              <button class="market-button" onclick="openModal('${match.id}', '5Gols', ${match.odds['5Gols']}, '5 ou mais gols')">
                <span>5+</span><span class="odds">${match.odds['5Gols']}</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  `;
}

function updateUpcomingMatches() {
  console.log('Updating upcoming matches with:', matchesData);
  const upcomingDiv = document.getElementById('upcoming-matches');
  upcomingDiv.innerHTML = '';
  if (matchesData.length === 0) {
    upcomingDiv.innerHTML = '<div class="error">Nenhuma partida disponível.</div>';
    return;
  }
  matchesData.forEach(match => {
    const now = new Date();
    if (match.start_time > now) { // Only show upcoming matches
      const matchDiv = document.createElement('div');
      matchDiv.className = 'upcoming-match';
      matchDiv.innerHTML = `
        <div class="teams">${match.team_home} vs ${match.team_visit}</div>
        <div class="time">${match.time}</div>
      `;
      matchDiv.onclick = () => {
        selectedMatchId = match.id;
        console.log('Selected match ID:', selectedMatchId);
        updateMatches();
      };
      upcomingDiv.appendChild(matchDiv);
    }
  });
}

async function updateMatches() {
  const matchesDiv = document.getElementById('matches');
  try {
    console.log('Updating matches, selectedMatchId:', selectedMatchId);
    matchesData = await fetchMatches();
    console.log('Fetched matchesData:', matchesData);
    if (matchesData.length === 0) {
      matchesDiv.innerHTML = '<div class="error">Nenhum dado disponível. Verifique a conexão ou URLs.</div>';
      updateUpcomingMatches();
      updateVideo();
      return;
    }

    updateUpcomingMatches();
    updateVideo();

    requestAnimationFrame(() => {
      if (!selectedMatchId && matchesData.length > 0) {
        selectedMatchId = matchesData.find(m => m.start_time > new Date())?.id;
        console.log('Auto-selected first upcoming match ID:', selectedMatchId);
      }
      if (selectedMatchId) {
        const selectedMatch = matchesData.find(m => m.id === selectedMatchId);
        if (selectedMatch) {
          console.log('Rendering selected match:', selectedMatch);
          matchesDiv.innerHTML = createMatchCard(selectedMatch);
          matchesDiv.querySelector('.match-card').classList.add('expanded');
        } else {
          console.warn('Selected match not found for ID:', selectedMatchId);
          matchesDiv.innerHTML = '<div class="error">Selecione uma partida.</div>';
        }
      } else {
        console.log('No match selected, clearing matches div');
        matchesDiv.innerHTML = '';
      }
      updateBets();
    });
  } catch (error) {
    console.error('Erro ao atualizar partidas:', error);
    matchesDiv.innerHTML = '<div class="error">Erro ao carregar partidas. Tente novamente.</div>';
  }
}

function openModal(matchId, market, odds, description) {
  console.log('openModal called with:', { matchId, market, odds, description });
  const match = matchesData.find(m => m.id === matchId);
  if (!match) {
    console.error('Match not found for ID:', matchId);
    alert('Erro: Partida não encontrada.');
    return;
  }

  const now = new Date();
  if (match.start_time <= now) {
    alert('Erro: Não é possível apostar em partidas que já começaram.');
    return;
  }

  currentMatch = matchId;
  currentMarket = { market, odds: parseFloat(odds), description };

  try {
    const betDetails = document.getElementById('betDetails');
    betDetails.innerHTML = `
      <div style="margin-bottom: 15px;">
        <strong>${match.team_home} vs ${match.team_visit}</strong><br>
        <span style="color: #ccc;">${description}</span><br>
        <span style="color: #4caf50;">Odd: ${odds}</span>
      </div>
    `;
    const betModal = document.getElementById('betModal');
    betModal.style.display = 'block';
    const betAmountInput = document.getElementById('betAmount');
    betAmountInput.value = '';
    betAmountInput.focus();
  } catch (error) {
    console.error('Error opening modal:', error);
    alert('Erro ao abrir a janela de aposta.');
  }
}

function closeModal() {
  const betModal = document.getElementById('betModal');
  if (betModal) {
    betModal.style.display = 'none';
  }
  currentMatch = null;
  currentMarket = null;
}

function placeBet() {
  console.log('placeBet called with:', { currentMatch, currentMarket });
  const betAmountInput = document.getElementById('betAmount');
  const amount = parseFloat(betAmountInput.value) || 0;
  if (amount <= 0) {
    alert('Digite um valor válido!');
    return;
  }
  if (amount > bankroll) {
    alert('Valor excede a banca!');
    return;
  }
  if (!currentMatch || !currentMarket) {
    alert('Erro: Dados da aposta não disponíveis.');
    return;
  }

  const match = matchesData.find(m => m.id === currentMatch);
  if (!match) {
    alert('Erro: Partida não encontrada.');
    return;
  }

  const now = new Date();
  if (match.start_time <= now) {
    alert('Erro: Não é possível apostar em partidas que já começaram.');
    return;
  }

  bankroll -= amount;
  document.getElementById('bankroll').value = bankroll.toFixed(2);
  localStorage.setItem('bankroll', bankroll.toFixed(2));

  const bet = {
    id: Date.now() + Math.random().toString(36).substr(2, 9),
    matchId: currentMatch,
    eventId: match.event_id,
    market: currentMarket.market,
    odds: currentMarket.odds,
    amount: amount,
    description: currentMarket.description,
    teams: `${match.team_home} vs ${match.team_visit}`,
    result: null,
    timestamp: new Date().toISOString(),
    league: currentLeague,
    matchTime: match.time,
    matchHora: match.hora,
    matchMinuto: match.minuto,
    matchDate: match.date
  };

  activeBets.push(bet);
  console.log('Bet placed:', bet);
  saveBets();
  updateBets();
  closeModal();
}

function checkBetResult(bet) {
  console.log('Checking bet result for:', bet);

  // Get the 5 most recent results, sorted by date and time
  const latestResults = resultsData
    .sort((a, b) => {
      const dateA = new Date(`${a.data}T${a.hora}:${a.minuto}:00Z`);
      const dateB = new Date(`${b.data}T${b.hora}:${b.minuto}:00Z`);
      return dateB - dateA; // Sort descending
    })
    .slice(0, 5); // Take the 5 most recent

  console.log('Latest 5 results:', latestResults);

  // Find the result matching the bet's event_id
  const result = latestResults.find(r => {
    const eventIdMatch = String(r.event_id) === String(bet.eventId);
    console.log('Comparing event_id:', { resultEventId: r.event_id, betEventId: bet.eventId, eventIdMatch });
    return eventIdMatch;
  });

  if (!result || !result.ft) {
    console.log('No matching result found for bet:', bet, 'Result:', result);
    return null;
  }

  console.log('Found matching result for bet:', result);

  // Parse the ft field (e.g., "0 x 2")
  let homeGoals, awayGoals;
  try {
    [homeGoals, awayGoals] = result.ft.split(' x ').map(Number);
    if (isNaN(homeGoals) || isNaN(awayGoals)) {
      throw new Error('Invalid goals format');
    }
  } catch (error) {
    console.warn('Invalid goals data:', result.ft, error);
    return null;
  }

  const totalGoals = homeGoals + awayGoals;

  switch (bet.market) {
    case 'Casa':
      return homeGoals > awayGoals ? 'win' : 'lose';
    case 'Empate':
      return homeGoals === awayGoals ? 'win' : 'lose';
    case 'Fora':
      return awayGoals > homeGoals ? 'win' : 'lose';
    case 'AmbasSim':
      return homeGoals > 0 && awayGoals > 0 ? 'win' : 'lose';
    case 'AmbasNao':
      return homeGoals === 0 || awayGoals === 0 ? 'win' : 'lose';
    case 'Over0.5':
      return totalGoals > 0.5 ? 'win' : 'lose';
    case 'Under0.5':
      return totalGoals <= 0.5 ? 'win' : 'lose';
    case 'Over1.5':
      return totalGoals > 1.5 ? 'win' : 'lose';
    case 'Under1.5':
      return totalGoals <= 1.5 ? 'win' : 'lose';
    case 'Over2.5':
      return totalGoals > 2.5 ? 'win' : 'lose';
    case 'Under2.5':
      return totalGoals <= 2.5 ? 'win' : 'lose';
    case 'Over3.5':
      return totalGoals > 3.5 ? 'win' : 'lose';
    case 'Under3.5':
      return totalGoals <= 3.5 ? 'win' : 'lose';
    case '0Gols':
      return totalGoals === 0 ? 'win' : 'lose';
    case '1Gols':
      return totalGoals === 1 ? 'win' : 'lose';
    case '2Gols':
      return totalGoals === 2 ? 'win' : 'lose';
    case '3Gols':
      return totalGoals === 3 ? 'win' : 'lose';
    case '4Gols':
      return totalGoals === 4 ? 'win' : 'lose';
    case '5Gols':
      return totalGoals >= 5 ? 'win' : 'lose';
    default:
      console.warn('Unknown market:', bet.market);
      return null;
  }
}

function updateBets() {
  console.log('Updating bets:', activeBets);
  const betsDiv = document.getElementById('bets');
  betsDiv.innerHTML = '<h3>Apostas Ativas</h3>';

  if (activeBets.length === 0) {
    betsDiv.innerHTML += '<p style="color: #888; text-align: center;">Nenhuma aposta realizada</p>';
    return;
  }

  activeBets.forEach(bet => {
    const betDiv = document.createElement('div');
    betDiv.className = 'bet-card';

    if (!bet.result) {
      const result = checkBetResult(bet);
      if (result) {
        bet.result = result;
        if (result === 'win') {
          const winAmount = bet.amount * bet.odds;
          bankroll += winAmount;
          document.getElementById('bankroll').value = bankroll.toFixed(2);
          localStorage.setItem('bankroll', bankroll.toFixed(2));
        }
        saveBets();
      }
    }

    let resultHtml = '';
    if (bet.result === 'win') {
      const winAmount = bet.amount * bet.odds;
      resultHtml = `<div class="result"><span class="green">✓ Green - Ganho: R$ ${winAmount.toFixed(2)}</span></div>`;
    } else if (bet.result === 'lose') {
      resultHtml = `<div class="result"><span class="red">✗ Red - Perda: R$ ${bet.amount.toFixed(2)}</span></div>`;
    } else {
      resultHtml = `<div class="result" style="color: #888;">⏳ Aguardando resultado...</div>`;
    }

    betDiv.innerHTML = `
      <div class="bet-info">
        <div class="bet-match">${bet.teams} (${bet.league})</div>
        <div class="bet-details">
          ${bet.description} - Odd: ${bet.odds} - Valor: R$ ${bet.amount.toFixed(2)}
        </div>
        ${resultHtml}
      </div>
      <button class="button-delete" onclick="deleteBet('${bet.id}')">Remover</button>
    `;
    betsDiv.appendChild(betDiv);
  });
}

async function updateResults() {
  try {
    const selectedValue = document.getElementById('leagueSelector').value;
    const [, resultadosUrl] = selectedValue.split('|');
    console.log('Fetching latest results from:', resultadosUrl);
    const response = await fetch(resultadosUrl);
    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`);
    }
    const data = await response.json();
    resultsData = Array.isArray(data) ? data : [];
    console.log('Updated resultsData:', resultsData);
    if (resultsData.length === 0) {
      console.warn('No results data received from API');
    }
    updateBets();
  } catch (error) {
    console.error('Erro ao atualizar resultados:', error.message, error.stack);
    const betsDiv = document.getElementById('bets');
    betsDiv.innerHTML = '<div class="error">Erro ao atualizar resultados: ' + error.message + '. Tente novamente.</div>';
  }
}

document.addEventListener('DOMContentLoaded', () => {
  loadBets();
  updateMatches();
  setInterval(() => {
    updateMatches();
    updateResults();
  }, 10000); // Update every 10 seconds
});
    </script>

    <script>
      // Bloqueia o menu de contexto (clique direito)
      document.addEventListener("contextmenu", function(e) {
    e.preventDefault();
});

// Bloqueia atalhos de teclado comuns para ferramentas de desenvolvimento
document.addEventListener("keydown", function(e) {
    // F12
    if (e.key === "F12") {
        e.preventDefault();
    }
    
    // Ctrl + Shift + I
    if (e.ctrlKey && e.shiftKey && e.key === "I") {
        e.preventDefault();
    }
    
    // Ctrl + U (ver código fonte)
    if (e.ctrlKey && e.key === "u") {
        e.preventDefault();
    }
    
    // Ctrl + Shift + J (console)
    if (e.ctrlKey && e.shiftKey && e.key === "J") {
        e.preventDefault();
    }
    
    // Ctrl + Shift + C (inspeção de elementos)
    if (e.ctrlKey && e.shiftKey && e.key === "C") {
        e.preventDefault();
    }
    
    // Ctrl + S (salvar página)
    if (e.ctrlKey && e.key === "s") {
        e.preventDefault();
    }
    
    // Ctrl + P (imprimir)
    if (e.ctrlKey && e.key === "p") {
        e.preventDefault();
    }
});

// Detecta abertura de ferramentas de desenvolvimento
const devtools = { open: false };
const element = new Image();
Object.defineProperty(element, 'id', {
    get: function () {
        devtools.open = true;
    }
});

// Adiciona detecção alternativa de devtools
(function() {
    const threshold = 160;
    const checkDevTools = function() {
        if ((window.outerWidth - window.innerWidth) > threshold || 
            (window.outerHeight - window.innerHeight) > threshold) {
            devtools.open = true;
        }
    };
    
    window.addEventListener('resize', checkDevTools);
    setInterval(checkDevTools, 500);
})();

// Monitoramento contínuo
console.log('%c', element);
setInterval(function() {
    if (devtools.open) {
        document.body.innerHTML = '<h1>Acesso não autorizado detectado</h1>';
        // Ou redirecionar:
        // window.location.href = 'about:blank';
        devtools.open = false;
    }
}, 1000);

// Impede seleção de texto
document.addEventListener('selectstart', function(e) {
    e.preventDefault();
});

// Impede arrastar e soltar
document.addEventListener('dragstart', function(e) {
    e.preventDefault();
});

// Ofusca console
console.log = function() {};
console.debug = function() {};
console.info = function() {};
    </script>

<script>
  fetch('header.html')
    .then(response => response.text())
    .then(data => {
      document.getElementById('header').innerHTML = data;
    });
</script>
<script src="redirecionar.js"></script>

    <script></script>
  </body>
</html>
