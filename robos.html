<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel de Configura√ß√£o do Bot</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #1fac89;
            --primary-hover: #189e7a;
            --primary-glow: rgba(31, 172, 137, 0.2);
            --bg-body: #0f1115;
            --bg-card: #161b22;
            --bg-input: #0d1117;
            --border-color: #30363d;
            --text-main: #e6edf3;
            --text-muted: #8b949e;
            --danger: #f85149;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; scrollbar-width: thin; scrollbar-color: var(--border-color) var(--bg-body); }
        body { background-color: var(--bg-body); color: var(--text-main); font-family: 'Inter', sans-serif; padding: 40px 20px; line-height: 1.6; }
        .container { max-width: 1440px; margin: 0 auto; }

        /* GRID PRINCIPAL */
        .config-section {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        /* ESTILO DOS CARDS */
        .field-group, .table-container, .rule-item {
            background-color: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .field-group label, .table-title {
            display: block; margin-bottom: 10px; font-size: 12px; font-weight: 600; color: var(--primary); text-transform: uppercase; letter-spacing: 0.8px;
        }

        input[type="text"], input[type="number"], input[type="time"], select {
            width: 100%; padding: 12px; background-color: var(--bg-input); border: 1px solid var(--border-color); border-radius: 6px; font-size: 14px; color: var(--text-main); outline: none; font-family: 'Inter', sans-serif; transition: all 0.2s;
        }
        input:focus, select:focus { border-color: var(--primary); box-shadow: 0 0 0 3px var(--primary-glow); }

        /* CHECKBOXES LIGAS */
        .league-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
        .league-header button { padding: 6px 14px; background-color: var(--primary); color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 11px; font-weight: 600; transition: background-color 0.2s; }
        .league-header button:hover { background-color: var(--primary-hover); }
        .league-checkboxes { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; }
        .checkbox-item { display: flex; align-items: center; gap: 10px; padding: 10px; background-color: var(--bg-input); border: 1px solid var(--border-color); border-radius: 6px; cursor: pointer; transition: background-color 0.2s; }
        .checkbox-item:hover { background-color: #1c2128; border-color: var(--primary); }
        .checkbox-item input[type="checkbox"] { width: 16px; height: 16px; accent-color: var(--primary); cursor: pointer; }
        .checkbox-item label { margin: 0; color: var(--text-main); font-size: 13px; cursor: pointer; }

        /* TELEGRAM */
        .telegram-container { display: flex; flex-direction: column; gap: 10px; }
        .telegram-input-group { display: flex; gap: 10px; }
        .btn-add-telegram { padding: 0 20px; background-color: var(--primary); color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 13px; }
        .btn-add-telegram:hover { background-color: var(--primary-hover); }
        .telegram-list { background: var(--bg-input); border: 1px solid var(--border-color); border-radius: 6px; padding: 5px; max-height: 100px; overflow-y: auto; }
        .telegram-item { display: flex; justify-content: space-between; align-items: center; padding: 8px 12px; background-color: var(--bg-card); border-bottom: 1px solid var(--border-color); font-size: 13px; margin-bottom: 4px; border-radius: 4px; }
        .btn-remove { background-color: transparent; color: var(--danger); border: 1px solid var(--danger); padding: 4px 10px; border-radius: 4px; cursor: pointer; font-size: 11px; font-weight: 600; }
        .btn-remove:hover { background-color: var(--danger); color: white; }

        /* BOT√ïES */
        .buttons { 
            display: grid; 
            grid-template-columns: 1fr 1fr; 
            gap: 20px; 
            margin-bottom: 30px;
            grid-column: span 4;
        }
        .btn { 
            padding: 16px 40px; 
            font-size: 15px; 
            font-weight: 600; 
            border: none; 
            border-radius: 8px; 
            cursor: pointer; 
            text-transform: uppercase; 
            letter-spacing: 1.2px; 
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        .btn:active { transform: scale(0.97); }
        .btn-clear { 
            background-color: var(--bg-card); 
            border: 2px solid var(--danger); 
            color: var(--danger); 
        }
        .btn-clear:hover { 
            background-color: var(--danger); 
            color: white;
            border-color: var(--danger);
            box-shadow: 0 4px 20px rgba(248, 81, 73, 0.4);
        }
        .btn-save { 
            background: linear-gradient(135deg, var(--primary) 0%, #158f6e 100%); 
            color: white; 
            box-shadow: 0 4px 15px rgba(31, 172, 137, 0.3);
            border: 2px solid transparent;
        }
        .btn-save:hover { 
            box-shadow: 0 6px 25px rgba(31, 172, 137, 0.5); 
            transform: translateY(-2px);
            filter: brightness(1.1);
        }

        /* TABELA */
        .table-container { border-top: 4px solid var(--primary); padding: 25px; }
        .table-title { font-size: 16px; text-align: left; margin-bottom: 20px; color: var(--text-main); border-bottom: 1px solid var(--border-color); padding-bottom: 10px; }
        
        /* GRID DE N√öMEROS */
        .number-grid { 
            display: grid; 
            grid-template-columns: repeat(20, 1fr);
            gap: 4px; 
            margin-bottom: 20px; 
        }
        
        .number-cell { aspect-ratio: 1; background-color: var(--bg-input); border: 1px solid var(--border-color); display: flex; align-items: center; justify-content: center; border-radius: 4px; cursor: pointer; font-size: 11px; font-weight: 500; color: var(--text-muted); position: relative; transition: all 0.1s; }
        .number-cell:hover { border-color: var(--primary); color: var(--text-main); transform: translateY(-2px); }
        .number-cell.filter-selected { background-color: #1e40af; border-color: #3b82f6; color: white; }
        .number-cell.entry-confirmed { background-color: rgba(31, 172, 137, 0.2); border-color: var(--primary); color: var(--primary); font-weight: 700; }
        .number-cell .filter-label { position: absolute; bottom: 1px; right: 1px; font-size: 7px; font-weight: 700; opacity: 0.9; }
        
        .progress-bar { width: 100%; height: 6px; background-color: var(--bg-input); border-radius: 3px; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, var(--primary), #3b82f6); width: 0%; transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1); }

        /* AN√ÅLISE DE ASSERTIVIDADE */
        .assertivity-container { 
            background-color: var(--bg-card); 
            border: 1px solid var(--border-color); 
            border-radius: 8px; 
            padding: 25px; 
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .assertivity-title { 
            font-size: 16px; 
            font-weight: 600; 
            color: var(--text-main); 
            margin-bottom: 20px; 
            border-bottom: 1px solid var(--border-color); 
            padding-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .assertivity-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); 
            gap: 15px; 
        }
        .assertivity-card { 
            background-color: var(--bg-input); 
            border: 1px solid var(--border-color); 
            border-radius: 6px; 
            padding: 15px; 
            text-align: center;
            transition: transform 0.2s, border-color 0.2s;
        }
        .assertivity-card:hover { 
            transform: translateY(-2px); 
            border-color: var(--primary); 
        }
        .assertivity-period { 
            font-size: 11px; 
            color: var(--text-muted); 
            text-transform: uppercase; 
            font-weight: 600; 
            margin-bottom: 8px;
            letter-spacing: 0.5px;
        }
        .assertivity-value { 
            font-size: 24px; 
            font-weight: 700; 
            margin-bottom: 5px;
        }
        .assertivity-value.positive { color: var(--primary); }
        .assertivity-value.negative { color: var(--danger); }
        .assertivity-stats { 
            display: flex; 
            justify-content: space-around; 
            margin-top: 10px; 
            padding-top: 10px; 
            border-top: 1px solid var(--border-color);
            font-size: 11px;
        }
        .stat-item { display: flex; flex-direction: column; align-items: center; }
        .stat-label { color: var(--text-muted); margin-bottom: 3px; }
        .stat-value { font-weight: 600; }
        .stat-value.green { color: var(--primary); }
        .stat-value.red { color: var(--danger); }

        /* JANELA FLUTUANTE DE BOTS */
        .bots-floating-btn { 
            position: fixed; 
            bottom: 30px; 
            right: 30px; 
            width: 60px; 
            height: 60px; 
            background: linear-gradient(135deg, var(--primary), #158f6e); 
            border-radius: 50%; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            cursor: pointer; 
            box-shadow: 0 4px 20px rgba(31, 172, 137, 0.4);
            z-index: 1000;
            transition: transform 0.3s, box-shadow 0.3s;
            border: 3px solid var(--bg-body);
        }
        .bots-floating-btn:hover { 
            transform: scale(1.1) rotate(5deg); 
            box-shadow: 0 6px 30px rgba(31, 172, 137, 0.6); 
        }
        .bots-floating-btn .icon { 
            font-size: 28px; 
            color: white;
        }
        .bots-counter { 
            position: absolute; 
            top: -5px; 
            right: -5px; 
            background-color: var(--danger); 
            color: white; 
            border-radius: 50%; 
            width: 24px; 
            height: 24px; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            font-size: 11px; 
            font-weight: 700;
            border: 2px solid var(--bg-body);
        }

        .bots-modal { 
            display: none; 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background-color: rgba(0, 0, 0, 0.8); 
            z-index: 2000;
            align-items: center; 
            justify-content: center;
            backdrop-filter: blur(5px);
        }
        .bots-modal.active { display: flex; }
        .bots-modal-content { 
            background-color: var(--bg-card); 
            border: 1px solid var(--border-color); 
            border-radius: 12px; 
            width: 90%; 
            max-width: 800px; 
            max-height: 80vh; 
            overflow-y: auto;
            box-shadow: 0 10px 50px rgba(0, 0, 0, 0.5);
            animation: slideIn 0.3s ease-out;
        }
        @keyframes slideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .bots-modal-header { 
            padding: 25px; 
            border-bottom: 1px solid var(--border-color); 
            display: flex; 
            justify-content: space-between; 
            align-items: center;
            background-color: rgba(31, 172, 137, 0.05);
        }
        .bots-modal-title { 
            font-size: 20px; 
            font-weight: 700; 
            color: var(--text-main);
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .bots-limit { 
            font-size: 13px; 
            color: var(--text-muted); 
            background-color: var(--bg-input); 
            padding: 6px 12px; 
            border-radius: 20px;
            font-weight: 600;
        }
        .close-modal { 
            background: none; 
            border: none; 
            color: var(--text-muted); 
            font-size: 28px; 
            cursor: pointer; 
            transition: color 0.2s, transform 0.2s;
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
        }
        .close-modal:hover { 
            color: var(--danger); 
            background-color: rgba(248, 81, 73, 0.1);
            transform: rotate(90deg);
        }
        .bots-modal-body { padding: 25px; }
        .bot-item { 
            background-color: var(--bg-input); 
            border: 1px solid var(--border-color); 
            border-radius: 8px; 
            padding: 20px; 
            margin-bottom: 15px;
            transition: border-color 0.2s, transform 0.2s;
        }
        .bot-item:hover { 
            border-color: var(--primary); 
            transform: translateX(5px);
        }
        .bot-header { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            margin-bottom: 15px;
        }
        .bot-name { 
            font-size: 16px; 
            font-weight: 600; 
            color: var(--text-main);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .bot-status { 
            padding: 5px 12px; 
            border-radius: 20px; 
            font-size: 11px; 
            font-weight: 600; 
            text-transform: uppercase;
        }
        .bot-status.active { background-color: rgba(31, 172, 137, 0.2); color: var(--primary); }
        .bot-status.paused { background-color: rgba(255, 193, 7, 0.2); color: #ffc107; }
        .bot-info { 
            display: grid; 
            grid-template-columns: repeat(3, 1fr); 
            gap: 15px; 
            margin-bottom: 15px;
            padding: 12px;
            background-color: var(--bg-body);
            border-radius: 6px;
        }
        .bot-info-item { text-align: center; }
        .bot-info-label { 
            font-size: 10px; 
            color: var(--text-muted); 
            text-transform: uppercase; 
            margin-bottom: 5px;
            font-weight: 600;
        }
        .bot-info-value { 
            font-size: 14px; 
            font-weight: 600; 
            color: var(--text-main); 
        }
        .bot-actions { 
            display: flex; 
            gap: 10px; 
        }
        .bot-action-btn { 
            flex: 1; 
            padding: 10px; 
            border: none; 
            border-radius: 6px; 
            cursor: pointer; 
            font-size: 12px; 
            font-weight: 600; 
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }
        .btn-edit { 
            background-color: rgba(59, 130, 246, 0.1); 
            color: #3b82f6; 
            border: 1px solid #3b82f6;
        }
        .btn-edit:hover { 
            background-color: #3b82f6; 
            color: white; 
        }
        .btn-pause { 
            background-color: rgba(255, 193, 7, 0.1); 
            color: #ffc107; 
            border: 1px solid #ffc107;
        }
        .btn-pause:hover { 
            background-color: #ffc107; 
            color: var(--bg-body); 
        }
        .btn-delete { 
            background-color: rgba(248, 81, 73, 0.1); 
            color: var(--danger); 
            border: 1px solid var(--danger);
        }
        .btn-delete:hover { 
            background-color: var(--danger); 
            color: white; 
        }
        .empty-bots { 
            text-align: center; 
            padding: 60px 20px; 
            color: var(--text-muted);
        }
        .empty-bots-icon { 
            font-size: 60px; 
            margin-bottom: 20px; 
            opacity: 0.5;
        }
        .empty-bots-text { 
            font-size: 16px; 
            margin-bottom: 10px;
        }

        /* REGRAS */
        .rules-container { margin-top: 40px; display: flex; flex-direction: column; gap: 15px; }
        .rule-item { padding: 0; border: 1px solid var(--border-color); overflow: hidden; background-color: var(--bg-card); }
        .rule-header { padding: 18px 25px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; font-size: 15px; font-weight: 600; color: var(--text-main); background-color: rgba(255, 255, 255, 0.02); border-left: 4px solid transparent; transition: all 0.3s; }
        .rule-header:hover { background-color: rgba(255, 255, 255, 0.05); }
        .rule-header.active { border-left-color: var(--primary); background-color: rgba(31, 172, 137, 0.05); }
        .rule-header .arrow { transition: transform 0.3s ease; color: var(--text-muted); font-size: 12px; }
        .rule-header.active .arrow { transform: rotate(180deg); color: var(--primary); }
        .rule-content { max-height: 0; overflow: hidden; transition: max-height 0.4s cubic-bezier(0, 1, 0, 1); background-color: var(--bg-body); border-top: 1px solid var(--border-color); }
        .rule-content.active { max-height: 2000px; padding: 25px; }
        .rule-content label { display: block; margin-bottom: 10px; font-size: 13px; color: var(--text-muted); margin-top: 15px; }
        .rule-content label:first-child { margin-top: 0; }
        .checkbox-label { display: flex; align-items: center; gap: 12px; padding: 12px; background-color: var(--bg-input); border: 1px solid var(--border-color); border-radius: 6px; margin-bottom: 10px; cursor: pointer; transition: border-color 0.2s; }
        .checkbox-label:hover { border-color: var(--primary); }
        .checkbox-label input[type="checkbox"] { accent-color: var(--primary); width: 18px; height: 18px; }
        .link-group { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px; }
        .time-range { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 5px; }
        .time-range small { display: block; margin-bottom: 6px; color: var(--primary); font-weight: 600; font-size: 11px; text-transform: uppercase; }

        @media (max-width: 1200px) { .config-section { grid-template-columns: repeat(2, 1fr); } }
        @media (max-width: 768px) { 
            .config-section { grid-template-columns: 1fr; } 
            .buttons { grid-template-columns: 1fr; gap: 15px; } 
            .link-group { grid-template-columns: 1fr; } 
            .number-grid { overflow-x: auto; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="config-section">
            <div class="field-group">
                <label>Nome do Bot</label>
                <input type="text" id="botName" placeholder="Ex: Bot Premium V1">
            </div>

            <div class="field-group">
                <label>Casa de Aposta</label>
                <select id="bookmaker" onchange="changeBookmaker()">
                    <option value="bet365">Bet365</option>
                    <option value="betano">Betano</option>
                    <option value="kiron">Kiron</option>
                    <option value="estrelabet">EstrelaBet</option>
                </select>
            </div>

            <div class="field-group">
                <label>Modo de Marca√ß√£o</label>
                <select id="markMode">
                    <option value="padrao">Padr√£o</option>
                    <option value="entrada">Entrada</option>
                </select>
            </div>

            <div class="field-group">
                <label>Estrat√©gia / Filtro</label>
                <select id="filter" onchange="updateAssertivity()">
                    <option value="">Selecione um filtro</option>
                    <option value="ambas-sim">Ambas Sim</option>
                    <option value="ambas-nao">Ambas N√£o</option>
                    <option value="casa-vence">Casa Vence</option>
                    <option value="fora-vence">Fora Vence</option>
                    <option value="empate">Empate</option>
                    <option value="over-1.5">Over 1.5</option>
                    <option value="over-2.5">Over 2.5</option>
                    <option value="under-1.5">Under 1.5</option>
                    <option value="under-2.5">Under 2.5</option>
                    <option value="over-3.5">Over 3.5</option>
                    <option value="under-3.5">Under 3.5</option>
                    <option value="over-5">Over 5+</option>
                    <option value="exato-0">0 Gol Exato</option>
                    <option value="exato-1">1 Gol Exato</option>
                    <option value="exato-2">2 Gols Exatos</option>
                    <option value="exato-3">3 Gols Exatos</option>
                    <option value="exato-4">4 Gols Exatos</option>
                </select>
            </div>

            <div class="field-group" style="grid-column: span 2;">
                <label>Ligas de Atua√ß√£o</label>
                <div class="league-header">
                    <span style="font-size: 11px; color: var(--text-muted);" id="leagueCount">0 selecionadas</span>
                    <button onclick="toggleAllLeagues()">Selecionar Todas</button>
                </div>
                <div class="league-checkboxes" id="leagueContainer"></div>
            </div>

            <div class="field-group" style="grid-column: span 2;">
                <label>Chat ID Telegram</label>
                <div class="telegram-container">
                    <div class="telegram-input-group">
                        <input type="text" id="newTelegramId" placeholder="Digite o Chat ID">
                        <button class="btn-add-telegram" onclick="addTelegramId()">+</button>
                    </div>
                    <select id="activeTelegramId">
                        <option value="">Selecione ID ativo</option>
                    </select>
                    <div class="telegram-list" id="telegramList"></div>
                </div>
            </div>

            <div class="buttons">
                <button class="btn btn-clear" onclick="clearAll()">
                    <span>üóëÔ∏è</span>
                    <span>Limpar Tudo</span>
                </button>
                <button class="btn btn-save" onclick="saveConfig()">
                    <span>üíæ</span>
                    <span>Salvar Configura√ß√£o</span>
                </button>
            </div>
        </div>

        <div class="assertivity-container">
            <div class="assertivity-title">
                <span>üìä</span>
                <span>An√°lise de Assertividade do Padr√£o</span>
            </div>
            <div class="assertivity-grid" id="assertivityGrid">
                <!-- Ser√° preenchido dinamicamente -->
            </div>
        </div>

        <div class="table-container">
            <div class="table-title">Mapa de An√°lise</div>
            <div class="number-grid" id="numberGrid"></div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar"></div>
            </div>
        </div>

        <div class="rules-container">
            <div class="rule-item">
                <div class="rule-header" onclick="toggleRule('rule1')">
                    <span>Configura√ß√£o de Exibi√ß√£o</span>
                    <span class="arrow">‚ñº</span>
                </div>
                <div class="rule-content" id="rule1">
                    <label class="checkbox-label">
                        <input type="checkbox" checked> <span>Exibir Greens Seguidos</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" checked> <span>Exibir Estat√≠sticas Completas</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" checked> <span>Exibir Porcentagem de Acertos</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" checked> <span>Exibir Nome do Bot no Cabe√ßalho</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" checked> <span>Exibir Local do Padr√£o</span>
                    </label>
                </div>
            </div>

            <div class="rule-item">
                <div class="rule-header" onclick="toggleRule('rule2')">
                    <span>Links Externos (Bot√µes)</span>
                    <span class="arrow">‚ñº</span>
                </div>
                <div class="rule-content" id="rule2">
                    <div class="link-group">
                        <input type="text" placeholder="Texto do Bot√£o 1">
                        <input type="text" placeholder="URL do Link 1">
                    </div>
                    <div class="link-group">
                        <input type="text" placeholder="Texto do Bot√£o 2">
                        <input type="text" placeholder="URL do Link 2">
                    </div>
                    <div class="link-group">
                        <input type="text" placeholder="Texto do Bot√£o 3">
                        <input type="text" placeholder="URL do Link 3">
                    </div>
                </div>
            </div>

            <div class="rule-item">
                <div class="rule-header" onclick="toggleRule('rule3')">
                    <span>Gerenciamento: Stop Loss</span>
                    <span class="arrow">‚ñº</span>
                </div>
                <div class="rule-content" id="rule3">
                    <label>Total Reds Seguidos para Pausa</label>
                    <input type="number" placeholder="Ex: 3">
                    <label>Tempo de Pausa (Minutos)</label>
                    <input type="number" placeholder="Ex: 60">
                    <label>Mensagem de Aviso Stop Loss</label>
                    <input type="text" placeholder="Ex: Meta de perdas atingida. Voltamos em breve.">
                </div>
            </div>

            <div class="rule-item">
                <div class="rule-header" onclick="toggleRule('rule4')">
                    <span>Gerenciamento: Stop Win</span>
                    <span class="arrow">‚ñº</span>
                </div>
                <div class="rule-content" id="rule4">
                    <label>Total Greens Seguidos para Pausa</label>
                    <input type="number" placeholder="Ex: 10">
                    <label>Tempo de Pausa (Minutos)</label>
                    <input type="number" placeholder="Ex: 30">
                    <label>Mensagem de Aviso Stop Win</label>
                    <input type="text" placeholder="Ex: Meta batida! Pausa estrat√©gica.">
                </div>
            </div>

            <div class="rule-item">
                <div class="rule-header" onclick="toggleRule('rule5')">
                    <span>Hor√°rio de Opera√ß√£o</span>
                    <span class="arrow">‚ñº</span>
                </div>
                <div class="rule-content" id="rule5">
                    <label>Janela de Funcionamento</label>
                    <div class="time-range">
                        <div>
                            <small>In√≠cio</small>
                            <input type="time">
                        </div>
                        <div>
                            <small>Fim</small>
                            <input type="time">
                        </div>
                    </div>
                    <label style="margin-top: 20px;">Limite de Entradas Simult√¢neas</label>
                    <input type="number" placeholder="Ex: 1">
                </div>
            </div>

            <div class="rule-item">
                <div class="rule-header" onclick="toggleRule('rule6')">
                    <span>Customiza√ß√£o da Tip (Mensagem)</span>
                    <span class="arrow">‚ñº</span>
                </div>
                <div class="rule-content" id="rule6">
                    <label>Texto da Tip</label>
                    <input type="text" placeholder="Digite o texto que aparecer√° na mensagem">
                    <label>Link Principal (Opcional)</label>
                    <input type="text" placeholder="https://...">
                    <label>Bot√£o de A√ß√£o R√°pida</label>
                    <div class="link-group">
                        <input type="text" placeholder="Texto: APOSTAR AGORA">
                        <input type="text" placeholder="Link: https://bet365.com">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bot√£o Flutuante -->
    <div class="bots-floating-btn" onclick="toggleBotsModal()">
        <span class="icon">ü§ñ</span>
        <span class="bots-counter" id="botsCounter">0</span>
    </div>

    <!-- Modal de Bots -->
    <div class="bots-modal" id="botsModal" onclick="closeModalOnOutside(event)">
        <div class="bots-modal-content" onclick="event.stopPropagation()">
            <div class="bots-modal-header">
                <div>
                    <div class="bots-modal-title">
                        <span>ü§ñ</span>
                        <span>Meus Bots</span>
                    </div>
                    <div class="bots-limit" id="botsLimit">0/10 bots criados</div>
                </div>
                <button class="close-modal" onclick="toggleBotsModal()">√ó</button>
            </div>
            <div class="bots-modal-body" id="botsModalBody">
                <!-- Ser√° preenchido dinamicamente -->
            </div>
        </div>
    </div>

    <script>
        const numberGrid = document.getElementById('numberGrid');
        const telegramIds = new Set();
        const cellStates = {};
        const savedBots = []; // Array para armazenar bots salvos
        const MAX_BOTS = 10;
        
        const filterAbbreviations = { 
            'ambas-sim': 'AS', 
            'ambas-nao': 'AN', 
            'casa-vence': 'CV', 
            'fora-vence': 'FV', 
            'empate': 'EMP', 
            'over-1.5': 'O1.5', 
            'over-2.5': 'O2.5', 
            'over-3.5': 'O3.5', 
            'under-1.5': 'U1.5', 
            'under-2.5': 'U2.5',
            'under-3.5': 'U3.5',
            'over-5': 'O5+',
            'exato-0': '0G',
            'exato-1': '1G',
            'exato-2': '2G',
            'exato-3': '3G',
            'exato-4': '4G'
        };

        // DADOS DAS LIGAS
        const leaguesData = {
            betano: [
                { name: "Euro Betano", value: "euro.html" },
                { name: "Copa Am√©rica", value: "copa_america.html" },
                { name: "Copa das Estrelas", value: "copa_das_estrelas.html" },
                { name: "Brasileir√£o Betano", value: "brasileirao.html" },
                { name: "Cl√°ssicos da Am√©rica", value: "index.html" },
                { name: "Campeonato Italiano", value: "campeonato_italiano.html" }
            ],
            bet365: [
                { name: "Copa do Mundo", value: "bet365copa.html" },
                { name: "Premier League", value: "bet365premier.html" },
                { name: "Super Liga", value: "bet365super.html" },
                { name: "Euro Cup", value: "bet365euro.html" }
            ],
            kiron: [
                { name: "England", value: "kironengland.html" },
                { name: "Italy", value: "kironitaly.html" },
                { name: "Spain", value: "kironspain.html" }
            ],
            estrelabet: [
                { name: "Ligas dos Campe√µes", value: "https://www.betstat.site/estrelachampions.html" },
                { name: "Copa do Mundo", value: "https://www.betstat.site/estrelacopamundo.html" },
                { name: "Am√©rica Latina", value: "https://www.betstat.site/estrelaamericalatina.html" }
            ]
        };

        function toggleRule(id) {
            const content = document.getElementById(id);
            const header = content.previousElementSibling;
            header.classList.toggle('active');
            content.classList.toggle('active');
        }

        // GERA√á√ÉO DO GRID
        for (let i = 0; i <= 299; i++) {
            const cell = document.createElement('div');
            cell.className = 'number-cell';
            cell.textContent = i;
            cell.dataset.number = i;
            cell.onclick = () => toggleNumber(i, cell);
            numberGrid.appendChild(cell);
            cellStates[i] = { filter: null, entryConfirmed: false };
        }

        // FUN√á√ÉO QUE DETECTA MUDAN√áA NA CASA DE APOSTA
        function changeBookmaker() {
            const selectedBookmaker = document.getElementById('bookmaker').value;
            const leagueContainer = document.getElementById('leagueContainer');
            const grid = document.getElementById('numberGrid');

            // 1. ATUALIZAR GRID (Kiron = 30 colunas, Outras = 20)
            if (selectedBookmaker === 'kiron') {
                grid.style.gridTemplateColumns = 'repeat(30, 1fr)';
            } else {
                grid.style.gridTemplateColumns = 'repeat(20, 1fr)';
            }

            // 2. ATUALIZAR LIGAS
            leagueContainer.innerHTML = '';
            
            const leagues = leaguesData[selectedBookmaker] || [];
            
            if (leagues.length === 0) {
                leagueContainer.innerHTML = '<span style="color:var(--text-muted); font-size:13px;">Nenhuma liga dispon√≠vel.</span>';
                updateLeagueCount();
                return;
            }

            leagues.forEach(league => {
                const item = document.createElement('div');
                item.className = 'checkbox-item';
                item.innerHTML = `
                    <input type="checkbox" id="${league.value}" value="${league.value}" onchange="updateLeagueCount()">
                    <label for="${league.value}">${league.name}</label>
                `;
                leagueContainer.appendChild(item);
                item.querySelector('input').addEventListener('change', updateAssertivity);
            });
            
            updateLeagueCount();
        }

        // FUN√á√ÉO PARA SELECIONAR/DESMARCAR TODAS AS LIGAS
        function toggleAllLeagues() {
            const checkboxes = document.querySelectorAll('#leagueContainer input[type="checkbox"]');
            const allChecked = Array.from(checkboxes).every(cb => cb.checked);
            
            checkboxes.forEach(cb => {
                cb.checked = !allChecked;
            });
            
            updateLeagueCount();
        }

        // ATUALIZAR CONTADOR DE LIGAS SELECIONADAS
        function updateLeagueCount() {
            const checkedCount = document.querySelectorAll('#leagueContainer input[type="checkbox"]:checked').length;
            const totalCount = document.querySelectorAll('#leagueContainer input[type="checkbox"]').length;
            const countElement = document.getElementById('leagueCount');
            countElement.textContent = `${checkedCount} de ${totalCount} selecionadas`;
        }

        function toggleNumber(num, cell) {
            const selectedFilter = document.getElementById('filter').value;
            const markMode = document.getElementById('markMode').value;
            if (!selectedFilter) { alert('Por favor, selecione uma estrat√©gia no filtro primeiro.'); return; }
            
            const state = cellStates[num];
            cell.innerHTML = num;

            // Se j√° est√° marcado, desmarca
            if (state.filter) {
                state.filter = null;
                state.entryConfirmed = false;
                cell.className = 'number-cell';
            } else {
                // Se n√£o est√° marcado, marca com a cor do modo selecionado
                state.filter = selectedFilter;
                
                if (markMode === 'padrao') {
                    // Modo Padr√£o = Azul
                    state.entryConfirmed = false;
                    cell.className = 'number-cell filter-selected';
                } else {
                    // Modo Entrada = Verde
                    state.entryConfirmed = true;
                    cell.className = 'number-cell entry-confirmed';
                }
                
                addLabel(cell, selectedFilter);
            }
            
            updateProgress();
        }

        function addLabel(cell, filter) {
            const label = document.createElement('span');
            label.className = 'filter-label';
            label.textContent = filterAbbreviations[filter];
            cell.appendChild(label);
        }

        function updateProgress() {
            const total = Object.values(cellStates).filter(s => s.filter !== null).length;
            const progress = (total / 300) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }

        function addTelegramId() {
            const input = document.getElementById('newTelegramId');
            const id = input.value.trim();
            if (!id) return alert('Digite um Chat ID v√°lido!');
            if (telegramIds.has(id)) return alert('Este Chat ID j√° existe!');
            telegramIds.add(id);
            input.value = '';
            renderTelegramList();
            updateActiveTelegramSelect();
        }

        function removeTelegramId(id) {
            telegramIds.delete(id);
            const activeSelect = document.getElementById('activeTelegramId');
            if (activeSelect.value === id) activeSelect.value = '';
            renderTelegramList();
            updateActiveTelegramSelect();
        }

        function updateActiveTelegramSelect() {
            const select = document.getElementById('activeTelegramId');
            const currentValue = select.value;
            select.innerHTML = '<option value="">Selecione ID ativo</option>';
            telegramIds.forEach(id => {
                const option = document.createElement('option');
                option.value = id;
                option.textContent = id;
                select.appendChild(option);
            });
            if (telegramIds.has(currentValue)) select.value = currentValue;
        }

        function renderTelegramList() {
            const list = document.getElementById('telegramList');
            list.innerHTML = '';
            telegramIds.forEach(id => {
                const item = document.createElement('div');
                item.className = 'telegram-item';
                item.innerHTML = `<span>${id}</span><button class="btn-remove" onclick="removeTelegramId('${id}')">Excluir</button>`;
                list.appendChild(item);
            });
        }

        function saveConfig() {
            const bookmaker = document.getElementById('bookmaker').value;
            const botName = document.getElementById('botName').value.trim();
            const markMode = document.getElementById('markMode').value;
            const filter = document.getElementById('filter').value;
            
            if (!botName) {
                alert('Por favor, digite um nome para o bot!');
                return;
            }
            
            if (savedBots.length >= MAX_BOTS && !window.editingBotIndex) {
                alert(`Voc√™ atingiu o limite de ${MAX_BOTS} bots!`);
                return;
            }

            const btn = document.querySelector('.btn-save');
            const originalText = btn.innerHTML;
            
            // Coletar ligas selecionadas
            const selectedLeagues = [];
            document.querySelectorAll('#leagueContainer input[type="checkbox"]:checked').forEach(cb => {
                selectedLeagues.push(cb.value);
            });

            // Salvar estado do grid
            const gridState = {};
            Object.keys(cellStates).forEach(key => {
                if (cellStates[key].filter) {
                    gridState[key] = { ...cellStates[key] };
                }
            });

            // Criar objeto do bot
            const botData = {
                id: window.editingBotIndex !== undefined ? savedBots[window.editingBotIndex].id : Date.now(),
                name: botName,
                bookmaker: bookmaker,
                markMode: markMode,
                filter: filter,
                selectedLeagues: selectedLeagues,
                leagues: selectedLeagues.length,
                status: window.editingBotIndex !== undefined ? savedBots[window.editingBotIndex].status : 'active',
                gridState: gridState,
                createdAt: window.editingBotIndex !== undefined ? savedBots[window.editingBotIndex].createdAt : new Date().toISOString()
            };

            btn.innerHTML = '<span>üíæ</span><span>Salvando...</span>';
            
            setTimeout(() => {
                if (window.editingBotIndex !== undefined) {
                    // Atualizar bot existente
                    savedBots[window.editingBotIndex] = botData;
                    alert(`‚úÖ Bot "${botName}" atualizado com sucesso!`);
                    window.editingBotIndex = undefined;
                } else {
                    // Criar novo bot
                    savedBots.push(botData);
                    alert(`‚úÖ Bot "${botName}" salvo com sucesso!\n\nCasa: ${bookmaker.toUpperCase()}\nLigas: ${selectedLeagues.length}\nTotal de bots: ${savedBots.length}/${MAX_BOTS}`);
                }
                
                btn.innerHTML = originalText;
                renderBotsList();
                clearFormAfterSave();
            }, 800);
        }

        function clearFormAfterSave() {
            // Limpar flag de edi√ß√£o
            window.editingBotIndex = undefined;
            
            // Limpa campos de configura√ß√£o
            document.getElementById('botName').value = '';
            document.getElementById('bookmaker').value = 'bet365';
            document.getElementById('markMode').value = 'padrao';
            document.getElementById('filter').value = '';
            
            // Limpa o grid de n√∫meros
            document.querySelectorAll('.number-cell').forEach(cell => {
                cell.className = 'number-cell';
                cell.innerHTML = cell.dataset.number;
            });
            Object.keys(cellStates).forEach(key => {
                cellStates[key] = { filter: null, entryConfirmed: false };
            });
            
            // Limpa as checkboxes de ligas
            document.querySelectorAll('#leagueContainer input[type="checkbox"]').forEach(cb => cb.checked = false);
            updateLeagueCount();
            
            // Limpa IDs do Telegram
            document.getElementById('newTelegramId').value = '';
            document.getElementById('activeTelegramId').value = '';
            
            // Atualiza visualiza√ß√µes
            changeBookmaker();
            updateProgress();
            updateAssertivity();
        }

        function clearAll() {
            if(!confirm('Tem certeza que deseja limpar as configura√ß√µes atuais?\n\n(Os bots salvos n√£o ser√£o afetados)')) return;
            
            // Limpar flag de edi√ß√£o se estiver editando
            window.editingBotIndex = undefined;
            
            // Limpa campos de configura√ß√£o
            document.getElementById('botName').value = '';
            document.getElementById('bookmaker').value = 'bet365';
            document.getElementById('markMode').value = 'padrao';
            document.getElementById('filter').value = '';
            
            // Limpa o grid de n√∫meros
            document.querySelectorAll('.number-cell').forEach(cell => {
                cell.className = 'number-cell';
                cell.innerHTML = cell.dataset.number;
            });
            Object.keys(cellStates).forEach(key => {
                cellStates[key] = { filter: null, entryConfirmed: false };
            });
            
            // Limpa as checkboxes de ligas
            document.querySelectorAll('#leagueContainer input[type="checkbox"]').forEach(cb => cb.checked = false);
            updateLeagueCount();
            
            // Limpa IDs do Telegram
            document.getElementById('newTelegramId').value = '';
            document.getElementById('activeTelegramId').value = '';
            
            // Atualiza visualiza√ß√µes
            changeBookmaker();
            updateProgress();
            updateAssertivity();
            
            alert('‚úÖ Configura√ß√µes limpas!\n\nVoc√™ pode configurar um novo bot.');
        }

        // AN√ÅLISE DE ASSERTIVIDADE
        function updateAssertivity() {
            const grid = document.getElementById('assertivityGrid');
            const selectedFilter = document.getElementById('filter').value;
            
            if (!selectedFilter) {
                grid.innerHTML = '<p style="text-align: center; color: var(--text-muted); grid-column: 1/-1; padding: 20px;">Selecione um filtro para ver a an√°lise de assertividade</p>';
                return;
            }

            // Dados simulados (voc√™ pode substituir por dados reais depois)
            const periods = [
                { label: '6 Horas', hours: 6, green: 12, red: 3 },
                { label: '12 Horas', hours: 12, green: 24, red: 8 },
                { label: '24 Horas', hours: 24, green: 45, red: 15 },
                { label: '48 Horas', hours: 48, green: 88, red: 32 },
                { label: '72 Horas', hours: 72, green: 125, red: 50 }
            ];

            grid.innerHTML = periods.map(period => {
                const total = period.green + period.red;
                const percentage = ((period.green / total) * 100).toFixed(1);
                const isPositive = percentage >= 70;
                
                return `
                    <div class="assertivity-card">
                        <div class="assertivity-period">${period.label}</div>
                        <div class="assertivity-value ${isPositive ? 'positive' : 'negative'}">
                            ${percentage}%
                        </div>
                        <div class="assertivity-stats">
                            <div class="stat-item">
                                <span class="stat-label">Green</span>
                                <span class="stat-value green">${period.green}</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Red</span>
                                <span class="stat-value red">${period.red}</span>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // MODAL DE BOTS
        function toggleBotsModal() {
            const modal = document.getElementById('botsModal');
            modal.classList.toggle('active');
            if (modal.classList.contains('active')) {
                renderBotsList();
            }
        }

        function closeModalOnOutside(event) {
            if (event.target.id === 'botsModal') {
                toggleBotsModal();
            }
        }

        function renderBotsList() {
            const body = document.getElementById('botsModalBody');
            const counter = document.getElementById('botsCounter');
            const limit = document.getElementById('botsLimit');
            
            counter.textContent = savedBots.length;
            limit.textContent = `${savedBots.length}/${MAX_BOTS} bots criados`;

            if (savedBots.length === 0) {
                body.innerHTML = `
                    <div class="empty-bots">
                        <div class="empty-bots-icon">ü§ñ</div>
                        <div class="empty-bots-text">Nenhum bot criado ainda</div>
                        <p style="font-size: 13px;">Configure e salve seu primeiro bot!</p>
                    </div>
                `;
                return;
            }

            body.innerHTML = savedBots.map((bot, index) => `
                <div class="bot-item">
                    <div class="bot-header">
                        <div class="bot-name">
                            <span>${bot.status === 'active' ? 'üü¢' : '‚è∏Ô∏è'}</span>
                            <span>${bot.name}</span>
                        </div>
                        <span class="bot-status ${bot.status}">${bot.status === 'active' ? 'Ativo' : 'Pausado'}</span>
                    </div>
                    <div class="bot-info">
                        <div class="bot-info-item">
                            <div class="bot-info-label">Casa</div>
                            <div class="bot-info-value">${bot.bookmaker.toUpperCase()}</div>
                        </div>
                        <div class="bot-info-item">
                            <div class="bot-info-label">Ligas</div>
                            <div class="bot-info-value">${bot.leagues}</div>
                        </div>
                        <div class="bot-info-item">
                            <div class="bot-info-label">Modo</div>
                            <div class="bot-info-value">${bot.markMode === 'padrao' ? 'Padr√£o' : 'Entrada'}</div>
                        </div>
                    </div>
                    <div class="bot-actions">
                        <button class="bot-action-btn btn-edit" onclick="editBot(${index})">
                            <span>‚úèÔ∏è</span>
                            <span>Editar</span>
                        </button>
                        <button class="bot-action-btn btn-pause" onclick="toggleBotStatus(${index})">
                            <span>${bot.status === 'active' ? '‚è∏Ô∏è' : '‚ñ∂Ô∏è'}</span>
                            <span>${bot.status === 'active' ? 'Pausar' : 'Ativar'}</span>
                        </button>
                        <button class="bot-action-btn btn-delete" onclick="deleteBot(${index})">
                            <span>üóëÔ∏è</span>
                            <span>Excluir</span>
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function editBot(index) {
            const bot = savedBots[index];
            
            // Marcar que estamos editando
            window.editingBotIndex = index;
            
            // Carregar dados b√°sicos do bot
            document.getElementById('botName').value = bot.name;
            document.getElementById('bookmaker').value = bot.bookmaker;
            document.getElementById('markMode').value = bot.markMode;
            document.getElementById('filter').value = bot.filter;
            
            // Atualizar casa de aposta para carregar ligas corretas
            changeBookmaker();
            
            // Aguardar um momento para as ligas serem carregadas
            setTimeout(() => {
                // Marcar ligas selecionadas
                bot.selectedLeagues.forEach(league => {
                    const checkbox = document.getElementById(league);
                    if (checkbox) checkbox.checked = true;
                });
                updateLeagueCount();
                
                // Restaurar o grid de n√∫meros
                if (bot.gridState) {
                    // Limpar grid primeiro
                    document.querySelectorAll('.number-cell').forEach(cell => {
                        cell.className = 'number-cell';
                        cell.innerHTML = cell.dataset.number;
                    });
                    Object.keys(cellStates).forEach(key => {
                        cellStates[key] = { filter: null, entryConfirmed: false };
                    });
                    
                    // Restaurar marca√ß√µes
                    Object.keys(bot.gridState).forEach(cellNum => {
                        const state = bot.gridState[cellNum];
                        cellStates[cellNum] = { ...state };
                        
                        const cell = document.querySelector(`[data-number="${cellNum}"]`);
                        if (cell) {
                            cell.innerHTML = cellNum;
                            if (state.entryConfirmed) {
                                cell.className = 'number-cell entry-confirmed';
                            } else {
                                cell.className = 'number-cell filter-selected';
                            }
                            addLabel(cell, state.filter);
                        }
                    });
                    
                    updateProgress();
                }
                
                updateAssertivity();
                
                // Fechar modal
                toggleBotsModal();
                
                // Scroll para o topo
                window.scrollTo({ top: 0, behavior: 'smooth' });
                
                alert(`üìù Editando bot "${bot.name}"\n\nFa√ßa as altera√ß√µes e clique em Salvar.`);
            }, 100);
        }

        function toggleBotStatus(index) {
            savedBots[index].status = savedBots[index].status === 'active' ? 'paused' : 'active';
            renderBotsList();
        }

        function deleteBot(index) {
            if (!confirm(`Tem certeza que deseja excluir o bot "${savedBots[index].name}"?`)) return;
            savedBots.splice(index, 1);
            renderBotsList();
        }

        // Inicializar com a primeira op√ß√£o (Bet365) ao carregar a p√°gina
        window.onload = function() {
            changeBookmaker();
            updateAssertivity();
            renderBotsList();
        };
    </script>
</body>
</html>