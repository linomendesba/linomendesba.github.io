<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="img/favicon.ico" type="image/x-icon" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-4WT805FFHQ"
    ></script>
    <title>BetStat</title>
    <!-- Meta tags SEO principais -->
    <meta
      name="description"
      content="Transforme suas apostas com BetStat - a única plataforma especializada em futebol virtual Betano. Análises precisas, estatísticas confiáveis e resultados comprovados para investimentos inteligentes."
    />
    <meta
      name="keywords"
      content="BetStat, apostas esportivas, futebol virtual, Betano, estatísticas apostas, análise apostas, investimentos esportivos"
    />

    <!-- Open Graph meta tags para redes sociais -->
    <meta
      property="og:title"
      content="BetStat | Plataforma de Análise para Apostas Esportivas"
    />
    <meta
      property="og:description"
      content="Transforme suas apostas com análises precisas e estatísticas confiáveis. A única plataforma especializada em futebol virtual Betano."
    />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://www.betstat.site/payment.html" />
    <meta property="og:site_name" content="BetStat" />

    <!-- Meta tags adicionais -->
    <meta name="robots" content="index, follow" />
    <meta name="author" content="BetStat" />
    <meta name="canonical" href="https://www.betstat.site/payment.html" />
    <script type="module" src="js/firebase-auth.js"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-4WT805FFHQ");
    </script>
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap"
      rel="stylesheet"
    />
  </head>

  <style>
        body {
      font-family: "Roboto", Arial, sans-serif;
      margin: 30px;
      background-color: #1c1f26;
      color: #ffffff;
    }
    .logo2 {
  width: 60px;      /* define a largura fixa */
  height: auto;     /* mantém a proporção da imagem */
}

    option:hover {
      background-color: #ff8000;
      color: #ffffff;
    }

    .espaco {
  width: 50px;  /* Largura da div */
  height: 50px;  /* Altura da div */
}


    .logout-btn {
      background-color: #1c1f26; /* Fundo vermelho */
      color: white; /* Texto branco */
      padding: 8px 10px; /* Espaçamento interno */
      font-size: 14px; /* Tamanho da fonte */
      border-radius: 5px; /* Cantos arredondados */
      cursor: pointer; /* Cursor de botão */
      border: 1px solid var(--border-color);
    }

    .logout-btn:hover {
      background-color: #720000; /* Cor ao passar o mouse */
    }

    button {
      background-color: #1c1f26;
      color: rgb(255, 255, 255);
      font-family: "Roboto", Arial, sans-serif;
      border: none;
      padding: 5px 8px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      transition: background-color 0.3s;
      margin: 10px;
    }

    button:hover {
      background-color: #0f1013;
    }

    option {
      background-color: #1c1f26;
      color: #ffffff;
    }

    select {
      width: 100%;
      padding: 5px;
      border-radius: 5px;
      background-color: #242526;
      color: #ffffff;
      font-family: "Roboto", Arial, sans-serif;
      font-size: 14px;
      cursor: pointer;
      transition: border-color 0.3s;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    header {
        background: #005540;
      width: 100vw;
      width: 100%;
      position: fixed;
      top: 0;
      left: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      height: 60px;
    }

    .header-container {
      display: flex;
      align-items: center;
      width: 100%;
      max-width: 1200px;
      padding: 0 20px;
      justify-content: space-between;
      gap: 20px
    }

    .logo {
      height: 40px;
    }

    .selectors-container {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .nav-seletor {
      display: flex;
      align-items: center;
      color: #ffffff;
      font-weight: 500;
    }

    .nav-seletor select {
      padding: 0.5rem ;
      border-radius: 6px;
      background-color: #1c1f26;
      color: var(--text-color);
      border: 1px solid #ffffff9f;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    :root {
            --background-color: #1c1f26;
            --primary-color: #252830;
            --secondary-color: #2f323a;
            --accent-color: #1fad8b;
            --text-color: #d5d7db;
            --table-header: #2f323a;
            --border-color: #3a3e47;
            --tooltip-bg: #333842;
            --tooltip-text: #e0e2e6;
            --percentage-green: #1fad8b;
            --percentage-yellow: #f1c40f;
            --percentage-orange: #e67e22;
            --percentage-red: #e74c3c;
        }


        .container {
            max-width: 1800px;
            width: 100%;
        }

        .filters {
            background: var(--primary-color);
            padding: 1.5rem;
            border-radius: 8px;
            display: flex;
            flex-wrap: wrap;
            gap: 1.5rem;
            justify-content: center;
            margin-bottom: 2rem;
            border: 1px solid var(--border-color);
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        label {
            margin-bottom: 0.5rem;
            color: var(--accent-color);
            font-weight: 500;
            font-size: 0.95rem;
        }


        .custom-button {
            padding: 0.6rem 1.2rem;
            border: 1px solid var(--accent-color);
            border-radius: 6px;
            background: var(--accent-color);
            color: #fff;
            font-size: 0.95rem;
            font-weight: 500;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .custom-button:hover {
            background: transparent;
            color: var(--accent-color);
        }

        .custom-button:active {
            transform: translateY(1px);
        }

        .current-percentage-container {
            background: var(--primary-color);
            border: 1px solid var(--accent-color);
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
            margin: 1.5rem 0;
            font-size: 1.2rem;
            color: var(--accent-color);
            font-weight: 500;
            position: relative;
            overflow: hidden;
        }

        .current-percentage-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(31, 173, 139, 0.1), transparent);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: var(--primary-color);
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid var(--border-color);
        }

        th, td {
            padding: 0.8rem 1rem;
            text-align: left;
            font-size: 0.9rem;
        }

        th {
            background-color: var(--table-header);
            color: var(--accent-color);
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.85rem;
            letter-spacing: 0.5px;
        }

        tr {
            border-bottom: 1px solid var(--border-color);
            transition: background 0.3s ease;
            cursor: pointer;
        }

        tr:last-child {
            border-bottom: none;
        }

        tr:hover {
            background: var(--secondary-color);
        }

        .percentage-green { color: var(--percentage-green); }
        .percentage-yellow { color: var(--percentage-yellow); }
        .percentage-orange { color: var(--percentage-orange); }
        .percentage-red { color: var(--percentage-red); }

        /* Tooltip será gerenciado via JavaScript, então removemos os estilos CSS */
        .tooltip {
            position: relative;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 600px) {
            .filters {
                flex-direction: column;
                align-items: stretch;
                gap: 1rem;
            }

            select {
                width: 100%;
            }

            .filter-group {
                align-items: stretch;
            }

            th, td {
                padding: 0.6rem;
                font-size: 0.85rem;
            }

            .current-percentage-container {
                font-size: 1rem;
                padding: 0.8rem;
            }
        }


  </style>

  <body>
    <body>
        <div id="header"></div>

        <br>
        <br>
        <br>
        <br>
        
        <div class="container">
            <div class="filters">
                <div class="filter-group">
                    <label for="selectedLeague">Liga</label>
                    <select id="selectedLeague">
                        <option value="all">Todas as Ligas</option>
                        <option value="Copa%20Am%C3%A9rica">Copa América</option>
                        <option value="Ta%C3%A7a%20Gl%C3%B3ria%20eterna">Taça Glória Eterna </option>
                        <option value="Euro">Euro</option>
                        <option value="Campeonato%20Italiano">Campeonato Italiano</option>
                        <option value="Copa%20das%20estrelas">Copa das Estrelas</option> <!-- Nova liga adicionada -->
                        <option value="Brasileir%C3%A3o%20Betano">Brasileirão Betano </option> <!-- Nova liga adicionada -->
                    </select>
                </div>
                <div class="filter-group">
                    <label for="searchedMarket">Mercado</label>
                    <select id="searchedMarket">
                        <option value="ambasSim">Ambas Sim</option>
                        <option value="ambasNao">Ambas Não</option>
                        <option value="casaVence">Casa Vence</option>
                        <option value="foraVence">Fora Vence</option>
                        <option value="over1.5">Over 1.5</option>
                        <option value="over2.5">Over 2.5</option>
                        <option value="over3.5">Over 3.5</option>
                        <option value="under1.5">Under 1.5</option>
                        <option value="under2.5">Under 2.5</option>
                        <option value="under3.5">Under 3.5</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="timeRange">Horas</label>
                    <select id="timeRange">
                        <option value="3" data-games="60">3 Horas</option>
                        <option value="6" data-games="120" selected>6 Horas</option>
                        <option value="12" data-games="240">12 Horas</option>
                        <option value="24" data-games="480">24 Horas</option>
                        <option value="48" data-games="960">48 Horas</option>
                        <option value="72" data-games="1444">72 Horas</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="linesToSum">Base</label>
                    <select id="linesToSum">
                        <option value="20">20</option>
                        <option value="40">40</option>
                        <option value="60">60</option>
                        <option value="80">80</option>
                        <option value="100">100</option>
                        <option value="120">120</option>
                        <option value="140">140</option>
                        <option value="160">160</option>
                        <option value="180">180</option>
                        <option value="200">200</option>
                        <option value="220">220</option>
                        <option value="240">240</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="verifyLines">Gales</label>
                    <select id="verifyLines">
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3" selected>3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="toggleTeamsBtn"></label>
                    <button id="toggleTeamsBtn" onclick="calculateOccurrencesAndRank()" class="custom-button">
                        Buscar %
                    </button>
                </div>
            </div>
    
            <div id="currentPercentage" class="current-percentage-container"></div>
            <table id="rankingTable">
                <thead>
                    <tr>
                        <th onclick="sortTable(0)">Mercado</th>
                        <th onclick="sortTable(1)">Ocorrências</th>
                        <th onclick="sortTable(2)">Greens</th>
                        <th onclick="sortTable(3)">Green %</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>

    <script>
                const leagues = [
                'Copa%20Am%C3%A9rica',
                'Ta%C3%A7a%20Gl%C3%B3ria%20eterna',
                'Euro',
                'Campeonato%20Italiano',
                'Copa%20das%20estrelas',
                'British%20Derbies',
                'Liga%20Espanhola',
                'Scudetto%20Italiano'
                ];

                const apiBaseUrl = 'https://betstat.site/resultados';

        let currentRankingData = [];
        let autoUpdateInterval = null;

        function parseApiData(data, league) {
            return data.map(item => {
                const [homeGoals, awayGoals] = item.ft.split(' x ').map(Number);
                const totalGoals = homeGoals + awayGoals;
                const time = `${item.hora.toString().padStart(2, '0')}:${item.minuto.toString().padStart(2, '0')}`;
                return {
                    league: league.toLowerCase(),
                    homeGoals,
                    awayGoals,
                    homeTeam: item.time_a,
                    awayTeam: item.time_b,
                    totalGoals,
                    marketGoals: totalGoals,
                    time
                };
            });
        }

        function formatMarketName(market) {
            switch (market) {
                case 'ambasSim': return 'Ambas Sim';
                case 'ambasNao': return 'Ambas Não';
                case 'casaVence': return 'Casa Vence';
                case 'foraVence': return 'Fora Vence';
                case 'empate': return 'Empate';
                case 'over1.5': return 'Over 1.5';
                case 'over2.5': return 'Over 2.5';
                case 'over3.5': return 'Over 3.5';
                case 'under1.5': return 'Under 1.5';
                case 'under2.5': return 'Under 2.5';
                case 'under3.5': return 'Under 3.5';
                case 'umGolExato': return '1 Gol Exato';
                case 'doisGolsExatos': return '2 Gols Exatos';
                case 'tresGolsExatos': return '3 Gols Exatos';
                case 'quatroGolsExatos': return '4 Gols Exatos';
                case 'cincoOuMaisGols': return '5 ou Mais Gols';
                default: return market;
            }
        }

        function checkMarket(market, homeGoals, awayGoals, totalGoals) {
            switch (market) {
                case 'ambasSim':
                    return homeGoals > 0 && awayGoals > 0 ? 1 : 0;
                case 'ambasNao':
                    return homeGoals === 0 || awayGoals === 0 ? 1 : 0;
                case 'casaVence':
                    return homeGoals > awayGoals ? 1 : 0;
                case 'foraVence':
                    return awayGoals > homeGoals ? 1 : 0;
                case 'empate':
                    return homeGoals === awayGoals ? 1 : 0;
                case 'over1.5':
                    return totalGoals > 1.5 ? 1 : 0;
                case 'over2.5':
                    return totalGoals > 2.5 ? 1 : 0;
                case 'over3.5':
                    return totalGoals > 3.5 ? 1 : 0;
                case 'under1.5':
                    return totalGoals < 1.5 ? 1 : 0;
                case 'under2.5':
                    return totalGoals < 2.5 ? 1 : 0;
                case 'under3.5':
                    return totalGoals < 3.5 ? 1 : 0;
                case 'umGolExato':
                    return totalGoals === 1 ? 1 : 0;
                case 'doisGolsExatos':
                    return totalGoals === 2 ? 1 : 0;
                case 'tresGolsExatos':
                    return totalGoals === 3 ? 1 : 0;
                case 'quatroGolsExatos':
                    return totalGoals === 4 ? 1 : 0;
                case 'cincoOuMaisGols':
                    return totalGoals >= 5 ? 1 : 0;
                default:
                    return 0;
            }
        }

        function getPercentageClass(percentage) {
            percentage = parseFloat(percentage);
            if (percentage >= 75) return 'percentage-green';
            if (percentage >= 50) return 'percentage-yellow';
            if (percentage >= 25) return 'percentage-orange';
            return 'percentage-red';
        }

        async function calculateOccurrencesAndRank(autoUpdate = false) {
            const selectedLeague = document.getElementById("selectedLeague").value;
            const searchedMarket = document.getElementById("searchedMarket").value;
            const timeRange = document.getElementById("timeRange");
            const numberOfGames = parseInt(timeRange.options[timeRange.selectedIndex].getAttribute('data-games')); // Obter o número de jogos com base na seleção de horas
            const linesToSum = parseInt(document.getElementById("linesToSum").value);
            const verifyLines = parseInt(document.getElementById("verifyLines").value);

            const tbodyRanking = document.getElementById("rankingTable").getElementsByTagName("tbody")[0];
            const currentPercentageDiv = document.getElementById("currentPercentage");

            let combinedData = [];

            // Filtrar ligas com base na seleção do usuário
            const leaguesToFetch = selectedLeague === 'all' ? leagues : [selectedLeague];

            for (const league of leaguesToFetch) {
                try {
                    const response = await fetch(`${apiBaseUrl}/${league}`);
                    if (!response.ok) {
                        throw new Error(`Erro HTTP: ${response.status} ${response.statusText}`);
                    }
                    const data = await response.json();
                    console.log(`Dados recebidos para ${league}:`, data);
                    if (data.length === 0) {
                        console.warn(`Nenhum dado retornado para a liga ${league}`);
                        continue;
                    }
                    const parsedData = parseApiData(data, league).slice(-numberOfGames);
                    combinedData = combinedData.concat(parsedData.map(item => [
                        item.time,
                        item.homeGoals,
                        item.awayGoals,
                        item.homeTeam,
                        item.awayTeam,
                        item.totalGoals,
                        item.league
                    ]));
                } catch (error) {
                    console.error(`Erro ao buscar dados da liga ${league}:`, error);
                }
            }

            console.log("Dados combinados:", combinedData);

            if (combinedData.length === 0) {
                if (!autoUpdate) {
                    alert("Nenhum dado disponível para processar. Verifique se a API está funcionando e retornando dados.");
                }
                return;
            }

            // Calcular a porcentagem atual do mercado selecionado (baseado nos últimos jogos)
            const recentGames = combinedData.slice(-linesToSum);
            const currentMarketCount = recentGames.reduce((sum, row) => sum + checkMarket(searchedMarket, row[1], row[2], row[5]), 0);
            const currentPercentage = (currentMarketCount / linesToSum * 100).toFixed(0);
            currentPercentageDiv.textContent = `Porcentagem Atual: ${formatMarketName(searchedMarket)} ${currentPercentage}%`;

            // Calcular o ranking
            const marketGroups = {};
            combinedData.forEach((row, i) => {
                const [dateTime, homeGoals, awayGoals, homeTeam, awayTeam, totalGoals, league] = row;

                if (i >= linesToSum - 1) {
                    const sumMarket = combinedData.slice(i - linesToSum + 1, i + 1).reduce((sum, row) => sum + checkMarket(searchedMarket, row[1], row[2], row[5]), 0);
                    const marketPercentage = Math.round(sumMarket / linesToSum * 100);

                    let result = "red";
                    let greens = 0;
                    let reds = 0;
                    if (i + verifyLines <= combinedData.length) {
                        const nextRows = combinedData.slice(i + 1, i + 1 + verifyLines);
                        greens = nextRows.filter(row => checkMarket(searchedMarket, row[1], row[2], row[5]) === 1).length;
                        reds = verifyLines - greens;
                        const searchResult = nextRows.some(row => checkMarket(searchedMarket, row[1], row[2], row[5]) === 1);
                        if (searchResult) {
                            result = "green";
                        }
                    }

                    const marketGroup = `${formatMarketName(searchedMarket)} ${marketPercentage}%`;
                    if (!marketGroups[marketGroup]) {
                        marketGroups[marketGroup] = { occurrences: 0, greens: 0, reds: 0, totalGreens: greens, totalReds: reds };
                    }
                    marketGroups[marketGroup].occurrences += 1;
                    if (result === "green") {
                        marketGroups[marketGroup].greens += 1;
                    } else {
                        marketGroups[marketGroup].reds += 1;
                    }
                    marketGroups[marketGroup].totalGreens = greens;
                    marketGroups[marketGroup].totalReds = reds;
                }
            });

            const sortedGroups = Object.keys(marketGroups).map(key => {
                const group = marketGroups[key];
                const greenPercentage = (group.greens / group.occurrences * 100).toFixed(2);
                let analysis = '';
                const percentageNum = parseFloat(greenPercentage);
                if (percentageNum > 75) {
                    analysis = 'Alta chance de acerto';
                } else if (percentageNum > 50) {
                    analysis = 'Moderada chance';
                } else if (percentageNum > 25) {
                    analysis = 'Risco elevado';
                } else {
                    analysis = 'Alta chance de falha';
                }

                return {
                    marketGroup: key,
                    marketPercentage: parseFloat(key.split(' ')[2]),
                    occurrences: group.occurrences,
                    greens: group.greens,
                    reds: group.reds,
                    greenPercentage: greenPercentage,
                    totalGreens: group.totalGreens,
                    totalReds: group.totalReds,
                    analysis: analysis
                };
            }).sort((a, b) => b.greenPercentage - a.greenPercentage || b.greens - a.greens).slice(0, 100);

            currentRankingData = sortedGroups;

            // Atualizar a tabela dinamicamente
            if (tbodyRanking.rows.length === 0) {
                // Primeira vez: criar as linhas
                sortedGroups.forEach(group => {
                    const row = tbodyRanking.insertRow();
                    const marketCell = row.insertCell(0);
                    marketCell.innerHTML = `${group.marketGroup.split(' ').slice(0, 2).join(' ')} <span class="${getPercentageClass(group.marketPercentage)}">${group.marketPercentage}%</span>`;
                    row.insertCell(1).textContent = group.occurrences;
                    row.insertCell(2).textContent = group.greens;
                    const greenPercentageCell = row.insertCell(3);
                    greenPercentageCell.className = 'tooltip';
                    greenPercentageCell.textContent = group.greenPercentage + '%';
                    greenPercentageCell.setAttribute('data-tooltip',
                        `${group.marketGroup}\n` +
                        `Ocorrências: ${group.occurrences}\n` +
                        `Greens: ${group.greens}\n` +
                        `Reds: ${group.reds}\n` +
                        `Últimos ${verifyLines} jogos:\n` +
                        `Greens: ${group.totalGreens}, Reds: ${group.totalReds}\n` +
                        `Análise: ${group.analysis}`
                    );
                });
            } else {
                // Atualizar linhas existentes
                sortedGroups.forEach((group, index) => {
                    let row = tbodyRanking.rows[index];
                    if (!row) {
                        row = tbodyRanking.insertRow();
                        row.insertCell(0);
                        row.insertCell(1);
                        row.insertCell(2);
                        row.insertCell(3);
                    }
                    row.cells[0].innerHTML = `${group.marketGroup.split(' ').slice(0, 2).join(' ')} <span class="${getPercentageClass(group.marketPercentage)}">${group.marketPercentage}%</span>`;
                    row.cells[1].textContent = group.occurrences;
                    row.cells[2].textContent = group.greens;
                    row.cells[3].className = 'tooltip';
                    row.cells[3].textContent = group.greenPercentage + '%';
                    row.cells[3].setAttribute('data-tooltip',
                        `${group.marketGroup}\n` +
                        `Ocorrências: ${group.occurrences}\n` +
                        `Greens: ${group.greens}\n` +
                        `Reds: ${group.reds}\n` +
                        `Últimos ${verifyLines} jogos:\n` +
                        `Greens: ${group.totalGreens}, Reds: ${group.totalReds}\n` +
                        `Análise: ${group.analysis}`
                    );
                });

                // Remover linhas extras, se houver
                while (tbodyRanking.rows.length > sortedGroups.length) {
                    tbodyRanking.deleteRow(tbodyRanking.rows.length - 1);
                }
            }
        }

        function sortTable(columnIndex) {
            const table = document.getElementById("rankingTable");
            const tbody = table.getElementsByTagName("tbody")[0];
            if (currentRankingData.length === 0) return;

            const isAscending = table.rows[0].cells[columnIndex].getAttribute("data-ascending") !== "false";

            currentRankingData.sort((a, b) => {
                let valueA, valueB;
                switch (columnIndex) {
                    case 0:
                        valueA = a.marketPercentage;
                        valueB = b.marketPercentage;
                        break;
                    case 1:
                        valueA = a.occurrences;
                        valueB = b.occurrences;
                        break;
                    case 2:
                        valueA = a.greens;
                        valueB = b.greens;
                        break;
                    case 3:
                        valueA = parseFloat(a.greenPercentage);
                        valueB = parseFloat(b.greenPercentage);
                        break;
                }

                if (typeof valueA === 'string') {
                    return isAscending ? valueA.localeCompare(valueB) : valueB.localeCompare(valueA);
                }
                return isAscending ? valueA - valueB : valueB - valueA;
            });

            // Atualizar a tabela com os dados ordenados
            currentRankingData.forEach((group, index) => {
                const row = tbody.rows[index];
                row.cells[0].innerHTML = `${group.marketGroup.split(' ').slice(0, 2).join(' ')} <span class="${getPercentageClass(group.marketPercentage)}">${group.marketPercentage}%</span>`;
                row.cells[1].textContent = group.occurrences;
                row.cells[2].textContent = group.greens;
                row.cells[3].className = 'tooltip';
                row.cells[3].textContent = group.greenPercentage + '%';
                row.cells[3].setAttribute('data-tooltip',
                    `${group.marketGroup}\n` +
                    `Ocorrências: ${group.occurrences}\n` +
                    `Greens: ${group.greens}\n` +
                    `Reds: ${group.reds}\n` +
                    `Últimos ${document.getElementById("verifyLines").value} jogos:\n` +
                    `Greens: ${group.totalGreens}, Reds: ${group.totalReds}\n` +
                    `Análise: ${group.analysis}`
                );
            });

            table.rows[0].cells[columnIndex].setAttribute("data-ascending", !isAscending);
        }

        // Função para ajustar dinamicamente a posição do tooltip
        document.addEventListener('mouseover', function(e) {
            if (e.target.classList.contains('tooltip')) {
                const rect = e.target.getBoundingClientRect();
                const tooltipText = e.target.getAttribute('data-tooltip');
                const tooltipElement = document.createElement('div');
                const tooltipArrowElement = document.createElement('div');

                // Criar elemento do tooltip
                tooltipElement.className = 'tooltip-content';
                tooltipElement.textContent = tooltipText;
                tooltipElement.style.position = 'fixed';
                tooltipElement.style.background = 'var(--tooltip-bg)';
                tooltipElement.style.color = 'var(--tooltip-text)';
                tooltipElement.style.padding = '0.6rem';
                tooltipElement.style.borderRadius = '6px';
                tooltipElement.style.fontSize = '0.8rem';
                tooltipElement.style.whiteSpace = 'pre-wrap';
                tooltipElement.style.zIndex = '1000';
                tooltipElement.style.border = '1px solid var(--accent-color)';
                tooltipElement.style.boxShadow = '0 2px 8px rgba(0, 0, 0, 0.3)';
                tooltipElement.style.maxWidth = '200px';
                tooltipElement.style.textAlign = 'left';

                // Criar elemento da seta
                tooltipArrowElement.style.position = 'fixed';
                tooltipArrowElement.style.border = '6px solid transparent';
                tooltipArrowElement.style.borderTopColor = 'var(--accent-color)';
                tooltipArrowElement.style.zIndex = '1000';

                document.body.appendChild(tooltipElement);
                document.body.appendChild(tooltipArrowElement);

                // Calcular posição do tooltip
                const tooltipHeight = tooltipElement.offsetHeight;
                const windowHeight = window.innerHeight;
                const spaceAbove = rect.top;
                const spaceBelow = windowHeight - rect.bottom;

                if (spaceAbove > tooltipHeight + 20) {
                    // Posicionar acima
                    tooltipElement.style.top = (rect.top - tooltipHeight - 10) + 'px';
                    tooltipElement.style.left = (rect.left + rect.width / 2 - tooltipElement.offsetWidth / 2) + 'px';
                    tooltipArrowElement.style.top = (rect.top - 10) + 'px';
                    tooltipArrowElement.style.left = (rect.left + rect.width / 2 - 6) + 'px'; // 6 é a largura da seta
                } else if (spaceBelow > tooltipHeight + 20) {
                    // Posicionar abaixo
                    tooltipElement.style.top = (rect.bottom + 10) + 'px';
                    tooltipElement.style.left = (rect.left + rect.width / 2 - tooltipElement.offsetWidth / 2) + 'px';
                    tooltipArrowElement.style.top = (rect.bottom) + 'px';
                    tooltipArrowElement.style.left = (rect.left + rect.width / 2 - 6) + 'px';
                    tooltipArrowElement.style.borderTopColor = 'transparent';
                    tooltipArrowElement.style.borderBottomColor = 'var(--accent-color)';
                } else {
                    // Posicionar à direita ou à esquerda, se não houver espaço vertical
                    tooltipElement.style.top = (rect.top - tooltipHeight / 2) + 'px';
                    tooltipElement.style.left = (rect.right + 10) + 'px';
                    tooltipArrowElement.style.top = (rect.top + rect.height / 2 - 6) + 'px';
                    tooltipArrowElement.style.left = (rect.right) + 'px';
                    tooltipArrowElement.style.borderTopColor = 'transparent';
                    tooltipArrowElement.style.borderRightColor = 'var(--accent-color)';
                }

                // Remover o tooltip quando o mouse sair
                e.target.addEventListener('mouseout', function handler() {
                    tooltipElement.remove();
                    tooltipArrowElement.remove();
                    e.target.removeEventListener('mouseout', handler);
                });
            }
        });

        // Função para atualizar dinamicamente a cada 10 segundos
        function startAutoUpdate() {
            // Limpar intervalo anterior, se existir
            if (autoUpdateInterval) {
                clearInterval(autoUpdateInterval);
            }

            calculateOccurrencesAndRank(true); // Primeira execução
            autoUpdateInterval = setInterval(() => calculateOccurrencesAndRank(true), 10000); // Atualiza a cada 10 segundos
        }

        // Iniciar a atualização automática quando a página carregar
        window.onload = startAutoUpdate;

        // Reexecutar a atualização automática ao alterar os filtros
        document.getElementById("selectedLeague").addEventListener('change', startAutoUpdate);
        document.getElementById("searchedMarket").addEventListener('change', startAutoUpdate);
        document.getElementById("timeRange").addEventListener('change', startAutoUpdate);
        document.getElementById("linesToSum").addEventListener('change', startAutoUpdate);
        document.getElementById("verifyLines").addEventListener('change', startAutoUpdate);
    </script>

<script>
    fetch('header.html')
      .then(response => response.text())
      .then(data => {
        document.getElementById('header').innerHTML = data;
      });
  </script>
  <script src="redirecionar.js"></script>

<script>
      // Bloqueia o menu de contexto (clique direito)
      document.addEventListener("contextmenu", function(e) {
    e.preventDefault();
});

// Bloqueia atalhos de teclado comuns para ferramentas de desenvolvimento
document.addEventListener("keydown", function(e) {
    // F12
    if (e.key === "F12") {
        e.preventDefault();
    }
    
    // Ctrl + Shift + I
    if (e.ctrlKey && e.shiftKey && e.key === "I") {
        e.preventDefault();
    }
    
    // Ctrl + U (ver código fonte)
    if (e.ctrlKey && e.key === "u") {
        e.preventDefault();
    }
    
    // Ctrl + Shift + J (console)
    if (e.ctrlKey && e.shiftKey && e.key === "J") {
        e.preventDefault();
    }
    
    // Ctrl + Shift + C (inspeção de elementos)
    if (e.ctrlKey && e.shiftKey && e.key === "C") {
        e.preventDefault();
    }
    
    // Ctrl + S (salvar página)
    if (e.ctrlKey && e.key === "s") {
        e.preventDefault();
    }
    
    // Ctrl + P (imprimir)
    if (e.ctrlKey && e.key === "p") {
        e.preventDefault();
    }
});

// Detecta abertura de ferramentas de desenvolvimento
const devtools = { open: false };
const element = new Image();
Object.defineProperty(element, 'id', {
    get: function () {
        devtools.open = true;
    }
});

// Adiciona detecção alternativa de devtools
(function() {
    const threshold = 160;
    const checkDevTools = function() {
        if ((window.outerWidth - window.innerWidth) > threshold || 
            (window.outerHeight - window.innerHeight) > threshold) {
            devtools.open = true;
        }
    };
    
    window.addEventListener('resize', checkDevTools);
    setInterval(checkDevTools, 500);
})();

// Monitoramento contínuo
console.log('%c', element);
setInterval(function() {
    if (devtools.open) {
        document.body.innerHTML = '<h1>Acesso não autorizado detectado</h1>';
        // Ou redirecionar:
        // window.location.href = 'about:blank';
        devtools.open = false;
    }
}, 1000);

// Impede seleção de texto
document.addEventListener('selectstart', function(e) {
    e.preventDefault();
});

// Impede arrastar e soltar
document.addEventListener('dragstart', function(e) {
    e.preventDefault();
});

// Ofusca console
console.log = function() {};
console.debug = function() {};
console.info = function() {};
  </script>




  </body>
</html>
