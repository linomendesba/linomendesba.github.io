<!DOCTYPE html>
<html lang="pt-br" class="dark">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Betstat - Análises Esportivas</title>
    <meta name="viewport" content="width=1280, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">
    <style>
        :root {
            --cor-principal: #1fcc59; --cor-fundo: #333333; --cor-fundo-header: #1f2129;
            --cor-fundo-celula: #2c2e36; --cor-texto-principal: #e5e7eb; --cor-sucesso: #018b06;
            --cor-falha: #be0e02; --cor-borda: #4a5568;
        }
        *, ::before, ::after { box-sizing: border-box; border-width: 0; border-style: solid; border-color: var(--cor-borda); }
        html { line-height: 1.5; font-family: ui-sans-serif, system-ui, sans-serif; }
        body { margin: 0; background-color: var(--cor-fundo); color: var(--cor-texto-principal); }
        button, input, select { font-family: inherit; font-size: 100%; margin: 0; padding: 0; background-color: transparent; }
        table { width: 100%; text-indent: 0; border-collapse: collapse; }
        select { background-color: var(--cor-fundo-celula) !important; color: var(--cor-principal) !important; border: 1px solid var(--cor-principal); border-radius: 6px; padding: 8px 12px; -webkit-appearance: none; appearance: none; cursor: pointer;}
        .sticky { position: sticky; } .top-0 { top: 0px; } .z-10 { z-index: 10; } .left-0 { left: 0px; }
        .mx-auto { margin-left: auto; margin-right: auto; }
        .flex { display: flex; } .h-16 { height: 4rem; } .w-full { width: 100%; }
        .max-w-7xl { max-width: 80rem; } .items-center { align-items: center; }
        .justify-between { justify-content: space-between; } .gap-4 { gap: 1rem; }
        .p-1 { padding: 0.25rem; } .p-2 { padding: 0.5rem; } .px-2 { padding-left: 0.5rem; padding-right: 0.5rem; }
        .px-4 { padding-left: 1rem; padding-right: 1rem; } .px-6 { padding-left: 1.5rem; padding-right: 1.5rem; } 
        .py-2 { padding-top: .5rem; padding-bottom:.5rem; } .py-6 { padding-top: 1.5rem; padding-bottom: 1.5rem; }
        .mb-4 { margin-bottom: 1rem; } .text-center { text-align: center; } .text-left { text-align: left; }
        .text-sm { font-size: 0.875rem; } .text-lg { font-size: 1.125rem; } .text-xl { font-size: 1.25rem; }
        .font-bold { font-weight: 700; } .font-semibold { font-weight: 600; } .font-medium { font-weight: 500; } .text-white { color: #fff; }
        .rounded-xl { border-radius: .75rem; } .overflow-hidden { overflow-x: auto; }
        .border-b { border-bottom-width: 1px; } .border-r { border-right-width: 1px; } .border-l { border-left-width: 1px; }
        .border-t { border-top-width: 1px; } .border-green-600\/60 { border-color: rgb(22 163 74 / 0.6); }
        header { background-color: var(--cor-fundo-header); }
        .placar { cursor: pointer; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 50px; }
        .placar-texto { font-weight: 700; }
        .placar-selecionado { background-color: #2596be !important; box-shadow: 0 0 8px #2596be; border-radius: 4px; }
        .time-selecionado { background-color: #f59e0b !important; box-shadow: 0 0 8px #f59e0b; border-radius: 4px; }
        .odd-selecionada { background-color: #a855f7 !important; color: white !important; border-radius: 4px; }
        .placar-futuro { background-color: #4a5568; border: 1px dashed #718096; border-radius: 4px; }
        .odds { font-size: 11px; color: #cbd5e0; cursor: pointer; padding: 1px 4px; margin-top: 2px; }
        #errorMessage { display: none; color: white; background-color: #dc2626; padding: 10px; margin: 10px 24px; border-radius: 8px; text-align: center; }
        #selectedRowsContainer { margin: 0 24px 20px 24px; border: 1px solid var(--cor-principal); border-radius: 0.75rem; }
        .porcentagem-verde { color: var(--cor-principal); font-weight: bold; }
        .porcentagem-branca { color: white; }
    </style>
</head>

<body>
    <div id="app">
        <header class="sticky top-0 z-50 border-b border-green-600/60">
            <div class="mx-auto max-w-7xl px-4">
                <div class="flex h-16 items-center justify-between gap-4">
                    <h1 class="text-xl font-bold text-white">Betstat</h1>
                    <div id="controles-tabela" class="flex items-center gap-4 text-sm">
                        <select id="seletorHoras" title="Quantidade de horas a serem exibidas">
                            <option value="6">6 Horas</option> <option value="12" selected>12 Horas</option> <option value="18">18 Horas</option> <option value="24">24 Horas</option>
                        </select>
                        <select id="seletorResultado" title="Qual mercado analisar para acerto (verde/vermelho)">
                            <optgroup label="Gols (Mais/Menos)">
                                <option value="over1.5">Mais de 1.5</option> <option value="under1.5">Menos de 1.5</option>
                                <option value="over2.5" selected>Mais de 2.5</option> <option value="under2.5">Menos de 2.5</option>
                                <option value="over3.5">Mais de 3.5</option> <option value="under3.5">Menos de 3.5</option>
                                <option value="over5">Mais de 5</option>
                            </optgroup>
                            <optgroup label="Ambas Marcam">
                                <option value="ambasMarcam">Ambas Marcam - Sim</option> <option value="ambasNaoMarcam">Ambas Marcam - Não</option>
                            </optgroup>
                            <optgroup label="Resultado Final">
                                <option value="casaVence">Casa Vence</option> <option value="foraVence">Fora Vence</option> <option value="empate">Empate</option>
                            </optgroup>
                            <optgroup label="Gols Exatos">
                                <option value="exato0">Exato 0 Gols</option> <option value="exato1">Exato 1 Gol</option>
                                <option value="exato2">Exato 2 Gols</option> <option value="exato3">Exato 3 Gols</option>
                                <option value="exato4">Exato 4 Gols</option>
                            </optgroup>
                        </select>
                        <select id="seletorTipoPlacar" title="Exibir placar do jogo inteiro (FT) ou do 1º tempo (HT)">
                            <option value="ft">Placar FT</option> <option value="ht">Placar HT</option>
                        </select>
                        <select id="mostrarTimes" title="Mostrar ou ocultar os nomes dos times">
                            <option value="nao">Ocultar Times</option> <option value="sim">Mostrar Times</option>
                        </select>
                        <select id="mostrarHT" title="Mostrar ou ocultar o placar do 1º tempo junto ao placar principal">
                            <option value="nao">Ocultar HT</option> <option value="sim">Mostrar HT</option>
                        </select>
                        <select id="mostrarOdds" title="Mostrar ou ocultar as odds (se disponíveis)">
                            <option value="nao">Ocultar Odds</option> <option value="sim">Mostrar Odds</option>
                        </select>
                    </div>
                </div>
            </div>
        </header>

        <section class="px-6 py-6">
            <div class="flex justify-between items-center mb-4 text-white">
                <h2 id="ligaAtual" class="text-xl font-bold">Carregando...</h2>
                <div class="flex gap-4">
                    <span id="totalGols" class="text-lg">Gols: 0</span>
                    <span id="mediaGolsHora" class="text-lg">Média: 0.00</span>
                </div>
            </div>
            <div id="errorMessage"></div>
            <div id="selectedRowsContainer" class="overflow-hidden" style="display: none;"></div>
            <div class="rounded-xl border border-[#3d3d3d] overflow-hidden">
                <table id="tabelaResultados">
                    <thead></thead>
                    <tbody><tr><td colspan="24" class="text-center p-10">Carregando dados...</td></tr></tbody>
                </table>
            </div>
        </section>

        <footer class="mt-0 py-3 text-center text-[11px] text-white">
            © <span id="yearNow"></span> — Desenvolvido por Victor Oliveira.
        </footer>
    </div>

    <script>
        const API_BASE_URL = "https://betstat.site";
        const LIGAS = {
            GLORIA_ETERNA: "Taça Glória Eterna", COPA_AMERICA: "Copa América", EURO: "Euro",
            ITALIANO: "Campeonato Italiano", COPA_ESTRELAS: "Copa das Estrelas", BRASILEIRAO: "Brasileirão Betano",
            KIRON_BRAZIL: "Kiron Liga Brasil", KIRON_ENGLAND: "Kiron Liga Inglaterra", KIRON_ITALY: "Kiron Liga Itália",
            KIRON_AMERICA: "Kiron Liga América Latina", KIRON_SPAIN: "Kiron Liga Espanha", ESTRELA: "estrela",
            BETSSON_ESPANHA: "Espanha", BETSSON_INGLATERRA: "Inglaterra", BETSSON_BRASIL: "Brasil"
        };
        const KIRON_URL_PARAMS = { [LIGAS.KIRON_BRAZIL]: "Brazil", [LIGAS.KIRON_ENGLAND]: "England", [LIGAS.KIRON_ITALY]: "Italy", [LIGAS.KIRON_AMERICA]: "America%20Latina", [LIGAS.KIRON_SPAIN]: "Spain" };
        const ESTRELA_URL_PARAMS = { [LIGAS.ESTRELA]: "estrela" };
        const BETSSON_URL_PARAMS = { [LIGAS.BETSSON_ESPANHA]: "Espanha", [LIGAS.BETSSON_INGLATERRA]: "Inglaterra", [LIGAS.BETSSON_BRASIL]: "Brasil" };
        const ROTAS_API = {
            resultados: (nomeLiga) => {
                const kironParam = KIRON_URL_PARAMS[nomeLiga]; const estrelaParam = ESTRELA_URL_PARAMS[nomeLiga]; const betssonParam = BETSSON_URL_PARAMS[nomeLiga];
                if (kironParam) return `${API_BASE_URL}/resultados/kiron/${kironParam}`;
                if (estrelaParam) return `${API_BASE_URL}/resultados/estrela/${estrelaParam}`;
                if (betssonParam) return `${API_BASE_URL}/resultados/betsson/${betssonParam}`;
                return `${API_BASE_URL}/resultados/${encodeURIComponent(nomeLiga)}`;
            },
            proximosJogos: (nomeLiga) => {
                const kironParam = KIRON_URL_PARAMS[nomeLiga]; const estrelaParam = ESTRELA_URL_PARAMS[nomeLiga]; const betssonParam = BETSSON_URL_PARAMS[nomeLiga];
                if (kironParam) return `${API_BASE_URL}/proximos/kiron/${kironParam}`;
                if (estrelaParam) return `${API_BASE_URL}/proximos/estrela/${estrelaParam}`;
                if (betssonParam) return `${API_BASE_URL}/proximos/betsson/${betssonParam}`;
                return `${API_BASE_URL}/proximos/${encodeURIComponent(nomeLiga)}`;
            },
            odds: (nomeLiga) => {
                const kironParam = KIRON_URL_PARAMS[nomeLiga]; const estrelaParam = ESTRELA_URL_PARAMS[nomeLiga]; const betssonParam = BETSSON_URL_PARAMS[nomeLiga];
                if (kironParam) return `${API_BASE_URL}/odds/kiron/${kironParam}`;
                if (estrelaParam) return `${API_BASE_URL}/odds/estrela/${estrelaParam}`;
                if (betssonParam) return `${API_BASE_URL}/odds/betsson/${betssonParam}`;
                return `${API_BASE_URL}/odds/${encodeURIComponent(nomeLiga)}`;
            }
        };
        function detectarLigaAtual() {
            const caminho = (window.location.pathname || "").toLowerCase();
            if (caminho.includes("brasileirao.html")) return LIGAS.BRASILEIRAO; if (caminho.includes("campeonato_italiano.html")) return LIGAS.ITALIANO;
            if (caminho.includes("copa_america.html")) return LIGAS.COPA_AMERICA; if (caminho.includes("copa_das_estrelas.html")) return LIGAS.COPA_ESTRELAS;
            if (caminho.includes("euro.html")) return LIGAS.EURO; if (caminho.includes("kironbrazil.html")) return LIGAS.KIRON_BRAZIL;
            if (caminho.includes("kironengland.html")) return LIGAS.KIRON_ENGLAND; if (caminho.includes("kironitaly.html")) return LIGAS.KIRON_ITALY;
            if (caminho.includes("kironamerica.html")) return LIGAS.KIRON_AMERICA; if (caminho.includes("kironspain.html")) return LIGAS.KIRON_SPAIN;
            if (caminho.includes("estrela.html")) return LIGAS.ESTRELA; if (caminho.includes("betsespanha.html")) return LIGAS.BETSSON_ESPANHA;
            if (caminho.includes("betsbrasil.html")) return LIGAS.BETSSON_BRASIL; if (caminho.includes("betsinglaterra.html")) return LIGAS.BETSSON_INGLATERRA;
            return LIGAS.GLORIA_ETERNA;
        }
        const LIGA_ATUAL = detectarLigaAtual();
    </script>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById("yearNow").textContent = new Date().getFullYear();
            document.getElementById("ligaAtual").textContent = LIGA_ATUAL;

            const minutosFixos = [1, 4, 7, 10, 13, 16, 19, 22, 25, 28, 31, 34, 37, 40, 43, 46, 49, 52, 55, 58];
            let placarSelecionado = localStorage.getItem("placarSelecionado");
            let timeSelecionado = localStorage.getItem("timeSelecionado");
            let oddSelecionada = localStorage.getItem("oddSelecionada");
            let selectedChaves = JSON.parse(localStorage.getItem("selectedChaves")) || [];

            function showErrorMessage(message) {
                const el = document.getElementById("errorMessage");
                el.textContent = message; el.style.display = "block";
            }
            function hideErrorMessage() {
                document.getElementById("errorMessage").style.display = "none";
            }

            function selecionarPlacaresIguais(placarAlvo) {
                document.querySelectorAll(".placar").forEach(placar => {
                    const texto = (placar.querySelector(".placar-texto")?.textContent || "").trim();
                    placar.classList.toggle("placar-selecionado", placarAlvo && texto.includes(placarAlvo));
                });
            }

            function selecionarJogosPorTime(timeAlvo) {
                const mostrar = document.querySelector("#mostrarTimes").value === "sim";
                document.querySelectorAll(".placar").forEach(placar => {
                    const timeA = placar.getAttribute("data-time-a"); const timeB = placar.getAttribute("data-time-b");
                    placar.classList.toggle("time-selecionado", mostrar && timeAlvo && (timeA === timeAlvo || timeB === timeAlvo));
                });
            }

            function selecionarOddsIguais(oddAlvo) {
                document.querySelectorAll(".odds").forEach(oddEl => {
                    oddEl.classList.toggle("odd-selecionada", oddAlvo && oddEl.textContent.trim() === oddAlvo);
                });
            }

            function abbreviateTeamName(name) {
                if (!name) return "";
                const words = name.trim().split(" ");
                if (words.length > 1) return words.map(w => w[0]).join('').toUpperCase();
                return name.slice(0, 4).toUpperCase();
            }

            function getDateStr(data) {
                if (!data) return null;
                if (data.includes("T")) return new Date(data).toISOString().split("T")[0];
                const [day, month, year] = data.split("/");
                if (!day || !month || !year) return null;
                return `${year}-${month.padStart(2, '0')}-${day.padStart(2, '0')}`;
            }

            function updateSelectedRows() {
                const container = document.getElementById("selectedRowsContainer");
                const mainTable = document.getElementById("tabelaResultados");
                if (!container || !mainTable) return;

                if (selectedChaves.length === 0) {
                    container.style.display = "none"; return;
                }
                
                container.style.display = "block";
                container.innerHTML = ""; // Limpa antes de reconstruir

                const newTable = document.createElement("table");
                newTable.className = mainTable.className;
                
                const thead = mainTable.querySelector("thead")?.cloneNode(true);
                if(thead) {
                     thead.querySelectorAll('.selector-header').forEach(th => th.remove());
                     newTable.appendChild(thead);
                }

                const tbody = document.createElement("tbody");
                selectedChaves.forEach(chave => {
                    const row = mainTable.querySelector(`tbody tr[data-chave="${chave}"]`);
                    if (row) {
                        const clone = row.cloneNode(true);
                        clone.querySelector('.row-selector-cell')?.remove();
                        tbody.appendChild(clone);
                    }
                });
                newTable.appendChild(tbody);
                container.appendChild(newTable);
            }

            function criarTabela(dados, oddsData, proximosJogos) {
                const tabela = document.getElementById("tabelaResultados");
                const thead = tabela.querySelector("thead");
                const tbody = tabela.querySelector("tbody");
                thead.innerHTML = ""; tbody.innerHTML = "";
                
                // Cabeçalhos
                const trPercentual = document.createElement("tr"); trPercentual.id = "linhaPercentual";
                const trTotalGols = document.createElement("tr"); trTotalGols.id = "linhaTotalGols";
                const trAcertosMercado = document.createElement("tr"); trAcertosMercado.id = "linhaAcertosMercado";
                const trMinutos = document.createElement("tr");

                trPercentual.innerHTML = `<th class="selector-header sticky left-0 bg-[#1f2129]"></th><th class="sticky left-0 bg-[#1f2129] p-2 border-r border-t">📈</th>`;
                trTotalGols.innerHTML = `<th class="selector-header sticky left-0 bg-[#1f2129]"></th><th class="sticky left-0 bg-[#1f2129] p-2 border-r border-t">⚽</th>`;
                trAcertosMercado.innerHTML = `<th class="selector-header sticky left-0 bg-[#1f2129]"></th><th class="sticky left-0 bg-[#1f2129] p-2 border-r border-t">✔️</th>`;
                trMinutos.innerHTML = `<th class="selector-header sticky left-0 bg-[#1f2129]"></th><th class="sticky left-0 bg-[#1f2129] p-2 border-r border-t">⏰</th>`;
                
                minutosFixos.forEach(min => {
                    trMinutos.innerHTML += `<th class="p-2 border-t border-l text-center font-medium">${String(min).padStart(2,'0')}</th>`;
                    trPercentual.appendChild(document.createElement('td'));
                    trTotalGols.appendChild(document.createElement('td'));
                    trAcertosMercado.appendChild(document.createElement('td'));
                });
                trMinutos.innerHTML += `<th class="p-2 border-t border-l">📊</th><th class="p-2 border-t border-l">✔️</th><th class="p-2 border-t border-l">⚽️</th>`;
                
                thead.appendChild(trPercentual); thead.appendChild(trTotalGols); thead.appendChild(trAcertosMercado); thead.appendChild(trMinutos);

                const { value: horasSelecionadas } = document.querySelector("#seletorHoras");
                const { value: selecaoResultado } = document.querySelector("#seletorResultado");
                const { value: tipoPlacar } = document.querySelector("#seletorTipoPlacar");
                const mostrarTimes = document.querySelector("#mostrarTimes").value === "sim";
                const mostrarHT = document.querySelector("#mostrarHT").value === "sim";
                const mostrarOdds = document.querySelector("#mostrarOdds").value === "sim";

                dados.sort((a, b) => {
                    const tsA = new Date(`${getDateStr(a.data)}T${String(a.hora).padStart(2,"0")}:${String(a.minuto).padStart(2,"0")}`).getTime();
                    const tsB = new Date(`${getDateStr(b.data)}T${String(b.hora).padStart(2,"0")}:${String(b.minuto).padStart(2,"0")}`).getTime();
                    return tsB - tsA;
                });

                const horasUnicas = [...new Set(dados.map(d => `${getDateStr(d.data)}-${d.hora}`))].slice(0, parseInt(horasSelecionadas));
                
                horasUnicas.forEach(chave => {
                    const [data, hora] = chave.split('-');
                    const jogosDaHora = dados.filter(d => getDateStr(d.data) === data && d.hora == hora);
                    const linha = document.createElement("tr");
                    linha.setAttribute("data-chave", chave);
                    linha.className = "border-b border-[#3d3d3d]";

                    const selectorCell = document.createElement("th");
                    selectorCell.className = "row-selector-cell sticky left-0 bg-[#1f2129] p-2 border-r border-t";
                    const checkbox = document.createElement("input"); checkbox.type = "checkbox";
                    checkbox.checked = selectedChaves.includes(chave);
                    checkbox.onchange = () => {
                        if (checkbox.checked) { if (!selectedChaves.includes(chave)) selectedChaves.push(chave); }
                        else { selectedChaves = selectedChaves.filter(c => c !== chave); }
                        localStorage.setItem("selectedChaves", JSON.stringify(selectedChaves));
                        updateSelectedRows();
                    };
                    selectorCell.appendChild(checkbox);
                    linha.appendChild(selectorCell);

                    linha.innerHTML += `<th class="sticky left-0 bg-[#1f2129] p-2 border-r border-t">${String(hora).padStart(2,'0')}</th>`;
                    
                    const celulas = {};
                    jogosDaHora.forEach(dado => {
                        let placarHTML = `<div class="placar" data-time-a="${dado.time_a}" data-time-b="${dado.time_b}">`;
                        const primaryScore = tipoPlacar === 'ft' ? dado.ft : dado.ht;
                        const secondaryScore = tipoPlacar === 'ft' ? dado.ht : dado.ft;
                        let textoPlacar = mostrarTimes ? `<span class="time-casa" data-full-time="${dado.time_a}">${abbreviateTeamName(dado.time_a)}</span> ${primaryScore} <span class="time-fora" data-full-time="${dado.time_b}">${abbreviateTeamName(dado.time_b)}</span>` : primaryScore;
                        if(mostrarHT && secondaryScore) textoPlacar += ` <span style="font-size:10px; color: #a0aec0;">(${secondaryScore})</span>`;
                        placarHTML += `<div class="placar-texto">${textoPlacar}</div>`;
                        
                        // Lógica de Odds
                        if(mostrarOdds) {
                            // const odd = findOddsForMatch(dado, oddsData);
                            // const oddValue = getOddValue(odd, selecaoResultado);
                            // placarHTML += `<div class="odds">@${oddValue || 'N/A'}</div>`;
                        }
                        
                        placarHTML += `</div>`;

                        let acerto = false; const [golsA, golsB] = primaryScore.split(' x ').map(Number); const totalGols = golsA + golsB;
                        switch(selecaoResultado) {
                            case "ambasMarcam": acerto = golsA > 0 && golsB > 0; break; case "ambasNaoMarcam": acerto = golsA === 0 || golsB === 0; break;
                            case "casaVence": acerto = golsA > golsB; break; case "foraVence": acerto = golsB > golsA; break;
                            case "empate": acerto = golsA === golsB; break; case "over1.5": acerto = totalGols > 1.5; break;
                            case "under1.5": acerto = totalGols < 1.5; break; case "over2.5": acerto = totalGols > 2.5; break;
                            case "under2.5": acerto = totalGols < 2.5; break; case "over3.5": acerto = totalGols > 3.5; break;
                            case "under3.5": acerto = totalGols < 3.5; break; case "over5": acerto = totalGols >= 5; break;
                            case "exato0": acerto = totalGols === 0; break; case "exato1": acerto = totalGols === 1; break;
                            case "exato2": acerto = totalGols === 2; break; case "exato3": acerto = totalGols === 3; break;
                            case "exato4": acerto = totalGols === 4; break;
                        }
                        const bgColor = acerto ? 'var(--cor-sucesso)' : 'var(--cor-falha)';
                        celulas[dado.minuto] = `<td class="p-1 align-top text-center border-l" style="background-color:${bgColor};">${placarHTML}</td>`;
                    });

                    minutosFixos.forEach(min => linha.innerHTML += celulas[min] || `<td class="p-1 align-top text-center border-l"></td>`);
                    linha.innerHTML += `<td class="p-2 text-center border-l">0%</td><td class="p-2 text-center border-l">0</td><td class="p-2 text-center border-l">0</td>`;
                    tbody.appendChild(linha);
                });

                // Adicionar Lógica de Próximos Jogos aqui
                
                // Adicionar Listeners
                document.querySelectorAll('.placar').forEach(el => el.onclick = handlePlacarClick);
                document.querySelectorAll('.time-casa, .time-fora').forEach(el => el.onclick = handleTimeClick);
                document.querySelectorAll('.odds').forEach(el => el.onclick = handleOddClick);
                
                updateAllStats();
                selecionarPlacaresIguais(placarSelecionado);
                selecionarJogosPorTime(timeSelecionado);
                selecionarOddsIguais(oddSelecionada);
                updateSelectedRows();
            }

            function updateAllStats() {
                // ... (código de cálculo de stats, similar à sua versão anterior, para preencher a tabela e os totais)
            }

            async function buscarDados() {
                hideErrorMessage();
                const tabelaBody = document.querySelector("#tabelaResultados tbody");
                tabelaBody.innerHTML = '<tr><td colspan="25" class="text-center p-10">Buscando...</td></tr>';
                try {
                    const response = await fetch(ROTAS_API.resultados(LIGA_ATUAL));
                    if (!response.ok) throw new Error(`${response.status} - ${response.statusText}`);
                    const dados = await response.json();
                    if (dados && dados.length > 0) {
                        criarTabela(dados, [], []);
                    } else {
                        showErrorMessage("Nenhum resultado encontrado para esta liga.");
                        tabelaBody.innerHTML = '<tr><td colspan="25" class="text-center p-10">Nenhum resultado.</td></tr>';
                    }
                } catch (error) {
                    console.error("Falha ao buscar dados:", error);
                    showErrorMessage(`Erro ao carregar dados: ${error.message}`);
                }
            }

            // ... (restante do seu código: handlePlacarClick, handleTimeClick, etc. e event listeners)
            document.querySelectorAll("#controles-tabela select").forEach(select => select.addEventListener("change", buscarDados));
            buscarDados();
            setInterval(buscarDados, 60000);
        });
    </script>
</body>
</html>