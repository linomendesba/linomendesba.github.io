<!DOCTYPE html>
<html lang="pt-BR">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="icon" href="img/favicon.ico" type="image/x-icon" />
        <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1"></script>
        <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script> 
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-4WT805FFHQ"></script>    
        <title>BetStat</title>
                    <!-- Meta tags SEO principais -->
    <meta name="description" content="Transforme suas apostas com BetStat - a única plataforma especializada em futebol virtual Betano. Análises precisas, estatísticas confiáveis e resultados comprovados para investimentos inteligentes.">
    <meta name="keywords" content="BetStat, apostas esportivas, futebol virtual, Betano, estatísticas apostas, análise apostas, investimentos esportivos">
    
    <!-- Open Graph meta tags para redes sociais -->
    <meta property="og:title" content="BetStat | Plataforma de Análise para Apostas Esportivas">
    <meta property="og:description" content="Transforme suas apostas com análises precisas e estatísticas confiáveis. A única plataforma especializada em futebol virtual Betano.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.betstat.site/payment.html">
    <meta property="og:site_name" content="BetStat">
    
    <!-- Meta tags adicionais -->
    <meta name="robots" content="index, follow">
    <meta name="author" content="BetStat">
    <meta name="canonical" href="https://www.betstat.site/payment.html">
    <script type="module" src="js/firebase-auth.js"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
    
            gtag('config', 'G-4WT805FFHQ');
        </script>
        <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet" />
        
    </head>

    <style>

body {
      font-family: "Roboto", Arial, sans-serif;
      margin: 30px;
      background-color: #1c1f26;
      color: #ffffff;
    }

    .logo2 {
  width: 60px;      /* define a largura fixa */
  height: auto;     /* mantém a proporção da imagem */
}

    .espaco {
  width: 50px;  /* Largura da div */
  height: 50px;  /* Altura da div */
}


    option:hover {
      background-color: #ff8000;
      color: #ffffff;
    }

    canvas {
    cursor: pointer;
}

    button {
      background-color: #1c1f26;
      color: rgb(255, 255, 255);
      font-family: "Roboto", Arial, sans-serif;
      border: none;
      padding: 5px 8px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      transition: background-color 0.3s;
      margin: 10px;
    }

    button:hover {
      background-color: #0f1013;
    }

    option {
      background-color: #1c1f26;
      color: #ffffff;
    }

    select {
      width: 100%;
      padding: 5px;
      border-radius: 5px;
      background-color: #1c1f26;
      color: #ffffff;
      font-family: "Roboto", Arial, sans-serif;
      font-size: 14px;
      cursor: pointer;
      transition: border-color 0.3s;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    header {
        background: #005540;
      width: 100vw;
      width: 100%;
      position: fixed;
      top: 0;
      left: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      height: 60px;
    }

    .header-container {
      display: flex;
      align-items: center;
      width: 100%;
      max-width: 1200px;
      padding: 0 20px;
      justify-content: space-between;
    }

    .logo {
      height: 40px;
    }

    .selectors-container {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .nav-seletor {
      display: flex;
      align-items: center;
      color: #ffffff;
      font-weight: 500;
    }

    .nav-seletor select {
      padding: 0.5rem ;
      border-radius: 6px;
      background-color: #1c1f26;
      color: var(--text-color);
      border: 1px solid #ffffff9f;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .logout-btn {
      background-color: #1c1f26;; /* Fundo vermelho */
      color: white; /* Texto branco */
      padding: 8px 10px; /* Espaçamento interno */
      font-size: 14px; /* Tamanho da fonte */
      border-radius: 5px; /* Cantos arredondados */
      cursor: pointer; /* Cursor de botão */
      border: 1px solid #ffffff81;
    }

    .logout-btn:hover {
      background-color: #720000; /* Cor ao passar o mouse */
    }

    h1, h2, label {
            color: #1fad8b;
        }
        h1 {
            font-size: 24px;
            margin-bottom: 20px;
            text-align: center;
        }
        .control-panel {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        select {
            padding: 8px 12px;
            background-color: #292d36;
            color: #e0e0e0;
            border: 1px solid #1fad8b;
            border-radius: 4px;
            font-size: 14px;
            cursor: pointer;
            transition: border-color 0.3s;
        }
        select:hover {
            border-color: #34d8ab;
        }
        select:focus {
            outline: none;
            border-color: #1fad8b;
        }
        .chart-container {
            background-color: #292d36;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 40px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }
        .chart-container h2 {
            font-size: 18px;
            margin-bottom: 10px;
            text-align: center;
        }
        canvas {
            border-radius: 4px;
        }
        .checkbox-container {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        input[type="checkbox"] {
            cursor: pointer;
        }
        /* Accordion Styles */
        .accordion {
            margin-bottom: 10px;
        }
        .accordion-header {
            background-color: #292d36;
            color: #1fad8b;
            padding: 10px;
            cursor: pointer;
            border: 1px solid #1fad8b;
            border-radius: 4px;
            font-size: 18px;
            text-align: center;
        }
        .accordion-header:hover {
            background-color: #34383f;
        }
        .accordion-content {
            display: none; /* Hidden by default */
            padding: 10px;
        }
        .accordion-content.active {
            display: block;
        }
    </style>
    
<body>
  <body>
    <div id="header"></div>
    <br>
<br>
<br>

<div class="control-panel">
    <div>
        <label for="pointsSelector">Horas</label>
        <select id="pointsSelector">
            <option value="20">1 Hora</option>
            <option value="40">2 Horas</option>
            <option value="60">3 Horas</option>
            <option value="80">4 Horas</option>
            <option value="100">5 Horas</option>
            <option value="120">6 Horas</option>
            <option value="140">7 Horas</option>
            <option value="160">8 Horas</option>
            <option value="180">9 Horas</option>
            <option value="200">10 Horas</option>
            <option value="220">11 Horas</option>
            <option value="240">12 Horas</option>
            <option value="480">24 Horas</option>
            <option value="960">48 Horas</option>
            
        </select>
    </div>
    
    <div>
        <label for="averageSelector">Base</label>
        <select id="averageSelector">
            <option value="19">20</option>
            <option value="39">40</option>
            <option value="59">60</option>
            <option value="79">80</option>
            <option value="99">100</option>
            <option value="119">120</option>
        </select>
    </div>

    <div class="checkbox-container">
        <input type="checkbox" id="fibonacciToggle">
        <label for="fibonacciToggle">Ativar Fibonacci</label>
    </div>

    <div class="checkbox-container">
        <input type="checkbox" id="dataLabelsToggle">
        <label for="dataLabelsToggle">Ativar Rótulos</label>
    </div>
</div>

<!-- Accordions baseados no código fornecido -->
<div class="accordion">
    <div class="accordion-header">Copa América</div>
    <div class="accordion-content">
        <div class="chart-container">
            <h2>Copa América</h2>
            <canvas id="copaamericaChart" width="400" height="130"></canvas>
        </div>
    </div>
</div>

<div class="accordion">
    <div class="accordion-header">Taça Glória Eterna</div>
    <div class="accordion-content">
        <div class="chart-container">
            <h2>Taça Glória Eterna</h2>
            <canvas id="tacagloriaChart" width="400" height="130"></canvas>
        </div>
    </div>
</div>

<div class="accordion">
    <div class="accordion-header">Euro</div>
    <div class="accordion-content">
        <div class="chart-container">
            <h2>Euro</h2>
            <canvas id="euroChart" width="400" height="130"></canvas>
        </div>
    </div>
</div>

<div class="accordion">
    <div class="accordion-header">Campeonato Italiano</div>
    <div class="accordion-content">
        <div class="chart-container">
            <h2>Campeonato Italiano</h2>
            <canvas id="campeonatoitalianoChart" width="400" height="130"></canvas>
        </div>
    </div>
</div>

<div class="accordion">
    <div class="accordion-header">Copa das Estrelas</div>
    <div class="accordion-content">
        <div class="chart-container">
            <h2>Copa das Estrelas</h2>
            <canvas id="copaestrelasChart" width="400" height="130"></canvas>
        </div>
    </div>
</div>

<div class="accordion">
    <div class="accordion-header">Brasileirão Betano</div>
    <div class="accordion-content">
        <div class="chart-container">
            <h2>Brasileirão Betano</h2>
            <canvas id="brasileiraoChart" width="400" height="130"></canvas>
        </div>
    </div>
</div>

    <script>
        fetch('header.html')
          .then(response => response.text())
          .then(data => {
            document.getElementById('header').innerHTML = data;
          });
      </script>
      <script src="redirecionar.js"></script>
    
    <script>
            // Bloqueia o menu de contexto (clique direito)
document.addEventListener("contextmenu", function(e) {
    e.preventDefault();
});

// Bloqueia atalhos de teclado comuns para ferramentas de desenvolvimento
document.addEventListener("keydown", function(e) {
    // F12
    if (e.key === "F12") {
        e.preventDefault();
    }
    
    // Ctrl + Shift + I
    if (e.ctrlKey && e.shiftKey && e.key === "I") {
        e.preventDefault();
    }
    
    // Ctrl + U (ver código fonte)
    if (e.ctrlKey && e.key === "u") {
        e.preventDefault();
    }
    
    // Ctrl + Shift + J (console)
    if (e.ctrlKey && e.shiftKey && e.key === "J") {
        e.preventDefault();
    }
    
    // Ctrl + Shift + C (inspeção de elementos)
    if (e.ctrlKey && e.shiftKey && e.key === "C") {
        e.preventDefault();
    }
    
    // Ctrl + S (salvar página)
    if (e.ctrlKey && e.key === "s") {
        e.preventDefault();
    }
    
    // Ctrl + P (imprimir)
    if (e.ctrlKey && e.key === "p") {
        e.preventDefault();
    }
});

// Detecta abertura de ferramentas de desenvolvimento
const devtools = { open: false };
const element = new Image();
Object.defineProperty(element, 'id', {
    get: function () {
        devtools.open = true;
    }
});

// Adiciona detecção alternativa de devtools
(function() {
    const threshold = 160;
    const checkDevTools = function() {
        if ((window.outerWidth - window.innerWidth) > threshold || 
            (window.outerHeight - window.innerHeight) > threshold) {
            devtools.open = true;
        }
    };
    
    window.addEventListener('resize', checkDevTools);
    setInterval(checkDevTools, 500);
})();

// Monitoramento contínuo
console.log('%c', element);
setInterval(function() {
    if (devtools.open) {
        document.body.innerHTML = '<h1>Acesso não autorizado detectado</h1>';
        // Ou redirecionar:
        // window.location.href = 'about:blank';
        devtools.open = false;
    }
}, 1000);

// Impede seleção de texto
document.addEventListener('selectstart', function(e) {
    e.preventDefault();
});

// Impede arrastar e soltar
document.addEventListener('dragstart', function(e) {
    e.preventDefault();
});

// Ofusca console
console.log = function() {};
console.debug = function() {};
console.info = function() {};
    </script>
    <script>
let copaAmericaChart, tacaGloriaChart, euroChart, campeonatoItalianoChart, copaEstrelasChart, brasileiraoChart;
    let numPoints = 20;
    let averagePoints = 19;
    let showFibonacciLines = false;
    let showDataLabels = false;
    const leagues = ['CopaAmerica', 'TacaGloria', 'Euro', 'CampeonatoItaliano', 'CopaEstrelas', 'brasileirao'];
    const chartInstances = {};
    let chartData = {};

    const statsChartVisibleDatasets = {
        'Gols FT': false,
        'Casa Vence': false,
        'Empate': false,
        'Fora Vence': false,
        'Ambas Sim': true,
        'Ambas Não': false,
        'Over 1.5': false,
        'Over 2.5': false,
        'Over 3.5': false,
        'Under 1.5': false,
        'Under 2.5': false,
        'Under 3.5': false,
        '0 Gol Exato': false,
        '1 Gol Exato': false,
        '2 Gols Exatos': false,
        '3 Gols Exatos': false,
        '4 Gols Exatos': false,
        '5 Gols Exatos': false
    };

    function formatHtResult(ht) {
        if (ht === 'OUT') return 'OUT';
        if (ht && ht.includes(' x ')) {
            const parts = ht.split(' x ');
            if (parts.length === 2) {
                return `${parts[0]}-${parts[1]}`;
            }
        }
        return ht;
    }

    function updateStatsChart(chart, newData) {
        if (chart) {
            chart.data.labels = newData.labels;
            chart.data.datasets[0].data = newData.golsFT;
            chart.data.datasets[1].data = newData.casaVence;
            chart.data.datasets[2].data = newData.empate;
            chart.data.datasets[3].data = newData.foraVence;
            chart.data.datasets[4].data = newData.ambasSim;
            chart.data.datasets[5].data = newData.ambasNao;
            chart.data.datasets[6].data = newData.over15;
            chart.data.datasets[7].data = newData.over25;
            chart.data.datasets[8].data = newData.over35;
            chart.data.datasets[9].data = newData.under15;
            chart.data.datasets[10].data = newData.under25;
            chart.data.datasets[11].data = newData.under35;
            chart.data.datasets[12].data = newData.gol0;
            chart.data.datasets[13].data = newData.gol1;
            chart.data.datasets[14].data = newData.gol2;
            chart.data.datasets[15].data = newData.gol3;
            chart.data.datasets[16].data = newData.gol4;
            chart.data.datasets[17].data = newData.gol5;
            chart.update('none');
        }
    }

function processApiData(data, league) {
    const sortedData = [...data].sort((a, b) => {
        const dateA = new Date(a.data);
        const dateB = new Date(b.data);
        if (dateA.getTime() !== dateB.getTime()) return dateA - dateB;
        if (a.hora !== b.hora) return a.hora - b.hora;
        return a.minuto - b.minuto;
    });

    const slicedData = sortedData.slice(-numPoints - averagePoints);
    chartData[league] = slicedData;

    let labels = [];
    let golsFT = [];
    let casaVence = [];
    let empate = [];
    let foraVence = [];
    let ambasSim = [];
    let ambasNao = [];
    let over15 = [];
    let over25 = [];
    let over35 = [];
    let under15 = [];
    let under25 = [];
    let under35 = [];
    let gol0 = [];
    let gol1 = [];
    let gol2 = [];
    let gol3 = [];
    let gol4 = [];
    let gol5 = [];

    // Função para verificar se há lacuna entre dois jogos
    function hasGap(prevMatch, currMatch) {
        const prevTime = new Date(prevMatch.data + 'T' + prevMatch.hora + ':' + prevMatch.minuto + ':00');
        const currTime = new Date(currMatch.data + 'T' + currMatch.hora + ':' + currMatch.minuto + ':00');
        const diffMinutes = (currTime - prevTime) / (1000 * 60); // Diferença em minutos
        return diffMinutes > 1; // Considera lacuna se a diferença for maior que 1 minuto
    }

    for (let i = averagePoints; i < slicedData.length; i++) {
        let golsFTSum = 0;
        let casaVenceSum = 0;
        let empateSum = 0;
        let foraVenceSum = 0;
        let ambasSimSum = 0;
        let ambasNaoSum = 0;
        let over15Sum = 0;
        let over25Sum = 0;
        let over35Sum = 0;
        let under15Sum = 0;
        let under25Sum = 0;
        let under35Sum = 0;
        let gol0Sum = 0;
        let gol1Sum = 0;
        let gol2Sum = 0;
        let gol3Sum = 0;
        let gol4Sum = 0;
        let gol5Sum = 0;
        let validMatches = 0;

        // Calcula a média apenas com os jogos disponíveis
        for (let j = Math.max(0, i - averagePoints); j <= i; j++) {
            const match = slicedData[j];
            const ftScore = match.ft;

            // Verifica se há lacuna antes de processar
            if (j > 0 && hasGap(slicedData[j - 1], match)) {
                // Insere um ponto nulo no gráfico para indicar a lacuna
                labels.push(`${match.hora}:${match.minuto.toString().padStart(2, '0')}`);
                golsFT.push(null); // null faz o Chart.js pular o ponto
                casaVence.push(null);
                empate.push(null);
                foraVence.push(null);
                ambasSim.push(null);
                ambasNao.push(null);
                over15.push(null);
                over25.push(null);
                over35.push(null);
                under15.push(null);
                under25.push(null);
                under35.push(null);
                gol0.push(null);
                gol1.push(null);
                gol2.push(null);
                gol3.push(null);
                gol4.push(null);
                gol5.push(null);
                continue; // Pula para o próximo jogo
            }

            let ftScoreParts = [0, 0];
            if (ftScore && ftScore.includes(' x ')) {
                ftScoreParts = ftScore.split(' x ').map(num => parseInt(num, 10));
            }

            const totalGolsFT = ftScoreParts[0] + ftScoreParts[1];

            golsFTSum += totalGolsFT;
            casaVenceSum += ftScoreParts[0] > ftScoreParts[1] ? 1 : 0;
            empateSum += ftScoreParts[0] === ftScoreParts[1] ? 1 : 0;
            foraVenceSum += ftScoreParts[0] < ftScoreParts[1] ? 1 : 0;
            ambasSimSum += ftScoreParts[0] > 0 && ftScoreParts[1] > 0 ? 1 : 0;
            ambasNaoSum += ftScoreParts[0] === 0 || ftScoreParts[1] === 0 ? 1 : 0;
            over15Sum += totalGolsFT > 1.5 ? 1 : 0;
            over25Sum += totalGolsFT > 2.5 ? 1 : 0;
            over35Sum += totalGolsFT > 3.5 ? 1 : 0;
            under15Sum += totalGolsFT < 1.5 ? 1 : 0;
            under25Sum += totalGolsFT < 2.5 ? 1 : 0;
            under35Sum += totalGolsFT < 3.5 ? 1 : 0;
            gol0Sum += totalGolsFT === 0 ? 1 : 0;
            gol1Sum += totalGolsFT === 1 ? 1 : 0;
            gol2Sum += totalGolsFT === 2 ? 1 : 0;
            gol3Sum += totalGolsFT === 3 ? 1 : 0;
            gol4Sum += totalGolsFT === 4 ? 1 : 0;
            gol5Sum += totalGolsFT === 5 ? 1 : 0;
            validMatches++;
        }

        const match = slicedData[i];
        labels.push(`${match.hora}:${match.minuto.toString().padStart(2, '0')}`); // Linha corrigida

        const avg = validMatches || 1; // Evita divisão por zero
        golsFT.push(golsFTSum / avg * 100);
        casaVence.push(casaVenceSum / avg * 100);
        empate.push(empateSum / avg * 100);
        foraVence.push(foraVenceSum / avg * 100);
        ambasSim.push(ambasSimSum / avg * 100);
        ambasNao.push(ambasNaoSum / avg * 100);
        over15.push(over15Sum / avg * 100);
        over25.push(over25Sum / avg * 100);
        over35.push(over35Sum / avg * 100);
        under15.push(under15Sum / avg * 100);
        under25.push(under25Sum / avg * 100);
        under35.push(under35Sum / avg * 100);
        gol0.push(gol0Sum / avg * 100);
        gol1.push(gol1Sum / avg * 100);
        gol2.push(gol2Sum / avg * 100);
        gol3.push(gol3Sum / avg * 100);
        gol4.push(gol4Sum / avg * 100);
        gol5.push(gol5Sum / avg * 100);
    }

    return { 
        labels, golsFT, casaVence, empate, foraVence, ambasSim, ambasNao,
        over15, over25, over35, under15, under25, under35,
        gol0, gol1, gol2, gol3, gol4, gol5 
    };
}

    Chart.register(ChartDataLabels);

    const fibonacciLinesPlugin = {
        id: 'fibonacciLines',
        afterDraw: (chart) => {
            if (!showFibonacciLines) return;
            const ctx = chart.ctx;
            const yAxis = chart.scales.y;
            const fibonacciLevels = [0, 23.6, 38.2, 50, 61.8, 100];
            const yMin = yAxis.min;
            const yMax = yAxis.max;
            const range = yMax - yMin;
            const normalizedLevels = fibonacciLevels.map(level => yMin + (level / 100) * range);

            ctx.save();
            normalizedLevels.forEach((level, index) => {
                const y = yAxis.getPixelForValue(level);
                ctx.beginPath();
                ctx.moveTo(chart.chartArea.left, y);
                ctx.lineTo(chart.chartArea.right, y);
                ctx.strokeStyle = 'rgba(0, 255, 0, 0.5)';
                ctx.lineWidth = 1;
                ctx.stroke();
                ctx.fillStyle = '#b0b0b0';
                ctx.font = '11px Arial';
                ctx.textAlign = 'left';
                const textY = y - (index === 0 ? -10 : 5);
                const textX = chart.chartArea.right + 10;
                ctx.fillText(`${fibonacciLevels[index]}%`, textX, textY);
            });
            ctx.restore();
        }
    };

    function createStatsChart(ctx, labels, data, league) {
        return new Chart(ctx, {
            type: 'line',
            data: {
                labels: labels,
                datasets: [
                    { label: 'Gols FT', data: data.golsFT, borderColor: '#1E88E5', backgroundColor: '#1E88E5', hidden: !statsChartVisibleDatasets['Gols FT'] },
                    { label: 'Casa Vence', data: data.casaVence, borderColor: '#AB47BC', backgroundColor: '#AB47BC', hidden: !statsChartVisibleDatasets['Casa Vence'] },
                    { label: 'Empate', data: data.empate, borderColor: '#78909C', backgroundColor: '#78909C', hidden: !statsChartVisibleDatasets['Empate'] },
                    { label: 'Fora Vence', data: data.foraVence, borderColor: '#2196F3', backgroundColor: '#2196F3', hidden: !statsChartVisibleDatasets['Fora Vence'] },
                    { label: 'Ambas Sim', data: data.ambasSim, borderColor: '#B0BEC5', backgroundColor: '#B0BEC5', hidden: !statsChartVisibleDatasets['Ambas Sim'] },
                    { label: 'Ambas Não', data: data.ambasNao, borderColor: '#F44336', backgroundColor: '#F44336', hidden: !statsChartVisibleDatasets['Ambas Não'] },
                    { label: 'Over 1.5', data: data.over15, borderColor: '#26A69A', backgroundColor: '#26A69A', hidden: !statsChartVisibleDatasets['Over 1.5'] },
                    { label: 'Over 2.5', data: data.over25, borderColor: '#FFEB3B', backgroundColor: '#FFEB3B', hidden: !statsChartVisibleDatasets['Over 2.5'] },
                    { label: 'Over 3.5', data: data.over35, borderColor: '#00BCD4', backgroundColor: '#00BCD4', hidden: !statsChartVisibleDatasets['Over 3.5'] },
                    { label: 'Under 1.5', data: data.under15, borderColor: '#388E3C', backgroundColor: '#388E3C', hidden: !statsChartVisibleDatasets['Under 1.5'] },
                    { label: 'Under 2.5', data: data.under25, borderColor: '#FF9800', backgroundColor: '#FF9800', hidden: !statsChartVisibleDatasets['Under 2.5'] },
                    { label: 'Under 3.5', data: data.under35, borderColor: '#F06292', backgroundColor: '#F06292', hidden: !statsChartVisibleDatasets['Under 3.5'] },
                    { label: '0 Gol Exato', data: data.gol0, borderColor: '#D81B60', backgroundColor: '#D81B60', hidden: !statsChartVisibleDatasets['0 Gol Exato'] },
                    { label: '1 Gol Exato', data: data.gol1, borderColor: '#8E24AA', backgroundColor: '#8E24AA', hidden: !statsChartVisibleDatasets['1 Gol Exato'] },
                    { label: '2 Gols Exatos', data: data.gol2, borderColor: '#A0522D', backgroundColor: '#A0522D', hidden: !statsChartVisibleDatasets['2 Gols Exatos'] },
                    { label: '3 Gols Exatos', data: data.gol3, borderColor: '#546E7A', backgroundColor: '#546E7A', hidden: !statsChartVisibleDatasets['3 Gols Exatos'] },
                    { label: '4 Gols Exatos', data: data.gol4, borderColor: '#FFB300', backgroundColor: '#FFB300', hidden: !statsChartVisibleDatasets['4 Gols Exatos'] },
                    { label: '5 Gols Exatos', data: data.gol5, borderColor: '#00897B', backgroundColor: '#00897B', hidden: !statsChartVisibleDatasets['5 Gols Exatos'] }
                ].map(dataset => ({
                    ...dataset,
                    borderWidth: 2,
                    pointRadius: 4,
                    pointBackgroundColor: dataset.borderColor,
                    fill: false
                }))
            },
            options: {
                responsive: true,
                layout: { 
                    padding: { 
                        top: 30,
                        right: 50
                    } 
                },
                plugins: {
                    legend: {
                        display: true,
                        labels: { color: '#e0e0e0', font: { size: 12 } },
                        onClick: function(e, legendItem, legend) {
                            const dataset = legendItem.datasetIndex;
                            const ci = legend.chart;
                            const meta = ci.getDatasetMeta(dataset);
                            meta.hidden = !meta.hidden;
                            statsChartVisibleDatasets[legendItem.text] = !meta.hidden;
                            ci.update();
                        }
                    },
                    datalabels: {
                        display: showDataLabels,
                        color: '#e0e0e0',
                        font: { size: 10 },
                        formatter: (value) => Math.round(value),
                        anchor: 'end',
                        align: 'top',
                        offset: 1
                    },
                    tooltip: {
                        enabled: true,
                        backgroundColor: 'rgba(0, 0, 0, 0.8)',
                        titleColor: '#1fad8b',
                        bodyColor: '#e0e0e0',
                        borderColor: '#1fad8b',
                        borderWidth: 1,
                        callbacks: {
                            title: function(tooltipItems) {
                                const league = leagues.find(l => chartInstances[l] === tooltipItems[0].chart);
                                const index = tooltipItems[0].dataIndex + averagePoints;
                                const match = chartData[league][index];
                                return `${match.hora}:${match.minuto.toString().padStart(2, '0')}`;
                            },
                            label: function(tooltipItem) {
                                const league = leagues.find(l => chartInstances[l] === tooltipItem.chart);
                                const index = tooltipItem.dataIndex + averagePoints;
                                const match = chartData[league][index];
                                const ftScore = match.ft || 'N/A';
                                const htScore = formatHtResult(match.ht) || 'N/A';
                                return [
                                    `FT: ${ftScore}`,
                                    `HT: ${htScore}`,
                                    `${tooltipItem.dataset.label}: ${Math.round(tooltipItem.raw)}`
                                ];
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        title: { display: true, text: '', color: '#1fad8b', font: { size: 14 } },
                        ticks: { color: '#b0b0b0', maxRotation: 45, minRotation: 45 },
                        grid: { color: 'rgba(255, 255, 255, 0.1)', borderDash: [5, 5] }
                    },
                    y: {
                        title: { display: true, text: '', color: '#1fad8b', font: { size: 14 } },
                        beginAtZero: false,
                        ticks: { color: '#b0b0b0' },
                        grid: { color: 'rgba(255, 255, 255, 0.1)', borderDash: [5, 5] },
                        afterFit: function(scale) { scale.paddingTop = 20; }
                    }
                }
            },
            plugins: [ChartDataLabels, fibonacciLinesPlugin]
        });
    }

    function updateCharts() {
        const timestamp = new Date().getTime();
        const leagueUrls = {
            'CopaAmerica': 'https://betstat.site/resultados/Copa%20Am%C3%A9rica',
            'TacaGloria': 'https://betstat.site/resultados/Ta%C3%A7a%20Gl%C3%B3ria%20eterna',
            'Euro': 'https://betstat.site/resultados/Euro',
            'CampeonatoItaliano': 'https://betstat.site/resultados/Campeonato%20Italiano',
            'CopaEstrelas': 'https://betstat.site/resultados/Copa%20das%20estrelas',
            'brasileirao': 'https://betstat.site/resultados/Brasileir%C3%A3o%20Betano',
        };

        leagues.forEach(league => {
            const apiUrl = `${leagueUrls[league]}?timestamp=${timestamp}`;
            console.log(`Buscando dados para ${league} em: ${apiUrl}`);
            fetch(apiUrl)
                .then(response => {
                    if (!response.ok) throw new Error(`HTTP error! Status: ${response.status}`);
                    return response.json();
                })
                .then(data => {
                    console.log(`Dados processados para ${league}:`, data);
                    const processedData = processApiData(data, league);
                    const chartId = `${league.toLowerCase()}Chart`;
                    const canvasElement = document.getElementById(chartId);
                    if (!canvasElement) {
                        console.error(`Canvas com ID '${chartId}' não encontrado no DOM`);
                        return;
                    }
                    if (!chartInstances[league]) {
                        const ctx = canvasElement.getContext('2d');
                        chartInstances[league] = createStatsChart(ctx, processedData.labels, processedData, league);
                        console.log(`Gráfico criado para ${league}`);
                    } else {
                        updateStatsChart(chartInstances[league], processedData);
                        console.log(`Gráfico atualizado para ${league}`);
                    }
                })
                .catch(error => console.error(`Erro ao buscar dados para ${league}:`, error));
        });
    }

    function toggleFibonacciLines() {
        showFibonacciLines = document.getElementById('fibonacciToggle').checked;
        leagues.forEach(league => {
            if (chartInstances[league]) chartInstances[league].update();
        });
    }

    function toggleDataLabels() {
        showDataLabels = document.getElementById('dataLabelsToggle').checked;
        leagues.forEach(league => {
            if (chartInstances[league]) {
                chartInstances[league].options.plugins.datalabels.display = showDataLabels;
                chartInstances[league].update();
            }
        });
    }

    document.querySelectorAll('.accordion-header').forEach(header => {
        header.addEventListener('click', () => {
            const content = header.nextElementSibling;
            content.classList.toggle('active');
        });
    });

    document.getElementById('pointsSelector').addEventListener('change', function(event) {
        numPoints = parseInt(event.target.value, 10);
        updateCharts();
    });

    document.getElementById('averageSelector').addEventListener('change', function(event) {
        averagePoints = parseInt(event.target.value, 10);
        updateCharts();
    });

    document.getElementById('fibonacciToggle').addEventListener('change', toggleFibonacciLines);
    document.getElementById('dataLabelsToggle').addEventListener('change', toggleDataLabels);

    window.onload = updateCharts;
    setInterval(updateCharts, 3000);
    </script>

</body>
</html>
