<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Scanner Elite - Customizado</title>
    <style>
        :root {
            --bg: #1c1f26; --card: #252a33; --accent: #ff9000;
            --green: #00ff88; --red: #ff4444; --text: #e0e0e0;
        }
        body { background: var(--bg); color: var(--text); font-family: 'Inter', sans-serif; margin: 0; padding: 20px; }
        
        /* Controles Superiores */
        .toolbar { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; background: var(--card); padding: 20px; border-radius: 12px; border: 1px solid #2d343e; margin-bottom: 25px; box-shadow: 0 4px 15px rgba(0,0,0,0.3); }
        select { background: #121418; color: white; border: 1px solid #3d4452; padding: 10px; border-radius: 6px; outline: none; }
        select:focus { border-color: var(--accent); }
        label { display: block; font-size: 0.7em; color: var(--accent); text-transform: uppercase; margin-bottom: 5px; font-weight: bold; }

        /* Grid de Destaques */
        .stats-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 25px; }
        .stat-card { background: var(--card); padding: 20px; border-radius: 12px; border: 1px solid #2d343e; text-align: center; }
        .stat-value { font-size: 2.5em; font-weight: bold; color: var(--green); display: block; }
        
        /* Lista de Resultados Estilizada */
        .main-card { background: var(--card); border-radius: 12px; border: 1px solid #2d343e; padding: 20px; }
        .log-list { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 10px; margin-top: 15px; }
        .log-item { background: #1c1f26; padding: 12px; border-radius: 8px; border-left: 4px solid #3d4452; display: flex; justify-content: space-between; align-items: center; }
        .log-item.win { border-left-color: var(--green); background: rgba(0, 255, 136, 0.05); }
        .log-item.loss { border-left-color: var(--red); }
        
        .badge { font-size: 0.8em; font-weight: bold; padding: 2px 6px; border-radius: 4px; background: #3d4452; }
        .win-txt { color: var(--green); }
        .loss-txt { color: var(--red); }

        h2 { margin: 0 0 15px 0; font-size: 1.1em; text-transform: uppercase; letter-spacing: 1px; color: var(--accent); }
    </style>
</head>
<body>

<div class="toolbar">
    <div>
        <label>Liga</label>
        <select id="liga" onchange="processar()">
            <option value="Ta√ßa Gl√≥ria Eterna">Ta√ßa Gl√≥ria Eterna</option>
            <option value="Copa Am√©rica">Copa Am√©rica</option>
            <option value="Euro">Euro</option>
            <option value="Campeonato Italiano">Campeonato Italiano</option>
            <option value="Copa das Estrelas">Copa das Estrelas</option>
            <option value="Brasileir√£o Betano">Brasileir√£o Betano</option>
        </select>
    </div>
    <div>
        <label>Mercado Analisado</label>
        <select id="mercado" onchange="processar()">
            <option value="ambasMarcam">Ambas Sim</option>
            <option value="ambasNaoMarcam">Ambas N√£o</option>
            <option value="casaVence">Casa vence</option>
            <option value="foraVence">Fora vence</option>
            <option value="empate">Empate</option>
            <option value="over1.5">Over 1.5</option>
            <option value="under1.5">Under 1.5</option>
            <option value="over2.5">Over 2.5</option>
            <option value="under2.5">Under 2.5</option>
            <option value="over3.5">Over 3.5</option>
            <option value="under3.5">Under 3.5</option>
            <option value="over5">Over 5+</option>
            <option value="exato0">Exato 0</option>
            <option value="exato1">Exato 1</option>
            <option value="exato2">Exato 2</option>
            <option value="exato3">Exato 3</option>
            <option value="exato4">Exato 4</option>
        </select>
    </div>
    <div>
        <label>Per√≠odo</label>
        <select id="horas" onchange="processar()">
            <option value="3">√öltimas 3h</option>
            <option value="6">√öltimas 6h</option>
            <option value="12">√öltimas 12h</option>
            <option value="24" selected>√öltimas 24h</option>
            <option value="48">√öltimas 48h</option>
            <option value="72">√öltimas 72h</option>
        </select>
    </div>
</div>

<div class="stats-row">
    <div class="stat-card">
        <label>Assertividade Geral</label>
        <span class="stat-value" id="perc">0%</span>
    </div>
    <div class="stat-card">
        <label>Maior Sequ√™ncia Sem (Atraso)</label>
        <span class="stat-value" id="max-delay" style="color: var(--accent);">0</span>
    </div>
    <div class="stat-card">
        <label>Total de Jogos no Per√≠odo</label>
        <span class="stat-value" id="total" style="color: #fff;">0</span>
    </div>
</div>

<div class="main-card">
    <h2>üìã Hist√≥rico de Minera√ß√£o (Mais Recentes Primeiro)</h2>
    <div id="logs" class="log-list"></div>
</div>

<script>
const REGRAS = {
    ambasMarcam: g => g[0] > 0 && g[1] > 0,
    ambasNaoMarcam: g => g[0] === 0 || g[1] === 0,
    casaVence: g => g[0] > g[1],
    foraVence: g => g[1] > g[0],
    empate: g => g[0] === g[1],
    'over1.5': g => (g[0]+g[1]) > 1.5,
    'under1.5': g => (g[0]+g[1]) < 1.5,
    'over2.5': g => (g[0]+g[1]) > 2.5,
    'under2.5': g => (g[0]+g[1]) < 2.5,
    'over3.5': g => (g[0]+g[1]) > 3.5,
    'under3.5': g => (g[0]+g[1]) < 3.5,
    over5: g => (g[0]+g[1]) > 5,
    exato0: g => (g[0]+g[1]) === 0,
    exato1: g => (g[0]+g[1]) === 1,
    exato2: g => (g[0]+g[1]) === 2,
    exato3: g => (g[0]+g[1]) === 3,
    exato4: g => (g[0]+g[1]) === 4
};

async function processar() {
    const liga = document.getElementById('liga').value;
    const mercado = document.getElementById('mercado').value;
    const horas = parseInt(document.getElementById('horas').value);

    try {
        const data = await fetch(`https://betstat.site/resultados/${encodeURIComponent(liga)}`).then(r => r.json());
        
        // Filtro de tempo
        const agora = new Date();
        const limite = agora.getTime() - (horas * 60 * 60 * 1000);
        
        // Inverte para ler de tr√°s pra frente (Recente primeiro)
        const lista = data.filter(j => new Date(j.data).getTime() >= limite).reverse();

        let greens = 0, delayAtual = 0, maxDelay = 0;
        const container = document.getElementById('logs');
        container.innerHTML = '';

        lista.forEach(j => {
            const placar = j.ft.split(' x ').map(Number);
            const bateu = REGRAS[mercado](placar);

            if(bateu) {
                greens++;
                if(delayAtual > maxDelay) maxDelay = delayAtual;
                delayAtual = 0;
            } else {
                delayAtual++;
            }

            container.innerHTML += `
                <div class="log-item ${bateu ? 'win' : 'loss'}">
                    <div>
                        <span class="badge">${j.hora}:${j.minuto}</span>
                        <small style="margin-left:5px">${j.time_a} x ${j.time_b}</small>
                    </div>
                    <div class="${bateu ? 'win-txt' : 'loss-txt'}" style="font-weight:bold">
                        ${j.ft} ${bateu ? '‚úî' : '‚úò'}
                    </div>
                </div>
            `;
        });

        document.getElementById('perc').innerText = lista.length ? ((greens/lista.length)*100).toFixed(1) + '%' : '0%';
        document.getElementById('max-delay').innerText = maxDelay;
        document.getElementById('total').innerText = lista.length;

    } catch(e) { console.error(e); }
}

processar();
setInterval(processar, 30000);
</script>
</body>
</html>