<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Scanner Pro - InversÃ£o CronolÃ³gica</title>
    <style>
        :root {
            --bg: #1c1f26; --card: #252a33; --accent: #ff9000;
            --green: #00ff88; --red: #ff4444; --text: #e0e0e0;
        }
        body { background: var(--bg); color: var(--text); font-family: 'Segoe UI', sans-serif; margin: 0; padding: 15px; }
        
        /* Menu Lateral e Header */
        .top-bar { display: flex; justify-content: space-between; align-items: center; padding: 10px 20px; background: #121418; border-bottom: 2px solid var(--accent); margin-bottom: 20px; }
        .ligas-container { display: flex; gap: 8px; overflow-x: auto; padding: 10px 0; }
        .btn-liga { background: #2d343e; border: none; color: #888; padding: 8px 16px; border-radius: 4px; cursor: pointer; white-space: nowrap; }
        .btn-liga.active { background: var(--accent); color: #000; font-weight: bold; }

        /* Grid de Delay */
        .delay-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 12px; margin-bottom: 20px; }
        .delay-card { background: var(--card); padding: 15px; border-radius: 8px; text-align: center; border: 1px solid #2d343e; position: relative; }
        .delay-card.critical { border-color: var(--red); box-shadow: inset 0 0 10px rgba(255, 68, 68, 0.2); }
        .delay-card.value { border-color: var(--green); box-shadow: inset 0 0 10px rgba(0, 255, 136, 0.2); }
        .delay-num { font-size: 1.8em; font-weight: bold; color: var(--accent); display: block; }
        .market-label { font-size: 0.75em; color: #aaa; text-transform: uppercase; letter-spacing: 1px; }

        /* Status */
        .status-pill { padding: 4px 10px; border-radius: 20px; font-size: 0.7em; font-weight: bold; background: #3d4452; }
        .live { background: var(--red); animation: blink 1s infinite; }
        @keyframes blink { 50% { opacity: 0.5; } }
    </style>
</head>
<body>

<div class="top-bar">
    <h1 style="margin:0; font-size: 1.2em;">VIRTUAL <span style="color:var(--accent)">SCANNER</span></h1>
    <div id="last-update" class="status-pill">Sincronizando...</div>
</div>

<div class="ligas-container" id="menu-ligas"></div>

<h3 style="color: var(--accent); border-left: 4px solid var(--accent); padding-left: 10px;">ðŸ“Š CICLOS DE ATRASO (ORDEM INVERSA)</h3>
<div class="delay-grid" id="grid-delays"></div>

<script>
const LIGAS = ["TaÃ§a GlÃ³ria Eterna", "Copa AmÃ©rica", "Euro", "Campeonato Italiano", "Copa das Estrelas", "BrasileirÃ£o Betano"];
let ligaAtual = LIGAS[0];
const API = "https://betstat.site";

const mercados = {
    "Ambas Sim": (g) => g[0] > 0 && g[1] > 0,
    "Ambas NÃ£o": (g) => g[0] === 0 || g[1] === 0,
    "Casa": (g) => g[0] > g[1],
    "Fora": (g) => g[1] > g[0],
    "Empate": (g) => g[0] === g[1],
    "Over 1.5": (g) => (g[0]+g[1]) > 1.5,
    "Under 1.5": (g) => (g[0]+g[1]) < 1.5,
    "Over 2.5": (g) => (g[0]+g[1]) > 2.5,
    "Under 2.5": (g) => (g[0]+g[1]) < 2.5,
    "Over 3.5": (g) => (g[0]+g[1]) > 3.5,
    "Over 5+": (g) => (g[0]+g[1]) > 5,
    "Exato 0": (g) => (g[0]+g[1]) === 0,
    "Exato 1": (g) => (g[0]+g[1]) === 1,
    "Exato 2": (g) => (g[0]+g[1]) === 2,
    "Exato 3": (g) => (g[0]+g[1]) === 3,
    "Exato 4": (g) => (g[0]+g[1]) === 4
};

async function engine() {
    try {
        const resRaw = await fetch(`${API}/resultados/${encodeURIComponent(ligaAtual)}`).then(r => r.json());
        
        // --- O PULO DO GATO: INVERSÃƒO CRONOLÃ“GICA ---
        // Se o Ãºltimo jogo da lista for o mais recente, o reverse coloca ele na posiÃ§Ã£o [0]
        const resultadosCrescente = [...resRaw].reverse(); 

        const container = document.getElementById('grid-delays');
        container.innerHTML = '';

        Object.keys(mercados).forEach(nome => {
            let delay = 0;
            for(let jogo of resultadosCrescente) {
                const placar = jogo.ft.split(' x ').map(Number);
                if(mercados[nome](placar)) break;
                delay++;
            }

            let classe = '';
            if(delay >= 10) classe = 'critical';
            else if(delay >= 6) classe = 'value';

            container.innerHTML += `
                <div class="delay-card ${classe}">
                    <span class="market-label">${nome}</span>
                    <span class="delay-num">${delay}</span>
                    <small style="font-size:0.6em; color:#666">SEQUÃŠNCIA SEM</small>
                </div>
            `;
        });

        const ult = resultadosCrescente[0];
        document.getElementById('last-update').innerHTML = `<span class="live"></span> LIVE: JOGO ${ult.hora}:${ult.minuto} (${ult.ft})`;

    } catch(e) { console.error("Erro Engine:", e); }
}

// Menu dinÃ¢mico
const nav = document.getElementById('menu-ligas');
LIGAS.forEach(l => {
    const b = document.createElement('button');
    b.className = `btn-liga ${l === ligaAtual ? 'active' : ''}`;
    b.innerText = l;
    b.onclick = () => {
        document.querySelectorAll('.btn-liga').forEach(x => x.classList.remove('active'));
        b.classList.add('active');
        ligaAtual = l;
        engine();
    };
    nav.appendChild(b);
});

setInterval(engine, 30000);
engine();
</script>
</body>
</html>