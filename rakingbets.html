<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="img/favicon.ico" type="image/x-icon" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-4WT805FFHQ"
    ></script>
    <title>BetStat</title>
    <!-- Meta tags SEO principais -->
    <meta
      name="description"
      content="Transforme suas apostas com BetStat - a única plataforma especializada em futebol virtual Betano. Análises precisas, estatísticas confiáveis e resultados comprovados para investimentos inteligentes."
    />
    <meta
      name="keywords"
      content="BetStat, apostas esportivas, futebol virtual, Betano, estatísticas apostas, análise apostas, investimentos esportivos"
    />

    <!-- Open Graph meta tags para redes sociais -->
    <meta
      property="og:title"
      content="BetStat | Plataforma de Análise para Apostas Esportivas"
    />
    <meta
      property="og:description"
      content="Transforme suas apostas com análises precisas e estatísticas confiáveis. A única plataforma especializada em futebol virtual Betano."
    />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://www.betstat.site/payment.html" />
    <meta property="og:site_name" content="BetStat" />

    <!-- Meta tags adicionais -->
    <meta name="robots" content="index, follow" />
    <meta name="author" content="BetStat" />
    <meta name="canonical" href="https://www.betstat.site/payment.html" />
    <script type="module" src="js/firebase-auth.js"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-4WT805FFHQ");
    </script>
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap"
      rel="stylesheet"
    />
  </head>

  <style>


  .logo2 {
  width: 60px;      /* define a largura fixa */
  height: auto;     /* mantém a proporção da imagem */
}
  
  /* Adicionar um espaço apenas ao primeiro elemento accordion-item */
  .accordion-item:first-of-type {
    margin-top: 30px;  /* Espaço igual à altura do cabeçalho fixo */
  }
  
  
  .logo {
      height: 30px;
  }
  
  
  .selectors-container {
    display: flex;
    align-items: center;
    gap: 10px; 
  }
  
  .nav-seletor {
    display: flex;
    align-items: center;
    color: #ffffff;
    font-weight: 500;
  }

      .logout-btn {
      background-color: #1c1f26;; /* Fundo vermelho */
      color: white; /* Texto branco */
      padding: 8px 10px; /* Espaçamento interno */
      font-size: 14px; /* Tamanho da fonte */
      border-radius: 5px; /* Cantos arredondados */
      cursor: pointer; /* Cursor de botão */
      border: 1px solid #ffffff81;
    }

    .logout-btn:hover {
      background-color: #720000; /* Cor ao passar o mouse */
    }
  
  .nav-seletor select {
    padding: 0.5rem ;
    border-radius: 6px;
    background-color: #1c1f26;
    color: var(--text-color);
    border: 1px solid var(--border-color);
    cursor: pointer;
    transition: all 0.3s ease;
  }
body {
    background: linear-gradient(135deg, #1c1f26 0%, #242832 100%);
    color: #ffffff;
    font-family: 'Roboto', Arial, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    margin: 0;
    padding: 20px;
    min-height: 100vh;
}

.container {
    max-width: 1800px;
    margin: 0 auto;
}

h1 {
    text-align: center;
    margin-bottom: 20px;
    color: #1fac89;
    font-weight: 600;
}

.controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    flex-wrap: wrap;
    gap: 15px;
}

.control-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.control-group label {
    font-size: 14px;
    font-weight: 500;
    color: #b8bcc3;
}

.controls select, .controls input {
    padding: 12px 16px;
    border: 2px solid #333;
    border-radius: 8px;
    background-color: #2a2e38;
    color: #ffffff;
    font-size: 14px;
    transition: border-color 0.3s ease;
}

.controls select:hover, .controls input:hover,
.controls select:focus, .controls input:focus {
    outline: none;
    border-color: #1fac89;
}

.top-cards {
    display: flex;
    justify-content: space-between;
    margin-bottom: 24px;
    flex-wrap: wrap;
    gap: 16px;
}

.card {
    background: linear-gradient(145deg, #005540, #004a37);
    padding: 20px;
    border-radius: 12px;
    text-align: center;
    flex: 1;
    min-width: 200px;
    border: 1px solid rgba(255, 255, 255, 0.05);
    transition: transform 0.3s ease;
}

.card:hover {
    transform: translateY(-2px);
}

.card p {
    margin: 8px 0;
    font-size: 14px;
    font-weight: 500;
}

.league-table {
    margin-bottom: 24px;
}

.league-table h2 {
    color: #1fac89;
    margin-bottom: 16px;
    font-size: 20px;
    font-weight: 600;
}

.ranking-table {
    width: 100%;
    background: transparent;
    border-collapse: separate;
    border-spacing: 0 2px;
    font-size: 14px;
}

.ranking-table th, .ranking-table td {
    padding: 12px 10px;
    text-align: center;
    vertical-align: middle;
    border-radius: 5px;
    transition: background-color 0.2s ease;
}

.ranking-table th {
    background-color: #2a2e38;
    color: #ffffff;
    font-weight: bold;
    text-align: center;
    border: 1px solid rgba(255, 255, 255, 0.05);
}

.ranking-table td {
    background-color: #2a2e38;
    border: 1px solid rgba(255, 255, 255, 0.05);
}

.ranking-table tr:hover td {
    background-color: #3a3e48;
    cursor: pointer;
}

.top-3 {
    background-color: #005540 !important;
    border-left: 3px solid #1fac89;
}

.top-4-5 {
    background-color: #003d2e !important;
    border-left: 3px solid #1fac89;
}

.movement-up::after {
    content: '↑' attr(data-movement);
    color: #1fac89;
    font-size: 12px;
    margin-left: 4px;
    font-weight: bold;
}

.movement-down::after {
    content: '↓' attr(data-movement);
    color: #ff5555;
    font-size: 12px;
    margin-left: 4px;
    font-weight: bold;
}

.movement-stable::after {
    content: '−';
    color: #ffffff;
    font-size: 12px;
    margin-left: 4px;
    opacity: 0.7;
}

.error {
    color: #ff5555;
    text-align: center;
    margin-top: 20px;
    padding: 16px;
    background-color: rgba(255, 85, 85, 0.1);
    border-radius: 8px;
    border: 1px solid rgba(255, 85, 85, 0.2);
}

@media (max-width: 768px) {
    body {
        padding: 12px;
    }
    
    .controls, .top-cards {
        flex-direction: column;
    }
    
    .card {
        min-width: 100%;
    }
    
    .ranking-table {
        font-size: 12px;
    }
    
    .ranking-table th, .ranking-table td {
        padding: 8px 6px;
    }
    
    .controls select, .controls input {
        padding: 10px 12px;
    }
}

@media (max-width: 480px) {
    .ranking-table th, .ranking-table td {
        padding: 6px 4px;
        font-size: 11px;
    }
    
    .card {
        padding: 16px;
    }
    
    .card p {
        font-size: 12px;
    }
}
  </style>

  <body>
    <body>
      <div id="header"></div>

      <br>
      <br>
       <br>
      <br>

    <div class="container">
        <div class="controls">
            <div class="control-group">
                <label for="league">Selecionar Liga</label>
                <select id="league">
                    <option value="Brasil" data-url="https://betstat.site/resultados/betsson/Brasil">Brasil</option>
                    <option value="Inglaterra" data-url="https://betstat.site/resultados/betsson/Inglaterra">Inglaterra</option>
                    <option value="Espanha" data-url="https://betstat.site/resultados/betsson/Espanha">Espanha</option>
                    <option value="all">Todas as Ligas</option>
                </select>
            </div>
            <div class="control-group">
                <label for="currentTimeRange">Hora Atual</label>
                <select id="currentTimeRange">
                    <option value="60">3 Horas</option>
                    <option value="120">6 Horas</option>
                    <option value="240">12 Horas</option>
                    <option value="480">24 Horas</option>
                    <option value="960">48 Horas</option>
                    <option value="1440">72 Horas</option>
                </select>
            </div>
            <div class="control-group">
                <label for="compareTimeRange">Hora Comparação</label>
                <select id="compareTimeRange">
                    <option value="0" selected>Sem Comparação</option>
                    <option value="60">3 Horas</option>
                    <option value="120">6 Horas</option>
                    <option value="240">12 Horas</option>
                    <option value="480">24 Horas</option>
                    <option value="960">48 Horas</option>
                    <option value="1440">72 Horas</option>
                </select>
            </div>
            <div class="control-group">
                <label for="market">Mercado</label>
                <select id="market">
                    <option value="ambos-sim">Ambas Marcam (Sim)</option>
                    <option value="ambos-nao">Ambas Marcam (Não)</option>
                    <option value="casaVence">Casa Vence</option>
                    <option value="foraVence">Fora Vence</option>
                    <option value="empates">Empates</option>
                    <option value="over1_5">Over 1.5 Gols</option>
                    <option value="under1_5">Under 1.5 Gols</option>
                    <option value="over2_5">Over 2.5 Gols</option>
                    <option value="under2_5">Under 2.5 Gols</option>
                    <option value="over3_5">Over 3.5 Gols</option>
                    <option value="under3_5">Under 3.5 Gols</option>
                    <option value="cincoMaisGols">5+ Gols</option>
                </select>
            </div>
            <div class="control-group">
                <label for="resultType">Resultado</label>
                <select id="resultType">
                    <option value="ft" selected>FT</option>
                    <option value="ht">HT</option>
                </select>
            </div>
            <div class="control-group">
                <label for="searchTeam">Pesquisar Time</label>
                <input type="text" id="searchTeam" placeholder="Pesquisar time...">
            </div>
        </div>
        <div class="top-cards" id="top-cards">
            <div class="card" id="top1"></div>
            <div class="card" id="top2"></div>
            <div class="card" id="top3"></div>
        </div>
        <div id="ranking"></div>
    </div>
    </div>



    <script>
        let intervalId;
        let isTableInitialized = false;
        let previousRankings = {}; // Armazena rankings por intervalo de tempo, mercado e liga

        // Função para formatar números como porcentagem
        function formatPercentage(value, total) {
            return total > 0 ? ((value / total) * 100).toFixed(1) + '%' : '0%';
        }

        async function fetchRanking() {
            const selectedLeague = document.getElementById("league").value;
            const currentTimeRange = parseInt(document.getElementById("currentTimeRange").value);
            const compareTimeRange = parseInt(document.getElementById("compareTimeRange").value);
            const selectedMarket = document.getElementById("market").value;
            const resultType = document.getElementById("resultType").value;
            const searchQuery = document.getElementById("searchTeam").value.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "");
            const rankingDiv = document.getElementById("ranking");
            const topCardsDiv = document.getElementById("top-cards");

            const leagueUrls = {
                "Brasil": "https://betstat.site/resultados/betsson/Brasil",
                "Inglaterra": "https://betstat.site/resultados/betsson/Inglaterra",
                "Espanha": "https://betstat.site/resultados/betsson/Espanha",
            };

            try {
                if (selectedLeague === "all") {
                    topCardsDiv.style.display = "none";
                    let allTables = "";
                    for (const league of Object.keys(leagueUrls)) {
                        const url = leagueUrls[league];
                        const rankingResponse = await fetch(url);
                        if (!rankingResponse.ok) throw new Error(`Erro na requisição para ${league}: ${rankingResponse.status}`);
                        const rankingData = await rankingResponse.json();

                        const currentGames = Array.isArray(rankingData) ? rankingData.slice(0, currentTimeRange) : [rankingData];
                        const compareGames = compareTimeRange > 0 ? (Array.isArray(rankingData) ? rankingData.slice(0, compareTimeRange) : [rankingData]) : [];
                        const currentRanking = {};
                        const compareRanking = {};

                        currentGames.forEach((game) => {
                            const [golsA, golsB] = (resultType === "ft" ? game.ft : game.ht).split(" x ").map(Number) || [0, 0];
                            const timeA = game.time_a;
                            const timeB = game.time_b;
                            const totalGols = golsA + golsB;

                            currentRanking[timeA] = currentRanking[timeA] || {
                                totalJogos: 0, golsMarcados: 0, golsSofridos: 0, vitorias: 0, empates: 0, derrotas: 0,
                                ambosSim: 0, ambosNao: 0, over1_5: 0, under1_5: 0, over2_5: 0, under2_5: 0,
                                over3_5: 0, under3_5: 0, casaVence: 0, foraVence: 0, cincoMaisGols: 0, league: league
                            };
                            currentRanking[timeB] = currentRanking[timeB] || {
                                totalJogos: 0, golsMarcados: 0, golsSofridos: 0, vitorias: 0, empates: 0, derrotas: 0,
                                ambosSim: 0, ambosNao: 0, over1_5: 0, under1_5: 0, over2_5: 0, under2_5: 0,
                                over3_5: 0, under3_5: 0, casaVence: 0, foraVence: 0, cincoMaisGols: 0, league: league
                            };

                            currentRanking[timeA].totalJogos += 1;
                            currentRanking[timeB].totalJogos += 1;
                            currentRanking[timeA].golsMarcados += golsA;
                            currentRanking[timeB].golsMarcados += golsB;
                            currentRanking[timeA].golsSofridos += golsB;
                            currentRanking[timeB].golsSofridos += golsA;

                            if (golsA > golsB) {
                                currentRanking[timeA].vitorias += 1;
                                currentRanking[timeB].derrotas += 1;
                                currentRanking[timeA].casaVence += 1;
                            } else if (golsA < golsB) {
                                currentRanking[timeB].vitorias += 1;
                                currentRanking[timeA].derrotas += 1;
                                currentRanking[timeB].foraVence += 1;
                            } else {
                                currentRanking[timeA].empates += 1;
                                currentRanking[timeB].empates += 1;
                            }

                            if (golsA > 0 && golsB > 0) {
                                currentRanking[timeA].ambosSim += 1;
                                currentRanking[timeB].ambosSim += 1;
                            } else {
                                currentRanking[timeA].ambosNao += 1;
                                currentRanking[timeB].ambosNao += 1;
                            }

                            if (totalGols > 1) {
                                currentRanking[timeA].over1_5 += 1;
                                currentRanking[timeB].over1_5 += 1;
                            } else {
                                currentRanking[timeA].under1_5 += 1;
                                currentRanking[timeB].under1_5 += 1;
                            }

                            if (totalGols > 2) {
                                currentRanking[timeA].over2_5 += 1;
                                currentRanking[timeB].over2_5 += 1;
                            } else {
                                currentRanking[timeA].under2_5 += 1;
                                currentRanking[timeB].under2_5 += 1;
                            }

                            if (totalGols > 3) {
                                currentRanking[timeA].over3_5 += 1;
                                currentRanking[timeB].over3_5 += 1;
                            } else {
                                currentRanking[timeA].under3_5 += 1;
                                currentRanking[timeB].under3_5 += 1;
                            }

                            if (totalGols >= 5) {
                                currentRanking[timeA].cincoMaisGols += 1;
                                currentRanking[timeB].cincoMaisGols += 1;
                            }
                        });

                        if (compareTimeRange > 0) {
                            compareGames.forEach((game) => {
                                const [golsA, golsB] = (resultType === "ft" ? game.ft : game.ht).split(" x ").map(Number) || [0, 0];
                                const timeA = game.time_a;
                                const timeB = game.time_b;
                                const totalGols = golsA + golsB;

                                compareRanking[timeA] = compareRanking[timeA] || {
                                    totalJogos: 0, golsMarcados: 0, golsSofridos: 0, vitorias: 0, empates: 0, derrotas: 0,
                                    ambosSim: 0, ambosNao: 0, over1_5: 0, under1_5: 0, over2_5: 0, under2_5: 0,
                                    over3_5: 0, under3_5: 0, casaVence: 0, foraVence: 0, cincoMaisGols: 0, league: league
                                };
                                compareRanking[timeB] = compareRanking[timeB] || {
                                    totalJogos: 0, golsMarcados: 0, golsSofridos: 0, vitorias: 0, empates: 0, derrotas: 0,
                                    ambosSim: 0, ambosNao: 0, over1_5: 0, under1_5: 0, over2_5: 0, under2_5: 0,
                                    over3_5: 0, under3_5: 0, casaVence: 0, foraVence: 0, cincoMaisGols: 0, league: league
                                };

                                compareRanking[timeA].totalJogos += 1;
                                compareRanking[timeB].totalJogos += 1;
                                compareRanking[timeA].golsMarcados += golsA;
                                compareRanking[timeB].golsMarcados += golsB;
                                compareRanking[timeA].golsSofridos += golsB;
                                compareRanking[timeB].golsSofridos += golsA;

                                if (golsA > golsB) {
                                    compareRanking[timeA].vitorias += 1;
                                    compareRanking[timeB].derrotas += 1;
                                    compareRanking[timeA].casaVence += 1;
                                } else if (golsA < golsB) {
                                    compareRanking[timeB].vitorias += 1;
                                    compareRanking[timeA].derrotas += 1;
                                    compareRanking[timeB].foraVence += 1;
                                } else {
                                    compareRanking[timeA].empates += 1;
                                    compareRanking[timeB].empates += 1;
                                }

                                if (golsA > 0 && golsB > 0) {
                                    compareRanking[timeA].ambosSim += 1;
                                    compareRanking[timeB].ambosSim += 1;
                                } else {
                                    compareRanking[timeA].ambosNao += 1;
                                    compareRanking[timeB].ambosNao += 1;
                                }

                                if (totalGols > 1) {
                                    compareRanking[timeA].over1_5 += 1;
                                    compareRanking[timeB].over1_5 += 1;
                                } else {
                                    compareRanking[timeA].under1_5 += 1;
                                    compareRanking[timeB].under1_5 += 1;
                                }

                                if (totalGols > 2) {
                                    compareRanking[timeA].over2_5 += 1;
                                    compareRanking[timeB].over2_5 += 1;
                                } else {
                                    compareRanking[timeA].under2_5 += 1;
                                    compareRanking[timeB].under2_5 += 1;
                                }

                                if (totalGols > 3) {
                                    compareRanking[timeA].over3_5 += 1;
                                    compareRanking[timeB].over3_5 += 1;
                                } else {
                                    compareRanking[timeA].under3_5 += 1;
                                    compareRanking[timeB].under3_5 += 1;
                                }

                                if (totalGols >= 5) {
                                    compareRanking[timeA].cincoMaisGols += 1;
                                    compareRanking[timeB].cincoMaisGols += 1;
                                }
                            });
                        }

                        const currentRankedTeams = Object.entries(currentRanking).map(([team, stats]) => ({
                            name: team,
                            totalJogos: stats.totalJogos,
                            golsMarcados: stats.golsMarcados,
                            golsSofridos: stats.golsSofridos,
                            vitorias: stats.vitorias,
                            empates: stats.empates,
                            derrotas: stats.derrotas,
                            ambosSim: stats.ambosSim,
                            ambosNao: stats.ambosNao,
                            over1_5: stats.over1_5,
                            under1_5: stats.under1_5,
                            over2_5: stats.over2_5,
                            under2_5: stats.under2_5,
                            over3_5: stats.over3_5,
                            under3_5: stats.under3_5,
                            casaVence: stats.casaVence,
                            foraVence: stats.foraVence,
                            cincoMaisGols: stats.cincoMaisGols,
                            league: stats.league,
                            vitoriasPercent: formatPercentage(stats.vitorias, stats.totalJogos),
                            mediaGolsMarcados: (stats.golsMarcados / stats.totalJogos).toFixed(2),
                            mediaGolsSofridos: (stats.golsSofridos / stats.totalJogos).toFixed(2),
                            marketValue: selectedMarket === "ambos-sim" ? stats.ambosSim :
                                         selectedMarket === "ambos-nao" ? stats.ambosNao :
                                         selectedMarket === "empates" ? stats.empates :
                                         selectedMarket === "casaVence" ? stats.casaVence :
                                         selectedMarket === "foraVence" ? stats.foraVence :
                                         selectedMarket === "over1_5" ? stats.over1_5 :
                                         selectedMarket === "under1_5" ? stats.under1_5 :
                                         selectedMarket === "over2_5" ? stats.over2_5 :
                                         selectedMarket === "under2_5" ? stats.under2_5 :
                                         selectedMarket === "over3_5" ? stats.over3_5 :
                                         selectedMarket === "under3_5" ? stats.under3_5 :
                                         selectedMarket === "cincoMaisGols" ? stats.cincoMaisGols : 0,
                            marketPercent: formatPercentage(
                                selectedMarket === "ambos-sim" ? stats.ambosSim :
                                selectedMarket === "ambos-nao" ? stats.ambosNao :
                                selectedMarket === "empates" ? stats.empates :
                                selectedMarket === "casaVence" ? stats.casaVence :
                                selectedMarket === "foraVence" ? stats.foraVence :
                                selectedMarket === "over1_5" ? stats.over1_5 :
                                selectedMarket === "under1_5" ? stats.under1_5 :
                                selectedMarket === "over2_5" ? stats.over2_5 :
                                selectedMarket === "under2_5" ? stats.under2_5 :
                                selectedMarket === "over3_5" ? stats.over3_5 :
                                selectedMarket === "under3_5" ? stats.under3_5 :
                                selectedMarket === "cincoMaisGols" ? stats.cincoMaisGols : 0,
                                stats.totalJogos
                            ),
                        }));

                        const compareRankedTeams = Object.entries(compareRanking).map(([team, stats]) => ({
                            name: team,
                            marketValue: selectedMarket === "ambos-sim" ? stats.ambosSim :
                                         selectedMarket === "ambos-nao" ? stats.ambosNao :
                                         selectedMarket === "empates" ? stats.empates :
                                         selectedMarket === "casaVence" ? stats.casaVence :
                                         selectedMarket === "foraVence" ? stats.foraVence :
                                         selectedMarket === "over1_5" ? stats.over1_5 :
                                         selectedMarket === "under1_5" ? stats.under1_5 :
                                         selectedMarket === "over2_5" ? stats.over2_5 :
                                         selectedMarket === "under2_5" ? stats.under2_5 :
                                         selectedMarket === "over3_5" ? stats.over3_5 :
                                         selectedMarket === "under3_5" ? stats.under3_5 :
                                         selectedMarket === "cincoMaisGols" ? stats.cincoMaisGols : 0,
                        }));

                        currentRankedTeams.sort((a, b) => b.marketValue - a.marketValue);
                        compareRankedTeams.sort((a, b) => b.marketValue - a.marketValue);

                        const comparePositions = {};
                        compareRankedTeams.forEach((team, index) => {
                            comparePositions[team.name] = index + 1;
                        });

                        const filteredTeams = currentRankedTeams.filter(team =>
                            team.name.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "").includes(searchQuery)
                        ).slice(0, 10); // Limitar a 10 primeiros em "Todas as Ligas"

                        const rankingWithMovement = filteredTeams.map(team => {
                            const prevPos = comparePositions[team.name] || null;
                            let movement = 'stable';
                            let movementValue = 0;
                            if (prevPos !== null && compareTimeRange > 0) {
                                const currentPos = filteredTeams.indexOf(team) + 1;
                                movementValue = prevPos - currentPos;
                                movement = movementValue > 0 ? 'up' : movementValue < 0 ? 'down' : 'stable';
                                movementValue = Math.abs(movementValue);
                            }
                            return { ...team, movement, movementValue };
                        });

                        allTables += `
                            <div class="league-table">
                                <h2>${league}</h2>
                                <table class="ranking-table">
                                    <thead>
                                        <tr>
                                            <th>Posição</th>
                                            <th>Time</th>
                                            <th>Jogos</th>
                                            <th>Gols M</th>
                                            <th>Média GM</th>
                                            <th>Gols S</th>
                                            <th>Média GS</th>
                                            <th>V</th>
                                            <th>E</th>
                                            <th>D</th>
                                            <th>% Vitórias</th>
                                            <th>Qtd Mercado</th>
                                            <th id="market-header-${league}">${selectedMarket === "ambos-sim" ? "Ambas Sim" : selectedMarket === "ambos-nao" ? "Ambas Não" : selectedMarket} (%)</th>
                                        </tr>
                                    </thead>
                                    <tbody id="ranking-body-${league}">
                                        ${rankingWithMovement.map((item, index) => `
                                            <tr class="${index < 3 ? 'top-3' : index < 5 ? 'top-4-5' : ''}">
                                                <td class="position">${index + 1}º</td>
                                                <td class="name movement-${item.movement}" data-movement="${item.movementValue > 0 ? item.movementValue : ''}">${item.name}</td>
                                                <td class="totalJogos">${item.totalJogos}</td>
                                                <td class="golsMarcados">${item.golsMarcados}</td>
                                                <td class="mediaGolsMarcados">${item.mediaGolsMarcados}</td>
                                                <td class="golsSofridos">${item.golsSofridos}</td>
                                                <td class="mediaGolsSofridos">${item.mediaGolsSofridos}</td>
                                                <td class="vitorias">${item.vitorias}</td>
                                                <td class="empates">${item.empates}</td>
                                                <td class="derrotas">${item.derrotas}</td>
                                                <td class="vitoriasPercent">${item.vitoriasPercent}</td>
                                                <td class="marketValue">${item.marketValue}</td>
                                                <td class="marketPercent">${item.marketPercent}</td>
                                            </tr>
                                        `).join("")}
                                    </tbody>
                                </table>
                            </div>
                        `;
                    }
                    rankingDiv.innerHTML = allTables;
                } else {
                    topCardsDiv.style.display = "flex";
                    const url = leagueUrls[selectedLeague];
                    const rankingResponse = await fetch(url);
                    if (!rankingResponse.ok) throw new Error(`Erro na requisição para ${selectedLeague}: ${rankingResponse.status}`);
                    const rankingData = await rankingResponse.json();

                    const currentGames = Array.isArray(rankingData) ? rankingData.slice(0, currentTimeRange) : [rankingData];
                    const compareGames = compareTimeRange > 0 ? (Array.isArray(rankingData) ? rankingData.slice(0, compareTimeRange) : [rankingData]) : [];
                    const currentRanking = {};
                    const compareRanking = {};

                    currentGames.forEach((game) => {
                        const [golsA, golsB] = (resultType === "ft" ? game.ft : game.ht).split(" x ").map(Number) || [0, 0];
                        const timeA = game.time_a;
                        const timeB = game.time_b;
                        const totalGols = golsA + golsB;

                        currentRanking[timeA] = currentRanking[timeA] || {
                            totalJogos: 0, golsMarcados: 0, golsSofridos: 0, vitorias: 0, empates: 0, derrotas: 0,
                            ambosSim: 0, ambosNao: 0, over1_5: 0, under1_5: 0, over2_5: 0, under2_5: 0,
                            over3_5: 0, under3_5: 0, casaVence: 0, foraVence: 0, cincoMaisGols: 0, league: selectedLeague
                        };
                        currentRanking[timeB] = currentRanking[timeB] || {
                            totalJogos: 0, golsMarcados: 0, golsSofridos: 0, vitorias: 0, empates: 0, derrotas: 0,
                            ambosSim: 0, ambosNao: 0, over1_5: 0, under1_5: 0, over2_5: 0, under2_5: 0,
                            over3_5: 0, under3_5: 0, casaVence: 0, foraVence: 0, cincoMaisGols: 0, league: selectedLeague
                        };

                        currentRanking[timeA].totalJogos += 1;
                        currentRanking[timeB].totalJogos += 1;
                        currentRanking[timeA].golsMarcados += golsA;
                        currentRanking[timeB].golsMarcados += golsB;
                        currentRanking[timeA].golsSofridos += golsB;
                        currentRanking[timeB].golsSofridos += golsA;

                        if (golsA > golsB) {
                            currentRanking[timeA].vitorias += 1;
                            currentRanking[timeB].derrotas += 1;
                            currentRanking[timeA].casaVence += 1;
                        } else if (golsA < golsB) {
                            currentRanking[timeB].vitorias += 1;
                            currentRanking[timeA].derrotas += 1;
                            currentRanking[timeB].foraVence += 1;
                        } else {
                            currentRanking[timeA].empates += 1;
                            currentRanking[timeB].empates += 1;
                        }

                        if (golsA > 0 && golsB > 0) {
                            currentRanking[timeA].ambosSim += 1;
                            currentRanking[timeB].ambosSim += 1;
                        } else {
                            currentRanking[timeA].ambosNao += 1;
                            currentRanking[timeB].ambosNao += 1;
                        }

                        if (totalGols > 1) {
                            currentRanking[timeA].over1_5 += 1;
                            currentRanking[timeB].over1_5 += 1;
                        } else {
                            currentRanking[timeA].under1_5 += 1;
                            currentRanking[timeB].under1_5 += 1;
                        }

                        if (totalGols > 2) {
                            currentRanking[timeA].over2_5 += 1;
                            currentRanking[timeB].over2_5 += 1;
                        } else {
                            currentRanking[timeA].under2_5 += 1;
                            currentRanking[timeB].under2_5 += 1;
                        }

                        if (totalGols > 3) {
                            currentRanking[timeA].over3_5 += 1;
                            currentRanking[timeB].over3_5 += 1;
                        } else {
                            currentRanking[timeA].under3_5 += 1;
                            currentRanking[timeB].under3_5 += 1;
                        }

                        if (totalGols >= 5) {
                            currentRanking[timeA].cincoMaisGols += 1;
                            currentRanking[timeB].cincoMaisGols += 1;
                        }
                    });

                    if (compareTimeRange > 0) {
                        compareGames.forEach((game) => {
                            const [golsA, golsB] = (resultType === "ft" ? game.ft : game.ht).split(" x ").map(Number) || [0, 0];
                            const timeA = game.time_a;
                            const timeB = game.time_b;
                            const totalGols = golsA + golsB;

                            compareRanking[timeA] = compareRanking[timeA] || {
                                totalJogos: 0, golsMarcados: 0, golsSofridos: 0, vitorias: 0, empates: 0, derrotas: 0,
                                ambosSim: 0, ambosNao: 0, over1_5: 0, under1_5: 0, over2_5: 0, under2_5: 0,
                                over3_5: 0, under3_5: 0, casaVence: 0, foraVence: 0, cincoMaisGols: 0, league: selectedLeague
                            };
                            compareRanking[timeB] = compareRanking[timeB] || {
                                totalJogos: 0, golsMarcados: 0, golsSofridos: 0, vitorias: 0, empates: 0, derrotas: 0,
                                ambosSim: 0, ambosNao: 0, over1_5: 0, under1_5: 0, over2_5: 0, under2_5: 0,
                                over3_5: 0, under3_5: 0, casaVence: 0, foraVence: 0, cincoMaisGols: 0, league: selectedLeague
                            };

                            compareRanking[timeA].totalJogos += 1;
                            compareRanking[timeB].totalJogos += 1;
                            compareRanking[timeA].golsMarcados += golsA;
                            compareRanking[timeB].golsMarcados += golsB;
                            compareRanking[timeA].golsSofridos += golsB;
                            compareRanking[timeB].golsSofridos += golsA;

                            if (golsA > golsB) {
                                compareRanking[timeA].vitorias += 1;
                                compareRanking[timeB].derrotas += 1;
                                compareRanking[timeA].casaVence += 1;
                            } else if (golsA < golsB) {
                                compareRanking[timeB].vitorias += 1;
                                compareRanking[timeA].derrotas += 1;
                                compareRanking[timeB].foraVence += 1;
                            } else {
                                compareRanking[timeA].empates += 1;
                                compareRanking[timeB].empates += 1;
                            }

                            if (golsA > 0 && golsB > 0) {
                                compareRanking[timeA].ambosSim += 1;
                                compareRanking[timeB].ambosSim += 1;
                            } else {
                                compareRanking[timeA].ambosNao += 1;
                                compareRanking[timeB].ambosNao += 1;
                            }

                            if (totalGols > 1) {
                                compareRanking[timeA].over1_5 += 1;
                                compareRanking[timeB].over1_5 += 1;
                            } else {
                                compareRanking[timeA].under1_5 += 1;
                                compareRanking[timeB].under1_5 += 1;
                            }

                            if (totalGols > 2) {
                                compareRanking[timeA].over2_5 += 1;
                                compareRanking[timeB].over2_5 += 1;
                            } else {
                                compareRanking[timeA].under2_5 += 1;
                                compareRanking[timeB].under2_5 += 1;
                            }

                            if (totalGols > 3) {
                                compareRanking[timeA].over3_5 += 1;
                                compareRanking[timeB].over3_5 += 1;
                            } else {
                                compareRanking[timeA].under3_5 += 1;
                                compareRanking[timeB].under3_5 += 1;
                            }

                            if (totalGols >= 5) {
                                compareRanking[timeA].cincoMaisGols += 1;
                                compareRanking[timeB].cincoMaisGols += 1;
                            }
                        });
                    }

                    const currentRankedTeams = Object.entries(currentRanking).map(([team, stats]) => ({
                        name: team,
                        totalJogos: stats.totalJogos,
                        golsMarcados: stats.golsMarcados,
                        golsSofridos: stats.golsSofridos,
                        vitorias: stats.vitorias,
                        empates: stats.empates,
                        derrotas: stats.derrotas,
                        ambosSim: stats.ambosSim,
                        ambosNao: stats.ambosNao,
                        over1_5: stats.over1_5,
                        under1_5: stats.under1_5,
                        over2_5: stats.over2_5,
                        under2_5: stats.under2_5,
                        over3_5: stats.over3_5,
                        under3_5: stats.under3_5,
                        casaVence: stats.casaVence,
                        foraVence: stats.foraVence,
                        cincoMaisGols: stats.cincoMaisGols,
                        league: stats.league,
                        vitoriasPercent: formatPercentage(stats.vitorias, stats.totalJogos),
                        mediaGolsMarcados: (stats.golsMarcados / stats.totalJogos).toFixed(2),
                        mediaGolsSofridos: (stats.golsSofridos / stats.totalJogos).toFixed(2),
                        marketValue: selectedMarket === "ambos-sim" ? stats.ambosSim :
                                     selectedMarket === "ambos-nao" ? stats.ambosNao :
                                     selectedMarket === "empates" ? stats.empates :
                                     selectedMarket === "casaVence" ? stats.casaVence :
                                     selectedMarket === "foraVence" ? stats.foraVence :
                                     selectedMarket === "over1_5" ? stats.over1_5 :
                                     selectedMarket === "under1_5" ? stats.under1_5 :
                                     selectedMarket === "over2_5" ? stats.over2_5 :
                                     selectedMarket === "under2_5" ? stats.under2_5 :
                                     selectedMarket === "over3_5" ? stats.over3_5 :
                                     selectedMarket === "under3_5" ? stats.under3_5 :
                                     selectedMarket === "cincoMaisGols" ? stats.cincoMaisGols : 0,
                        marketPercent: formatPercentage(
                            selectedMarket === "ambos-sim" ? stats.ambosSim :
                            selectedMarket === "ambos-nao" ? stats.ambosNao :
                            selectedMarket === "empates" ? stats.empates :
                            selectedMarket === "casaVence" ? stats.casaVence :
                            selectedMarket === "foraVence" ? stats.foraVence :
                            selectedMarket === "over1_5" ? stats.over1_5 :
                            selectedMarket === "under1_5" ? stats.under1_5 :
                            selectedMarket === "over2_5" ? stats.over2_5 :
                            selectedMarket === "under2_5" ? stats.under2_5 :
                            selectedMarket === "over3_5" ? stats.over3_5 :
                            selectedMarket === "under3_5" ? stats.under3_5 :
                            selectedMarket === "cincoMaisGols" ? stats.cincoMaisGols : 0,
                            stats.totalJogos
                        ),
                    }));

                    const compareRankedTeams = Object.entries(compareRanking).map(([team, stats]) => ({
                        name: team,
                        marketValue: selectedMarket === "ambos-sim" ? stats.ambosSim :
                                     selectedMarket === "ambos-nao" ? stats.ambosNao :
                                     selectedMarket === "empates" ? stats.empates :
                                     selectedMarket === "casaVence" ? stats.casaVence :
                                     selectedMarket === "foraVence" ? stats.foraVence :
                                     selectedMarket === "over1_5" ? stats.over1_5 :
                                     selectedMarket === "under1_5" ? stats.under1_5 :
                                     selectedMarket === "over2_5" ? stats.over2_5 :
                                     selectedMarket === "under2_5" ? stats.under2_5 :
                                     selectedMarket === "over3_5" ? stats.over3_5 :
                                     selectedMarket === "under3_5" ? stats.under3_5 :
                                     selectedMarket === "cincoMaisGols" ? stats.cincoMaisGols : 0,
                    }));

                    currentRankedTeams.sort((a, b) => b.marketValue - a.marketValue);
                    compareRankedTeams.sort((a, b) => b.marketValue - a.marketValue);

                    const comparePositions = {};
                    compareRankedTeams.forEach((team, index) => {
                        comparePositions[team.name] = index + 1;
                    });

                    const filteredTeams = currentRankedTeams.filter(team =>
                        team.name.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "").includes(searchQuery)
                    );

                    const rankingWithMovement = filteredTeams.map(team => {
                        const prevPos = comparePositions[team.name] || null;
                        let movement = 'stable';
                        let movementValue = 0;
                        if (prevPos !== null && compareTimeRange > 0) {
                            const currentPos = filteredTeams.indexOf(team) + 1;
                            movementValue = prevPos - currentPos;
                            movement = movementValue > 0 ? 'up' : movementValue < 0 ? 'down' : 'stable';
                            movementValue = Math.abs(movementValue);
                        }
                        return { ...team, movement, movementValue };
                    });

                    // Atualizar cards dos 3 melhores
                    const top1 = rankingWithMovement[0] || {};
                    const top2 = rankingWithMovement[1] || {};
                    const top3 = rankingWithMovement[2] || {};
                    document.getElementById("top1").innerHTML = top1.name ? `<h3>${top1.name}</h3><p>Posição: 1º</p><p>${selectedMarket === "ambos-sim" ? "Ambas Sim" : selectedMarket}: ${top1.marketPercent}</p><p>Time em grande forma, liderando com desempenho excepcional.</p>` : "";
                    document.getElementById("top2").innerHTML = top2.name ? `<h3>${top2.name}</h3><p>Posição: 2º</p><p>${selectedMarket === "ambos-sim" ? "Ambas Sim" : selectedMarket}: ${top2.marketPercent}</p><p>Segunda posição com consistência notável nos jogos recentes.</p>` : "";
                    document.getElementById("top3").innerHTML = top3.name ? `<h3>${top3.name}</h3><p>Posição: 3º</p><p>${selectedMarket === "ambos-sim" ? "Ambas Sim" : selectedMarket}: ${top3.marketPercent}</p><p>Terceiro lugar com potencial para subir no ranking.</p>` : "";

                    if (!isTableInitialized) {
                        rankingDiv.innerHTML = `
                            <table class="ranking-table">
                                <thead>
                                    <tr>
                                        <th>Posição</th>
                                        <th>Time</th>
                                        <th>Jogos</th>
                                        <th>Gols M</th>
                                        <th>Média GM</th>
                                        <th>Gols S</th>
                                        <th>Média GS</th>
                                        <th>V</th>
                                        <th>E</th>
                                        <th>D</th>
                                        <th>% Vitórias</th>
                                        <th>Qtd Mercado</th>
                                        <th id="market-header">${selectedMarket === "ambos-sim" ? "Ambas Sim" : selectedMarket === "ambos-nao" ? "Ambas Não" : selectedMarket} (%)</th>
                                    </tr>
                                </thead>
                                <tbody id="ranking-body">
                                    ${rankingWithMovement.map((item, index) => `
                                        <tr class="${index < 3 ? 'top-3' : index < 5 ? 'top-4-5' : ''}">
                                            <td class="position">${index + 1}º</td>
                                            <td class="name movement-${item.movement}" data-movement="${item.movementValue > 0 ? item.movementValue : ''}">${item.name}</td>
                                            <td class="totalJogos">${item.totalJogos}</td>
                                            <td class="golsMarcados">${item.golsMarcados}</td>
                                            <td class="mediaGolsMarcados">${item.mediaGolsMarcados}</td>
                                            <td class="golsSofridos">${item.golsSofridos}</td>
                                            <td class="mediaGolsSofridos">${item.mediaGolsSofridos}</td>
                                            <td class="vitorias">${item.vitorias}</td>
                                            <td class="empates">${item.empates}</td>
                                            <td class="derrotas">${item.derrotas}</td>
                                            <td class="vitoriasPercent">${item.vitoriasPercent}</td>
                                            <td class="marketValue">${item.marketValue}</td>
                                            <td class="marketPercent">${item.marketPercent}</td>
                                        </tr>
                                    `).join("")}
                                </tbody>
                            </table>
                        `;
                        isTableInitialized = true;
                    } else {
                        const marketHeader = document.getElementById("market-header");
                        marketHeader.innerText = `${selectedMarket === "ambos-sim" ? "Ambas Sim" : selectedMarket === "ambos-nao" ? "Ambas Não" : selectedMarket} (%)`;

                        const tbody = document.getElementById("ranking-body");
                        const rows = tbody.getElementsByTagName("tr");

                        rankingWithMovement.forEach((item, index) => {
                            const row = rows[index] || tbody.insertRow();
                            row.className = index < 3 ? 'top-3' : index < 5 ? 'top-4-5' : '';

                            const cells = row.cells;
                            if (cells.length === 0) {
                                row.insertCell().className = "position";
                                row.insertCell().className = "name";
                                row.insertCell().className = "totalJogos";
                                row.insertCell().className = "golsMarcados";
                                row.insertCell().className = "mediaGolsMarcados";
                                row.insertCell().className = "golsSofridos";
                                row.insertCell().className = "mediaGolsSofridos";
                                row.insertCell().className = "vitorias";
                                row.insertCell().className = "empates";
                                row.insertCell().className = "derrotas";
                                row.insertCell().className = "vitoriasPercent";
                                row.insertCell().className = "marketValue";
                                row.insertCell().className = "marketPercent";
                            }

                            row.cells[0].innerText = `${index + 1}º`;
                            row.cells[1].className = `name movement-${item.movement}`;
                            row.cells[1].setAttribute("data-movement", item.movementValue > 0 ? item.movementValue : '');
                            row.cells[1].innerText = item.name;
                            row.cells[2].innerText = item.totalJogos;
                            row.cells[3].innerText = item.golsMarcados;
                            row.cells[4].innerText = item.mediaGolsMarcados;
                            row.cells[5].innerText = item.golsSofridos;
                            row.cells[6].innerText = item.mediaGolsSofridos;
                            row.cells[7].innerText = item.vitorias;
                            row.cells[8].innerText = item.empates;
                            row.cells[9].innerText = item.derrotas;
                            row.cells[10].innerText = item.vitoriasPercent;
                            row.cells[11].innerText = item.marketValue;
                            row.cells[12].innerText = item.marketPercent;
                        });

                        while (rows.length > rankingWithMovement.length) {
                            tbody.deleteRow(rows.length - 1);
                        }
                    }
                }
            } catch (error) {
                console.error("Erro ao buscar dados:", error);
                rankingDiv.innerHTML = '<p class="error">Erro ao carregar o ranking. Tente novamente mais tarde.</p>';
                isTableInitialized = false;
            }
        }

        // Event listeners
        document.getElementById("league").addEventListener("change", () => {
            document.getElementById("ranking").innerHTML = "";
            isTableInitialized = false;
            fetchRanking();
        });
        document.getElementById("currentTimeRange").addEventListener("change", () => {
            document.getElementById("ranking").innerHTML = "";
            isTableInitialized = false;
            fetchRanking();
        });
        document.getElementById("compareTimeRange").addEventListener("change", () => {
            document.getElementById("ranking").innerHTML = "";
            isTableInitialized = false;
            fetchRanking();
        });
        document.getElementById("market").addEventListener("change", () => {
            document.getElementById("ranking").innerHTML = "";
            isTableInitialized = false;
            fetchRanking();
        });
        document.getElementById("resultType").addEventListener("change", () => {
            document.getElementById("ranking").innerHTML = "";
            isTableInitialized = false;
            fetchRanking();
        });
        document.getElementById("searchTeam").addEventListener("input", fetchRanking);

        // Inicialização
        fetchRanking();
        intervalId = setInterval(fetchRanking, 30000);
    </script>

    <script>
      // Bloqueia o menu de contexto (clique direito)
      document.addEventListener("contextmenu", function(e) {
    e.preventDefault();
});

// Bloqueia atalhos de teclado comuns para ferramentas de desenvolvimento
document.addEventListener("keydown", function(e) {
    // F12
    if (e.key === "F12") {
        e.preventDefault();
    }
    
    // Ctrl + Shift + I
    if (e.ctrlKey && e.shiftKey && e.key === "I") {
        e.preventDefault();
    }
    
    // Ctrl + U (ver código fonte)
    if (e.ctrlKey && e.key === "u") {
        e.preventDefault();
    }
    
    // Ctrl + Shift + J (console)
    if (e.ctrlKey && e.shiftKey && e.key === "J") {
        e.preventDefault();
    }
    
    // Ctrl + Shift + C (inspeção de elementos)
    if (e.ctrlKey && e.shiftKey && e.key === "C") {
        e.preventDefault();
    }
    
    // Ctrl + S (salvar página)
    if (e.ctrlKey && e.key === "s") {
        e.preventDefault();
    }
    
    // Ctrl + P (imprimir)
    if (e.ctrlKey && e.key === "p") {
        e.preventDefault();
    }
});

// Detecta abertura de ferramentas de desenvolvimento
const devtools = { open: false };
const element = new Image();
Object.defineProperty(element, 'id', {
    get: function () {
        devtools.open = true;
    }
});

// Adiciona detecção alternativa de devtools
(function() {
    const threshold = 160;
    const checkDevTools = function() {
        if ((window.outerWidth - window.innerWidth) > threshold || 
            (window.outerHeight - window.innerHeight) > threshold) {
            devtools.open = true;
        }
    };
    
    window.addEventListener('resize', checkDevTools);
    setInterval(checkDevTools, 500);
})();

// Monitoramento contínuo
console.log('%c', element);
setInterval(function() {
    if (devtools.open) {
        document.body.innerHTML = '<h1>Acesso não autorizado detectado</h1>';
        // Ou redirecionar:
        // window.location.href = 'about:blank';
        devtools.open = false;
    }
}, 1000);

// Impede seleção de texto
document.addEventListener('selectstart', function(e) {
    e.preventDefault();
});

// Impede arrastar e soltar
document.addEventListener('dragstart', function(e) {
    e.preventDefault();
});

// Ofusca console
console.log = function() {};
console.debug = function() {};
console.info = function() {};
    </script>

<script>
  fetch('header.html')
    .then(response => response.text())
    .then(data => {
      document.getElementById('header').innerHTML = data;
    });
</script>
<script src="redirecionar.js"></script>

    <script></script>
  </body>
</html>
