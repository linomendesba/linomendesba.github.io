<html lang="pt-BR">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="icon" href="img/favicon.ico" type="image/x-icon" />
        <link rel="stylesheet" href="style.css" />
        <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1"></script>
        <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
        <script
          async
          src="https://www.googletagmanager.com/gtag/js?id=G-4WT805FFHQ"
        ></script>
        <title>BetStat</title>
        <!-- Meta tags SEO principais -->
        <meta
          name="description"
          content="Transforme suas apostas com BetStat - a única plataforma especializada em futebol virtual Betano. Análises precisas, estatísticas confiáveis e resultados comprovados para investimentos inteligentes."
        />
        <meta
          name="keywords"
          content="BetStat, apostas esportivas, futebol virtual, Betano, estatísticas apostas, análise apostas, investimentos esportivos"
        />
    
        <!-- Open Graph meta tags para redes sociais -->
        <meta
          property="og:title"
          content="BetStat | Plataforma de Análise para Apostas Esportivas"
        />
        <meta
          property="og:description"
          content="Transforme suas apostas com análises precisas e estatísticas confiáveis. A única plataforma especializada em futebol virtual Betano."
        />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://www.betstat.site/payment.html" />
        <meta property="og:site_name" content="BetStat" />
    
        <!-- Meta tags adicionais -->
        <meta name="robots" content="index, follow" />
        <meta name="author" content="BetStat" />
        <meta name="canonical" href="https://www.betstat.site/payment.html" />
        <script type="module">
          import { initializeApp } from "https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js";
          import {
            getAuth,
            onAuthStateChanged,
            signOut,
          } from "https://www.gstatic.com/firebasejs/9.0.0/firebase-auth.js";
    
          const firebaseConfig = {
            apiKey: "AIzaSyDmLGMBnUa2YOdP0b-zlZepXjm-zlV477A",
            authDomain: "linoautenticador.firebaseapp.com",
            projectId: "linoautenticador",
            storageBucket: "linoautenticador.firebasestorage.app",
            messagingSenderId: "946057648829",
            appId: "1:946057648829:web:ac5c2b1ba66e651f9d75d4",
            measurementId: "G-4WT805FFHQ",
          };
    
          const app = initializeApp(firebaseConfig);
          const auth = getAuth(app);
    
          onAuthStateChanged(auth, (user) => {
            if (!user) {
              window.location.href = "auth.html";
            }
          });
    
          window.logout = function () {
            signOut(auth)
              .then(() => {
                alert("Você saiu com sucesso!");
                window.location.href = "auth.html";
              })
              .catch((error) => {
                alert("Erro ao sair: " + error.message);
              });
          };
        </script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag() {
            dataLayer.push(arguments);
          }
          gtag("js", new Date());
    
          gtag("config", "G-4WT805FFHQ");
        </script>
        <link
          href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap"
          rel="stylesheet"
        />
      </head>

      <style>
        .table-container {
  width: 100%;
  overflow-x: auto;
  overflow-y: hidden;
  margin-bottom: 10px;
  -webkit-overflow-scrolling: touch;
}
table {
  width: 100%;
  max-width: 6000px;
  border-collapse: collapse;
  font-size: 12px;
  background-color: black;
  color: white;
}
th, td {
  border: 1px solid white;
  font-family: Arial, sans-serif;
  padding: 10px;
  font-weight: bold;
  text-align: center;
  cursor: pointer;
}
th {
  background-color: #000000;
}
.green {
  background-color: #4b9d31;
}
.red {
  background-color: #f31313;
}
h2 {
  text-align: center;
  font-size: 14px;
}
.control-panel {
  text-align: center;
  margin-bottom: 20px;
}
.chart-container {
  position: relative;
  height: 600px;
  width: 100%;
}

  
  #marketAverageSelector {
    display: block;
    margin: 10px auto;
    text-align: center;
  }

  #marketAverageSelector option {
    text-align: center;
  }
      </style>

  <body>
    <body>
      <header>
        <div class="header-container">
          <img src="img/logo.png" alt="Logo" class="logo" />
          <div class="selectors-container">
            <div class="nav-seletor">
              <label for="ligas"></label>
              <select id="ligas" onchange="redirecionar(this)">
                <option value="">Betano</option>
                <option value="index.html">Taça Glória Eterna</option>
                <option value="copa_america.html">Copa América</option>
                <option value="euro.html">Euro</option>
                <option value="campeonato_italiano.html">
                  Campeonato Italiano
                </option>
                <option value="copa_das_estrelas.html">Copa das Estrelas</option>
                <option value="BritishDerbies.html">British Derbies</option>
                <option value="LigaEspanhola.html">Liga Espanhola</option>
                <option value="ScudettoItaliano.html">Scudetto Italiano</option>
              </select>
            </div>
  
            <div class="nav-seletor">
              <label for="ligas"></label>
              <select id="ligas" onchange="redirecionar(this)">
                <option value="">Bet365</option>
                <option value="365copa.html">Copa do Mundo</option>
                <option value="365euro.html">Euro Cup</option>
                <option value="365premier.html">Premier League</option>
                <option value="365super.html">Super Liga</option>
                <option value="365express.html">Express(BETA)</option>
              </select>
            </div>
  
            <div class="nav-seletor">
              <label for="redes"></label>
              <select id="redes" onchange="redirecionar(this)">
                <option value="">Avançado</option>
                <option value="https://www.betstat.site/sequencia.html">
                  Sequência
                </option>
                <option value="https://www.betstat.site/porcentagem365.html">
                  Porcentagem Bet365
                </option>
                <option value="https://www.betstat.site/365macro.html">
                  Macro Bet365
                </option>
                <option value="https://www.betstat.site/mult365.html">
                  MultiLiga Bet365
                </option>
                <option value="https://www.betstat.site/365fixo.html">
                    Hora Fixa Bet365
                  </option>
                <option value="https://www.betstat.site/multbetano.html">
                  MultiLiga Betano
                </option>
                <option value="https://www.betstat.site/porcentagembetano.html">
                  Porcentagem Betano
                </option>
                <option value="https://www.betstat.site/macrobetano.html">
                    Macro Betano
                  </option>
                  <option value="https://www.betstat.site/betanofixo.html">
                    Hora Fixa Betano
                  </option>
              </select>
            </div>
          </div>
        </div>
  
        <div class="nav-seletor">
          <label for="redes"></label>
          <select id="redes" onchange="redirecionar(this)">
            <option value="">Extras</option>
            <option value="https://www.betstat.site/tv/">Ao vivo</option>
            <option value="https://www.betstat.site/central/">
              Cental Tipster
            </option>
            <option value="blog.html">Blog</option>
          </select>
        </div>
  
        <button class="logout-btn" onclick="logout()">Sair</button>
      </header>

    <br><br>

    <select id="campeonatoSelector" style="margin: 10px;">
        <option value="Copa%20America">Copa America</option>
        <option value="Ta%C3%A7a%20Gl%C3%B3ria%20eterna">Taça Glória Eterna </option>
        <option value="Euro">Euro</option>
        <option value="Campeonato%20Italiano">Campeonato Italiano</option>
        <option value="Copa%20das%20estrelas">Copa das Estrelas</option>
        <option value="British%20Derbies">British Derbies</option>
        <option value="Liga%20Espanhola">Liga Espanhola</option>
        <option value="Scudetto%20Italiano">Scudetto Italiano</option>
      </select>
      
      <select id="pointsSelector" style="margin: 10px;">
        <option value="200">200 Jogos</option>
        <option value="300">300 Jogos</option>
        <option value="400">400 Jogos</option>
        <option value="800">800 Jogos</option>
        <option value="900">900 Jogos</option>
      </select>

      <select id="averageSelector" style="margin: 10px;">
        <option value="20">Média 20 Jogos</option>
      </select>
      
      
      <label for="marketAverageSelector"></label>
      <select id="marketAverageSelector" style="margin: 10px;">
        <option value="ambasMarcam">Equilíbrio: Ambas Sim</option>
        <option value="ambasnaoMarcam">Equilíbrio: Ambas não</option>
        <option value="over25">Equilíbrio: Over 2.5</option>
        <option value="over35">Equilíbrio: Over 3.5</option>
        <option value="under15">Equilíbrio: Under 1.5</option>
        <option value="mais5">Equilíbrio: 5+</option>
        <option value="casavence">Equilíbrio: Casa Vence</option>
        <option value="foravence">Equilíbrio: Fora Vence</option>
      </select>
      
      <div class="chart-container">
        <canvas id="statsChart"></canvas>
      </div>

    <script>
let currentCampeonato = 'Euro';
let numPoints = 200;
let averagePoints = 20; 
let selectedMarket = 'ambasMarcam';
let statsChart = null;

let statsChartVisibleDatasets = {
  'Ambas Marcam': true,
  'Ambas não Marcam': false,
  'Over 2.5': true,
  'Over 3.5': false,
  'Under 1.5': false,
  '5+': false,
  'Casa Vence': false,
  'Fora Vence': false,
  'Equilíbrio': true
};

function fetchAPIData(campeonato) {
  return fetch(`https://betstat.site/resultados/${campeonato}`)
    .then(response => {
      if (!response.ok) {
        throw new Error(`HTTP error! status: ${response.status}`);
      }
      return response.json();
    })
    .catch(error => {
      console.error(`Erro ao buscar dados da API: ${error}`);
      return [];
    });
}

function processAPIData(data) {
  // Pega os últimos 'numPoints' jogos
  const limitedData = data.slice(-numPoints);
  
  console.log('Dados da API:', limitedData);
  
  // Inicializa arrays para armazenar os dados processados
  const labels = [];
  const ambasMarcam = [];
  const ambasnaoMarcam = [];
  const over25 = [];
  const over35 = [];
  const under15 = [];
  const mais5 = [];
  const casavence = [];
  const foravence = [];
  
  // Agrupa os dados por hora
  const hourData = {};
  
  limitedData.forEach(game => {
    // Extrai a data e hora do jogo
    const gameDate = new Date(game.data);
    const formattedDate = `${gameDate.getDate()}/${gameDate.getMonth() + 1}`;
    const hour = game.hora;
    
    // Cria uma chave única para cada hora/dia
    const hourKey = `${formattedDate} ${hour}`;
    
    if (!hourData[hourKey]) {
      hourData[hourKey] = {
        ambasMarcam: 0,
        ambasnaoMarcam: 0,
        over25: 0,
        over35: 0,
        under15: 0,
        mais5: 0,
        casavence: 0,
        foravence: 0,
        count: 0
      };
    }
    
    // Incrementa o contador
    hourData[hourKey].count++;
    
    // Processa o placar do jogo
    if (game.ft) {
      const scores = game.ft.split(' x ');
      if (scores.length === 2) {
        const homeGoals = parseInt(scores[0]) || 0;
        const awayGoals = parseInt(scores[1]) || 0;
        const totalGoals = homeGoals + awayGoals;
        
        // Atualiza as estatísticas
        if (homeGoals > 0 && awayGoals > 0) {
          hourData[hourKey].ambasMarcam++;
        } else {
          hourData[hourKey].ambasnaoMarcam++;
        }
        
        if (totalGoals > 2.5) {
          hourData[hourKey].over25++;
        }
        
        if (totalGoals > 3.5) {
          hourData[hourKey].over35++;
        }
        
        if (totalGoals < 1.5) {
          hourData[hourKey].under15++;
        }
        
        if (totalGoals > 4) {
          hourData[hourKey].mais5++;
        }
        
        if (homeGoals > awayGoals) {
          hourData[hourKey].casavence++;
        }
        
        if (awayGoals > homeGoals) {
          hourData[hourKey].foravence++;
        }
      }
    }
  });
  
  // Converte os dados agregados para arrays para o gráfico
  const sortedHours = Object.keys(hourData).sort((a, b) => {
    const [dateA, hourA] = a.split(' ');
    const [dateB, hourB] = b.split(' ');
    
    // Primeiro compara as datas
    if (dateA !== dateB) {
      const [dayA, monthA] = dateA.split('/').map(Number);
      const [dayB, monthB] = dateB.split('/').map(Number);
      
      if (monthA !== monthB) return monthA - monthB;
      return dayA - dayB;
    }
    
    // Se as datas forem iguais, compara as horas
    return parseInt(hourA) - parseInt(hourB);
  });
  
  sortedHours.forEach(hour => {
    const dataForHour = hourData[hour];
    const gamesInHour = dataForHour.count;
    
    if (gamesInHour > 0) {
      labels.push(hour);
      
      // Calcula as porcentagens
      ambasMarcam.push((dataForHour.ambasMarcam / gamesInHour) * 100);
      ambasnaoMarcam.push((dataForHour.ambasnaoMarcam / gamesInHour) * 100);
      over25.push((dataForHour.over25 / gamesInHour) * 100);
      over35.push((dataForHour.over35 / gamesInHour) * 100);
      under15.push((dataForHour.under15 / gamesInHour) * 100);
      mais5.push((dataForHour.mais5 / gamesInHour) * 100);
      casavence.push((dataForHour.casavence / gamesInHour) * 100);
      foravence.push((dataForHour.foravence / gamesInHour) * 100);
    }
  });
  
  console.log('Labels processados:', labels);
  console.log('Ambas Marcam processados:', ambasMarcam);
  
  return {
    labels: labels,
    ambasMarcam: ambasMarcam,
    ambasnaoMarcam: ambasnaoMarcam,
    over25: over25,
    over35: over35,
    under15: under15,
    mais5: mais5,
    casavence: casavence,
    foravence: foravence
  };
}

function calculateAverage(data) {
  const filteredData = data.filter(val => !isNaN(val));
  if (filteredData.length === 0) return 0;
  const total = filteredData.reduce((acc, val) => acc + val, 0);
  return total / filteredData.length;
}

function createStatsChart(ctx, labels, data) {
  // Calcula o valor médio para a linha de equilíbrio
  const marketDataMap = {
    'ambasMarcam': data.ambasMarcam,
    'ambasnaoMarcam': data.ambasnaoMarcam,
    'over25': data.over25,
    'over35': data.over35,
    'under15': data.under15,
    'mais5': data.mais5,
    'casavence': data.casavence,
    'foravence': data.foravence
  };
  
  const averageValue = calculateAverage(marketDataMap[selectedMarket]);
  const averageLineData = new Array(labels.length).fill(averageValue);

  return new Chart(ctx, {
  type: 'line',
  data: {
    labels: labels,
    datasets: [
      {
        label: 'Ambas Marcam',
        data: data.ambasMarcam,
        borderColor: 'rgba(0, 255, 0, 1)', // Verde neon
        backgroundColor: 'rgba(0, 255, 0, 0.1)', // Preenchimento mais transparente
        borderWidth: 2,
        fill: true,
        hidden: false, // Visível por padrão
        pointRadius: 6,
        pointBackgroundColor: 'rgba(0, 255, 0, 1)', // Cor dos pontos
        tension: 0.4
      },
      {
        label: 'Ambas não Marcam',
        data: data.ambasnaoMarcam,
        borderColor: 'rgba(255, 0, 255, 1)', // Rosa neon
        backgroundColor: 'rgba(255, 0, 255, 0.1)', // Preenchimento mais transparente
        borderWidth: 2,
        fill: true,
        hidden: false, // Visível por padrão
        pointRadius: 6,
        pointBackgroundColor: 'rgba(255, 0, 255, 1)', // Cor dos pontos
        tension: 0.4
      },
      {
        label: 'Over 2.5',
        data: data.over25,
        borderColor: 'rgba(0, 255, 255, 1)', // Azul neon
        backgroundColor: 'rgba(0, 255, 255, 0.1)', // Preenchimento mais transparente
        borderWidth: 2,
        fill: true,
        hidden: true, // Desativado por padrão
        pointRadius: 6,
        pointBackgroundColor: 'rgba(0, 255, 255, 1)', // Cor dos pontos
        tension: 0.4
      },
      {
        label: 'Over 3.5',
        data: data.over35,
        borderColor: 'rgba(255, 165, 0, 1)', // Laranja neon
        backgroundColor: 'rgba(255, 165, 0, 0.1)', // Preenchimento mais transparente
        borderWidth: 2,
        fill: true,
        hidden: true, // Desativado por padrão
        pointRadius: 6,
        pointBackgroundColor: 'rgba(255, 165, 0, 1)', // Cor dos pontos
        tension: 0.4
      },
      {
        label: 'Under 1.5',
        data: data.under15,
        borderColor: 'rgba(255, 20, 147, 1)', // Rosa choque neon
        backgroundColor: 'rgba(255, 20, 147, 0.1)', // Preenchimento mais transparente
        borderWidth: 2,
        fill: true,
        hidden: true, // Desativado por padrão
        pointRadius: 6,
        pointBackgroundColor: 'rgba(255, 20, 147, 1)', // Cor dos pontos
        tension: 0.4
      },
      {
        label: '5+',
        data: data.mais5,
        borderColor: 'rgba(255, 69, 0, 1)', // Vermelho neon
        backgroundColor: 'rgba(255, 69, 0, 0.1)', // Preenchimento mais transparente
        borderWidth: 2,
        fill: true,
        hidden: true, // Desativado por padrão
        pointRadius: 6,
        pointBackgroundColor: 'rgba(255, 69, 0, 1)', // Cor dos pontos
        tension: 0.4
      },
      {
        label: 'Casa Vence',
        data: data.casavence,
        borderColor: 'rgba(255, 105, 180, 1)', // Rosa neon claro
        backgroundColor: 'rgba(255, 105, 180, 0.1)', // Preenchimento mais transparente
        borderWidth: 2,
        fill: true,
        hidden: true, // Desativado por padrão
        pointRadius: 6,
        pointBackgroundColor: 'rgba(255, 105, 180, 1)', // Cor dos pontos
        tension: 0.4
      },
      {
        label: 'Fora Vence',
        data: data.foravence,
        borderColor: 'rgba(34, 193, 195, 1)', // Cores neon mescladas
        backgroundColor: 'rgba(34, 193, 195, 0.1)', // Preenchimento mais transparente
        borderWidth: 2,
        fill: true,
        hidden: true, // Desativado por padrão
        pointRadius: 6,
        pointBackgroundColor: 'rgba(34, 193, 195, 1)', // Cor dos pontos
        tension: 0.4
      },
      {
        label: 'Equilíbrio',
        data: averageLineData,
        borderColor: 'rgba(255, 255, 255, 0.5)',
        borderWidth: 2,
        borderDash: [5, 5],
        fill: false,
        pointRadius: 0,
        hidden: false, // Visível por padrão
      }
    ]
  },
  options: {
    plugins: {
      legend: {
        display: true,
        position: 'top',
        labels: {
          color: 'white'
        },
        onClick: function(e, legendItem, legend) {
          const dataset = legendItem.datasetIndex;
          const ci = legend.chart;
          const meta = ci.getDatasetMeta(dataset);
          meta.hidden = !meta.hidden;
          statsChartVisibleDatasets[legendItem.text] = !meta.hidden;
          ci.update();
        }
      }
    },
    scales: {
      x: {
        title: {
          display: true,
          text: 'Data e Hora',
          color: 'white'
        },
        ticks: {
          color: 'white',
          maxRotation: 45,
          minRotation: 45
        }
      },
      y: {
        beginAtZero: true,
        title: {
          display: true,
          text: 'Percentual (%)',
          color: 'white'
        },
        ticks: {
          color: 'white'
        }
      }
    },
    maintainAspectRatio: false
  }
});

}

function updateCharts() {
  fetchAPIData(currentCampeonato)
    .then(data => {
      const processedData = processAPIData(data);
      
      if (statsChart) statsChart.destroy();
      
      const ctxStats = document.getElementById('statsChart').getContext('2d');
      statsChart = createStatsChart(ctxStats, processedData.labels, processedData);
    })
    .catch(error => {
      console.error('Erro ao atualizar gráficos:', error);
      // Exibe mensagem de erro para o usuário
      alert('Erro ao carregar dados. Verifique se o servidor está rodando em https://betstat.site/api/resultados/');
    });
}

document.getElementById('campeonatoSelector').addEventListener('change', function(e) {
  currentCampeonato = e.target.value;
  updateCharts();
});

document.getElementById('pointsSelector').addEventListener('change', function(e) {
  numPoints = parseInt(e.target.value);
  updateCharts();
});

document.getElementById('averageSelector').addEventListener('change', function(e) {
  averagePoints = parseInt(e.target.value);
  updateCharts();
});

document.getElementById('marketAverageSelector').addEventListener('change', function() {
  selectedMarket = this.value;
  updateCharts();
});

// Inicializa os gráficos ao carregar a página
window.addEventListener('DOMContentLoaded', function() {
  updateCharts();
});
    </script>


    <script>
      function redirecionar(select) {
        const url = select.value;

        if (
          url === "https://t.me/betstatsite" ||
            url === "https://t.me/ProPlayerFut" ||
            url === "https://www.betstat.site/tv/" ||
            url === "https://youtu.be/oRqi3RvH8zE" ||
            url === "https://www.betstat.site/central/" ||
            url === "https://www.betstat.site/sequencia.html" ||
            url === "https://www.betstat.site/porcentagem365.html" ||
            url === "https://www.betstat.site/365macro.html" ||
            url === "https://www.betstat.site/mult365.html" ||
            url === "https://www.betstat.site/365fixo.html" ||
            url === "https://www.betstat.site/multbetano.html" ||
            url === "https://www.betstat.site/porcentagembetano.html" ||
            url === "https://www.betstat.site/macrobetano.html" ||
            url === "https://www.betstat.site/betanofixo.html"
        ) {
          window.open(url, "_blank");
        } else if (url) {
          window.location.href = url;
        }
      }
    </script>

<script>
    document.addEventListener("contextmenu", function (e) {
      e.preventDefault();
    });

    document.addEventListener("keydown", function (e) {
      if (e.key === "F12" || (e.ctrlKey && e.shiftKey && e.key === "I")) {
        e.preventDefault();
      }

      if (e.ctrlKey && e.key === "u") {
        e.preventDefault();
      }

      if (e.ctrlKey && e.shiftKey && e.key === "J") {
        e.preventDefault();
      }

      if (e.ctrlKey && e.shiftKey && e.key === "C") {
        e.preventDefault();
      }
    });

    const devtools = { open: false };
    const element = new Image();
    Object.defineProperty(element, "id", {
      get: function () {
        devtools.open = true;
      },
    });

    console.log("%c", element);
    setInterval(function () {
      if (devtools.open) {
        alert("Desculpe, as ferramentas de desenvolvedor estão abertas!");
        devtools.open = false;
      }
    }, 1000);

    function toggleVideo() {
      const videoDiv = document.getElementById("liveVideo");
      const overlayDiv = videoDiv.querySelector(".iframe-overlay");
      const button = document.querySelector(".toggle-button");

      const isVisible = window.getComputedStyle(videoDiv).display !== "none";

      if (isVisible) {
        videoDiv.style.display = "none";
        overlayDiv.style.display = "none";
        button.textContent = "Expandir Vídeo";
      } else {
        videoDiv.style.display = "block";
        overlayDiv.style.display = "block";
        button.textContent = "Contrair Vídeo";
      }
    }
  </script>
  </body>
</html>
