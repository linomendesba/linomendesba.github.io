<html lang="pt-BR">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="icon" href="img/favicon.ico" type="image/x-icon" />
        <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1"></script>
        <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
        <script
          async
          src="https://www.googletagmanager.com/gtag/js?id=G-4WT805FFHQ"
        ></script>
        <title>BetStat</title>
        <!-- Meta tags SEO principais -->
        <meta
          name="description"
          content="Transforme suas apostas com BetStat - a única plataforma especializada em futebol virtual Betano. Análises precisas, estatísticas confiáveis e resultados comprovados para investimentos inteligentes."
        />
        <meta
          name="keywords"
          content="BetStat, apostas esportivas, futebol virtual, Betano, estatísticas apostas, análise apostas, investimentos esportivos"
        />
    
        <!-- Open Graph meta tags para redes sociais -->
        <meta
          property="og:title"
          content="BetStat | Plataforma de Análise para Apostas Esportivas"
        />
        <meta
          property="og:description"
          content="Transforme suas apostas com análises precisas e estatísticas confiáveis. A única plataforma especializada em futebol virtual Betano."
        />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://www.betstat.site/payment.html" />
        <meta property="og:site_name" content="BetStat" />
    
        <!-- Meta tags adicionais -->
        <meta name="robots" content="index, follow" />
        <meta name="author" content="BetStat" />
        <meta name="canonical" href="https://www.betstat.site/payment.html" />
        <script type="module">
          import { initializeApp } from "https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js";
          import {
            getAuth,
            onAuthStateChanged,
            signOut,
          } from "https://www.gstatic.com/firebasejs/9.0.0/firebase-auth.js";
    
          const firebaseConfig = {
            apiKey: "AIzaSyDmLGMBnUa2YOdP0b-zlZepXjm-zlV477A",
            authDomain: "linoautenticador.firebaseapp.com",
            projectId: "linoautenticador",
            storageBucket: "linoautenticador.firebasestorage.app",
            messagingSenderId: "946057648829",
            appId: "1:946057648829:web:ac5c2b1ba66e651f9d75d4",
            measurementId: "G-4WT805FFHQ",
          };
    
          const app = initializeApp(firebaseConfig);
          const auth = getAuth(app);
    
          onAuthStateChanged(auth, (user) => {
            if (!user) {
              window.location.href = "auth.html";
            }
          });
    
          window.logout = function () {
            signOut(auth)
              .then(() => {
                alert("Você saiu com sucesso!");
                window.location.href = "auth.html";
              })
              .catch((error) => {
                alert("Erro ao sair: " + error.message);
              });
          };
        </script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag() {
            dataLayer.push(arguments);
          }
          gtag("js", new Date());
    
          gtag("config", "G-4WT805FFHQ");
        </script>
        <link
          href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap"
          rel="stylesheet"
        />
      </head>

  <style>
    body {
      font-family: "Roboto", Arial, sans-serif;
      margin: 30px;
      background-color: #1c1f26;
      color: #ffffff;
    }

    option:hover {
      background-color: #ff8000;
      color: #ffffff;
    }

    button {
      background-color: #1c1f26;
      color: rgb(255, 255, 255);
      font-family: "Roboto", Arial, sans-serif;
      border: none;
      padding: 5px 8px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      transition: background-color 0.3s;
      margin: 10px;
    }

    button:hover {
      background-color: #0f1013;
    }

    option {
      background-color: #1c1f26;
      color: #ffffff;
    }

    select {
      width: 100%;
      padding: 5px;
      border-radius: 5px;
      background-color: #0f1217;
      color: #ffffff;
      font-family: "Roboto", Arial, sans-serif;
      font-size: 14px;
      cursor: pointer;
      transition: border-color 0.3s;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    header {
      background: linear-gradient(to right, #fe3c00, #005440);
      width: 100vw;
      width: 100%;
      position: fixed;
      top: 0;
      left: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      height: 60px;
    }

    .header-container {
      display: flex;
      align-items: center;
      width: 100%;
      max-width: 1200px;
      padding: 0 20px;
      justify-content: space-between;
    }

    .logo {
      height: 40px;
    }

    .selectors-container {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .nav-seletor {
      display: flex;
      align-items: center;
      color: #ffffff;
      font-weight: 500;
    }

    .nav-seletor select {
      padding: 0.5rem ;
      border-radius: 6px;
      background-color: #0f1217;
      color: var(--text-color);
      border: 1px solid #ffffff9f;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .logout-btn {
      background-color: #0f1217; /* Fundo vermelho */
      color: white; /* Texto branco */
      padding: 8px 10px; /* Espaçamento interno */
      font-size: 14px; /* Tamanho da fonte */
      border-radius: 5px; /* Cantos arredondados */
      cursor: pointer; /* Cursor de botão */
      border: 1px solid #ffffff81;
    }

    .logout-btn:hover {
      background-color: #720000; /* Cor ao passar o mouse */
    }

    :root {
            --primary-bg: #1c1f26;
            --secondary-bg: #1e1e1e;
            --card-bg: #252525;
            --border-color: #333;
            --text-primary: #f5f5f5;
            --text-secondary: #aaa;
            --green-color: #018b06;
            --red-color: #be0e02;
            --yellow-color: #ffc107;
            --blue-color: #2196f3;
            --header-color: #303030;
            --trend-up-bg: rgba(76, 175, 80, 0.2);
            --trend-down-bg: rgba(244, 67, 54, 0.2);
            --trend-stable-bg: rgba(255, 193, 7, 0.2);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }


        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
        }

        .dashboard-title {
            display: flex;
            align-items: center;
        }

        .table-container {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .table-wrapper {
            background-color: var(--card-bg);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            margin-top: 50px;
        }

        .table-header {
            background-color: var(--header-color);
            padding: 15px;
            border-bottom: 1px solid var(--border-color);
        }

        .table-content {
            padding: 10px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 13px;
            background-color: var(--card-bg);
            color: var(--text-primary);
        }

        th, td {
            padding: 8px 10px;
            text-align: center;
            border: 1px solid var(--border-color);
        }

        th {
            background-color: var(--header-color);
            font-weight: 600;
        }

        .green {
            background-color: var(--green-color);
            color: #fff;
            font-weight: bold;
        }

        .red {
            background-color: var(--red-color);
            color: #fff;
            font-weight: bold;
        }

        h1, h2, h3 {
            color: var(--text-primary);
            font-weight: 600;
        }

        h1 {
            font-size: 24px;
        }

        h2 {
            font-size: 20px;
        }

        h3 {
            font-size: 18px;
            margin-top: 10px;
        }

        .trend-up {
            color: var(--green-color);
            background-color: var(--trend-up-bg);
        }

        .trend-down {
            color: var(--red-color);
            background-color: var(--trend-down-bg);
        }

        .trend-stable {
            color: var(--yellow-color);
            background-color: var(--trend-stable-bg);
        }

        .trend-table {
            margin-top: 15px;
            margin-bottom: 15px;
            width: 100%;
        }

        .arrow {
            font-size: 14px;
            font-weight: bold;
            margin-left: 5px;
        }

        .trend-info {
            margin-top: 10px;
            padding: 15px;
            background-color: var(--card-bg);
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .trend-note {
            font-size: 12px;
            color: var(--text-secondary);
            margin-top: 10px;
            font-style: italic;
        }

        .trend-value {
            font-weight: bold;
        }

        .trend-diff {
            font-size: 12px;
            margin-left: 5px;
        }
        
        .market-name {
            font-weight: bold;
            text-align: left;
            background-color: var(--secondary-bg);
            color: var(--text-primary);
        }

        .dashboard-info {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
        }

        .refresh-icon {
            display: inline-block;
            margin-right: 5px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            th, td {
                padding: 6px 4px;
                font-size: 11px;
            }
        }
  </style>

  <body>
    <body>
      <header>
        <div class="header-container">
          <img src="img/logo.png" alt="Logo" class="logo" />
          <div class="selectors-container">
            <div class="nav-seletor">
              <label for="ligas"></label>
              <select id="ligas" onchange="redirecionar(this)">
                <option value="">Betano</option>
                <option value="index.html">Taça Glória Eterna</option>
                <option value="copa_america.html">Copa América</option>
                <option value="euro.html">Euro</option>
                <option value="campeonato_italiano.html">
                  Campeonato Italiano
                </option>
                <option value="copa_das_estrelas.html">Copa das Estrelas</option>
                <option value="BritishDerbies.html">British Derbies</option>
                <option value="LigaEspanhola.html">Liga Espanhola</option>
                <option value="ScudettoItaliano.html">Scudetto Italiano</option>
              </select>
            </div>
  
            <div class="nav-seletor">
              <label for="ligas"></label>
              <select id="ligas" onchange="redirecionar(this)">
                <option value="">Bet365</option>
                <option value="365copa.html">Copa do Mundo</option>
                <option value="365euro.html">Euro Cup</option>
                <option value="365premier.html">Premier League</option>
                <option value="365super.html">Super Liga</option>
                <option value="365express.html">Express(BETA)</option>
              </select>
            </div>
  
            <div class="nav-seletor">
              <label for="redes"></label>
              <select id="redes" onchange="redirecionar(this)">
                <option value="">Avançado</option>
                <option value="https://www.betstat.site/sequencia.html">
                  Sequência
                </option>
                <option value="https://www.betstat.site/porcentagem365.html">
                  Porcentagem Bet365
                </option>
                <option value="https://www.betstat.site/365macro.html">
                  Macro Bet365
                </option>
                <option value="https://www.betstat.site/mult365.html">
                  MultiLiga Bet365
                </option>
                <option value="https://www.betstat.site/multbetano.html">
                  MultiLiga Betano
                </option>
                <option value="https://www.betstat.site/porcentagembetano.html">
                  Porcentagem Betano
                </option>
              </select>
            </div>
          </div>
        </div>
  
        <div class="nav-seletor">
          <label for="redes"></label>
          <select id="redes" onchange="redirecionar(this)">
            <option value="">Extras</option>
            <option value="https://www.betstat.site/tv/">Ao vivo</option>
            <option value="https://www.betstat.site/central/">
              Cental Tipster
            </option>
            <option value="blog.html">Blog</option>
          </select>
        </div>
  
        <button class="logout-btn" onclick="logout()">Sair</button>
      </header>

    <div class="table-container">
      <div class="table-wrapper" id="copaContainer">
          <div class="table-header">
              <h2>🏆COPA</h2>
          </div>
          <div class="table-content" id="copaContent"></div>
      </div>
      <div class="trend-info" id="copaTrendContainer"></div>
      
      <div class="table-wrapper" id="euroContainer">
          <div class="table-header">
              <h2>🏆EURO</h2>
          </div>
          <div class="table-content" id="euroContent"></div>
      </div>
      <div class="trend-info" id="euroTrendContainer"></div>
      
      <div class="table-wrapper" id="premierContainer">
          <div class="table-header">
              <h2>🏆PREMIER</h2>
          </div>
          <div class="table-content" id="premierContent"></div>
      </div>
      <div class="trend-info" id="premierTrendContainer"></div>
      
      <div class="table-wrapper" id="superContainer">
          <div class="table-header">
              <h2>🏆SUPER</h2>
          </div>
          <div class="table-content" id="superContent"></div>
      </div>
      <div class="trend-info" id="superTrendContainer"></div>
  </div>

    <script>
        const leagues = [
            { id: 'copa', name: 'COPA', url: 'https://betstat.site/api/resultados/Copa' },
            { id: 'euro', name: 'EURO', url: 'https://betstat.site/api/resultados/Euro' },
            { id: 'premier', name: 'PREMIER', url: 'https://betstat.site/api/resultados/Premier' },
            { id: 'super', name: 'SUPER', url: 'https://betstat.site/api/resultados/Super' }
        ];

        function parseScore(score) {
            try {
                if (!score) return { home: 0, away: 0 };
                const [home, away] = score.split('x').map(s => parseInt(s.trim()));
                return { 
                    home: isNaN(home) ? 0 : home, 
                    away: isNaN(away) ? 0 : away 
                };
            } catch (error) {
                console.error('Erro ao processar placar:', score, error);
                return { home: 0, away: 0 };
            }
        }

        function processMatchData(match) {
            const ftScore = parseScore(match.ft);
            return {
                league: match.liga,
                homeGoals: ftScore.home,
                awayGoals: ftScore.away,
                homeTeam: match.time_a,
                awayTeam: match.time_b,
                totalGoals: ftScore.home + ftScore.away,
                date: new Date(match.data),
                hora: match.hora,
                minuto: match.minuto
            };
        }

        async function fetchLeagueData(league) {
            try {
                const response = await fetch(league.url);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const data = await response.json();
                
                // Ordenação por data, hora e minuto (do mais recente para o mais antigo)
                return data
                    .map(processMatchData)
                    .sort((a, b) => {
                        if (a.date.getTime() !== b.date.getTime()) {
                            return b.date.getTime() - a.date.getTime();
                        }
                        if (a.hora !== b.hora) {
                            return b.hora - a.hora;
                        }
                        return b.minuto - a.minuto;
                    });
            } catch (error) {
                console.error(`Erro ao buscar dados da liga ${league.name}:`, error);
                return [];
            }
        }

        function calculateGreens(data) {
            const thresholds = [20, 40, 60, 80, 100, 120, 140, 160, 180, 240, 480, 720, 960, 1440];
            const markets = [
                { name: 'Over 1.5', threshold: 68.46 },
                { name: 'Over 2.5', threshold: 42.16 },
                { name: 'Over 3.5', threshold: 21.33 },
                { name: 'Ambas Sim', threshold: 47.08 },
                { name: 'Ambas Não', threshold: 52.92 },
                { name: 'Under 1.5', threshold: 31.54 },
                { name: 'Under 2.5', threshold: 57.84 },
                { name: '2 Gols', threshold: 24.00 }
            ];

            return markets.map(market => {
                return {
                    market: market.name,
                    threshold: market.threshold,
                    counts: thresholds.map(threshold => {
                        const gamesConsidered = data.slice(0, threshold);
                        if (gamesConsidered.length === 0) return { percentage: 0, color: 'red' };
                        
                        const greenCount = gamesConsidered.filter(match => 
                            checkGreen(match, market.name)).length;
                        const percentage = (greenCount / Math.min(threshold, gamesConsidered.length)) * 100;
                        const roundedPercentage = Math.round(percentage);

                        return {
                            percentage: roundedPercentage,
                            color: percentage >= market.threshold ? 'green' : 'red'
                        };
                    })
                };
            });
        }

        function checkGreen(match, market) {
            switch (market) {
                case 'Over 1.5':
                    return match.totalGoals > 1.5;
                case 'Over 2.5':
                    return match.totalGoals > 2.5;
                case 'Over 3.5':
                    return match.totalGoals > 3.5;
                case 'Ambas Sim':
                    return match.homeGoals > 0 && match.awayGoals > 0;
                case 'Ambas Não':
                    return match.homeGoals === 0 || match.awayGoals === 0;
                case 'Under 1.5':
                    return match.totalGoals < 1.5;
                case 'Under 2.5':
                    return match.totalGoals < 2.5;
                case '2 Gols':
                    return match.totalGoals === 2;
                default:
                    return false;
            }
        }

        function generateTable(data, league) {
            const thresholds = [20, 40, 60, 80, 100, 120, 140, 160, 180, 240, 480, 720, 960, 1440];
            const greens = calculateGreens(data);

            let table = '<table>';
            table += '<tr><th>✅Mercados  ⚽️Jogos</th>' + thresholds.map(t => `<th>${t}</th>`).join('') + '</tr>';

            greens.forEach(result => {
                table += `<tr><td class="market-name">${result.market}</td>`;
                result.counts.forEach(count => {
                    table += `<td class="${count.color}">${count.percentage}%</td>`;
                });
                table += '</tr>';
            });

            table += '</table>';
            document.getElementById(`${league.id}Content`).innerHTML = table;
            
            // Gerar análise de tendências
            generateTrendAnalysis(data, league, greens);
        }
        
        function calculateTrend(data, market, ranges) {
            const trends = {};
            
            ranges.forEach(range => {
                // Calcular porcentagem para período atual
                const currentGames = data.slice(0, range);
                if (currentGames.length < range) {
                    trends[range] = { value: 0, direction: 'stable', difference: 0 };
                    return;
                }
                
                const currentGreens = currentGames.filter(match => checkGreen(match, market)).length;
                const currentPercentage = (currentGreens / currentGames.length) * 100;
                
                // Calcular porcentagem para período anterior
                const previousGames = data.slice(range, range * 2);
                if (previousGames.length < range) {
                    trends[range] = { value: Math.round(currentPercentage), direction: 'stable', difference: 0 };
                    return;
                }
                
                const previousGreens = previousGames.filter(match => checkGreen(match, market)).length;
                const previousPercentage = (previousGreens / previousGames.length) * 100;
                
                // Calcular diferença e direção
                const difference = currentPercentage - previousPercentage;
                let direction = 'stable';
                if (difference > 2) direction = 'up';
                else if (difference < -2) direction = 'down';
                
                trends[range] = {
                    value: Math.round(currentPercentage),
                    direction: direction,
                    difference: Math.round(difference)
                };
            });
            
            return trends;
        }
        
        function getTrendColorClass(trend) {
            if (trend.direction === 'up') return 'trend-up';
            if (trend.direction === 'down') return 'trend-down';
            return 'trend-stable';
        }
        
        function getTrendArrow(direction) {
            if (direction === 'up') return '↑';
            if (direction === 'down') return '↓';
            return '↔';
        }
        
        function generateTrendAnalysis(data, league, greensResults) {
            const ranges = [5, 10, 15];
            let trendHTML = `<h3>Análise de Tendências - ${league.name}</h3>`;
            trendHTML += '<table class="trend-table">';
            trendHTML += '<tr><th>Mercado</th><th>Últimos 5 Jogos</th><th>Últimos 10 Jogos</th><th>Últimos 15 Jogos</th></tr>';
            
            greensResults.forEach(green => {
                const trends = calculateTrend(data, green.market, ranges);
                trendHTML += `<tr><td class="market-name">${green.market}</td>`;
                
                ranges.forEach(range => {
                    const trend = trends[range];
                    const trendClass = getTrendColorClass(trend);
                    const arrow = getTrendArrow(trend.direction);
                    
                    trendHTML += `
                        <td class="${trendClass}">
                            <span class="trend-value">${trend.value}%</span>
                            <span class="arrow">${arrow}</span>
                            <span class="trend-diff">(${trend.difference > 0 ? '+' : ''}${trend.difference}%)</span>
                        </td>
                    `;
                });
                
                trendHTML += '</tr>';
            });
            
            trendHTML += '</table>';
            trendHTML += '<p class="trend-note">Comparação entre períodos atuais e períodos anteriores equivalentes para detectar tendências nos mercados.</p>';
            
            document.getElementById(`${league.id}TrendContainer`).innerHTML = trendHTML;
        }

        async function updateAllTables() {
            for (const league of leagues) {
                const data = await fetchLeagueData(league);
                if (data.length > 0) {
                    generateTable(data, league);
                }
            }
        }

        // Inicialização e intervalos
        setInterval(updateAllTables, 30000); // Atualiza os dados a cada 30 segundos
        updateAllTables();
    </script>


    <script>
      function redirecionar(select) {
        const url = select.value;

        if (
          url === "https://t.me/betstatsite" ||
          url === "https://t.me/ProPlayerFut" ||
          url === "https://www.betstat.site/tv/" ||
          url === "https://www.betstat.site/sequencia.html" ||
          url === "https://www.betstat.site/porcentagem365.html" ||
          url === "https://www.betstat.site/porcentagembetano.html" ||
          url === "https://www.betstat.site/mult365.html" ||
          url === "https://www.betstat.site/multbetano.html" ||
          url === "https://youtu.be/oRqi3RvH8zE" ||
          url === "https://www.betstat.site/central/"
        ) {
          window.open(url, "_blank");
        } else if (url) {
          window.location.href = url;
        }
      }
    </script>

<script>
    document.addEventListener("contextmenu", function (e) {
      e.preventDefault();
    });

    document.addEventListener("keydown", function (e) {
      if (e.key === "F12" || (e.ctrlKey && e.shiftKey && e.key === "I")) {
        e.preventDefault();
      }

      if (e.ctrlKey && e.key === "u") {
        e.preventDefault();
      }

      if (e.ctrlKey && e.shiftKey && e.key === "J") {
        e.preventDefault();
      }

      if (e.ctrlKey && e.shiftKey && e.key === "C") {
        e.preventDefault();
      }
    });

    const devtools = { open: false };
    const element = new Image();
    Object.defineProperty(element, "id", {
      get: function () {
        devtools.open = true;
      },
    });

    console.log("%c", element);
    setInterval(function () {
      if (devtools.open) {
        alert("Desculpe, as ferramentas de desenvolvedor estão abertas!");
        devtools.open = false;
      }
    }, 1000);

    function toggleVideo() {
      const videoDiv = document.getElementById("liveVideo");
      const overlayDiv = videoDiv.querySelector(".iframe-overlay");
      const button = document.querySelector(".toggle-button");

      const isVisible = window.getComputedStyle(videoDiv).display !== "none";

      if (isVisible) {
        videoDiv.style.display = "none";
        overlayDiv.style.display = "none";
        button.textContent = "Expandir Vídeo";
      } else {
        videoDiv.style.display = "block";
        overlayDiv.style.display = "block";
        button.textContent = "Contrair Vídeo";
      }
    }
  </script>
  </body>
</html>
